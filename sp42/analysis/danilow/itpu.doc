
  01/25/92

                               ITPU v1.31
                              ~~~~~~~~~~~~
                      Средство изучения интерфейса
                  объектных модулей Турбо Паскаля (TPU)

       Предлагаемая программа выбирает из TPU-файлов всю полезную сим-
  вольную информацию и выводит ее в файл в приемлемом виде. Для внесе-
  ния ясности надо заметить, что это не производитель  исходного кода,
  поэтому формат выходного файла, хотя и максимально приближен  к тра-
  диционному стилю оформления исходных текстов на  Паскале,  на  самом
  деле не обязательно является правильным. Это обусловлено  рядом тех-
  нических причин. В конце концов, не нужно забывать, что  TPU  -  это
  всего лишь ОБЪЕКТНЫЙ код, совсем не предназначенный для  того, чтобы
  из него производить полновесный исходный текст.
       К сожалению, Borland не гарантирует  вертикальную совместимость
  (что, на взгляд автора, ему несвойственно) в отношении  TPU, поэтому
  доступен лишь формат TPU-файлов, сгенерированных версией  Турбо Пас-
  каля 6.0, а также версией Турбо Паскаля для Windows.  Что  ж,  можно
  повторить известную Борландовскую сентенцию:  "Вам  необходимо пере-
  компилировать все старые модули с помощью новой версии компилятора".

       Программа распространяется на принципах SHAREWARE, поэтому, ес-
  ли она Вам пригодилась,  желательно  премировать  автора  адекватной
  суммой, - это вдохновит на новые изыскания в данной области.

       В этой версии несколько существенных дополнений и  новых  опций
  командной строки. Формат вызова достаточно прост:

     itpu [options] <inputfile>[.TPU] [<outputfile>[.INT]]

       Квадратные скобки по традиции  обозначают  необязательные пара-
  метры. Как и во всякой хорошей программе, порядок следования опций и
  наличие между ними n-го числа пробелов не имеет  решительно никакого
  значения. В именах файлов расширения могут быть как опущены,  так  и
  явно указаны.
       В версии 1.31 имеются в наличие следующие опции:

    /c         Управление регистром букв в идентификаторах.
               u - Все буквы в верхнем регистре
               l - Все в нижнем регистре
               s - Традиционный стиль (первая буква в верхнем
               регистре, все остальные - в нижнем)
               По умолчанию принимается верхний регистр (/cu)

    /w         Управление записью в файл. Если /w+ (или просто /w),
               то старый файл будет переписан, если /w-, то
               при наличии старого файла, будет выдано сообщение
               об ошибке и осуществлено вываливание в DOS. По
               умолчанию принимается последнее.

    /r         Управление выводом комментариев. Пока что все
               комментарии состоят из размера записей record.
               Если запись содержит case-объединения, то выводится
               ее максимальный размер.

    /l         Имя системной библиотеки, которая будет использоваться
               вместо стандартной TURBO.TPL. Можно указывать полный
               путь и даже нестандартное расширение (по умолчанию
               принимается .TPL). Например, пользователи Turbo
               Pascal for Windows могут указать /lTPW или
               /l\TPW\BIN\TPW. Проверка на соответствие библиотеки
               не осуществляется, поэтому, возможна ситуация,
               когда unit скомпилирован с помощью Turbo Pascal for
               Windows, а библиотека была для v6.0, - в этом
               случае могут появиться всякие ругательные 'unknown'
               или что-нибудь в этом роде.

    /u         Список каталогов, в которых могут находиться
               недостающие модули. Поиск модулей осуществляется
               в текущем каталоге, затем в этом списке, а затем
               в PATH. В командной строке могут быть указаны
               несколько параметров /U. В этом случае они
               присоединяются друг к другу.

       В версии 1.31 добавлена  такая  существенная  возможность,  как
  поддержка файлов конфигурации (CFG). CFG-файлы  рассматриваются  как
  часть командной строки, но допускают более свободный  формат написа-
  ния параметров - элементы могут разделяться не  только  пробелами  и
  символами-разделителями (/), но и располагаться на  разных  строках,
  что облегчает чтение CFG-файла. В качестве  примера  приведен  такой
  CFG-файл. Поиск файлов конфигурации осуществляется сначала в том ка-
  талоге, откуда запущена программа, а затем в  текущем.  Вообще,  для
  наглядности можно считать CFG-файлы продолжением (или, скорее, нача-
  лом) командной строки. Таким образом,  количество  информации, пере-
  данной программе ограничивается лишь Вашей фантазией и наличием сво-
  бодной памяти. Конечно, в этой версии не бог весть  сколько информа-
  ции, но если смотреть чуть дальше, то  станет  ясно,  что  командной
  строки в один прекрасный момент может не  хватить.  Параметры  могут
  повторяться, но использоваться будет  последнее  принятое  значение.
  Например, если в CFG-файле в  каталоге,  откуда  запущена  программа
  указано /cs, в CFG-файле в текущем каталоге /cu, а в командной стро-
  ке /cl, то будет использоваться /cl.
       Одно маленькое, но необходимое замечание: CFG-файл должен иметь
  то же имя, что и программа, поэтому, если кто-то по загадочным сооб-
  ражениям решит назвать программу еще более по-другому, то нужно так-
  же переименовать и CFG-файлы.
       В этой версии исправлены некоторые мелкие  неполадки,  а  также
  введена обработка записей, содержащих  case-объединения.  Нужно ска-
  зать, что не всегда сложные записи с большим  количеством  вложенных
  case-структур будут выглядеть идентично исходному  тексту,  но  если
  выдрать полученную запись и скомпилировать, то результат  будет ана-
  логичным, т.е. относительное положение каждого поля  отражается вер-
  но.
       Кроме того, в версии 1.31 введен новый раздел -  'typed const',
  куда помещаются все типизированные константы, - это несколько облег-
  чает чтение интерфейса. Расширена информация о  dependency-файлах, -
  выдается тип файла, дата создания (если имеется) и каталог (тоже ес-
  ли имеется). Поддерживаются следующие типы файлов:  pascal, include,
  object и resource. В  этой  версии  также  полностью  обрабатываются
  inline-функции.

       Автор будет благодарен за оказанную поддержку, а  также коммен-
  тарии и предложения по этой  программе.  Всю  корреспонденцию  можно
  направлять по адресу:

     220100 г.Минск,
     М.Горького, 143-87
     Данилову О.В.

     E-mail:   oleg.danilow@goodwin.ew.su
     Fidonet:  2:466/60

     Спасибо.
