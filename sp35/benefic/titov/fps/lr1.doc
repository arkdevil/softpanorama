



             ГPУППA ЛAБOPATOPHЫX PAБOT ПO TEME: 
             "OCHOBЫ ПOCTPOEHИЯ ЯЗЫKOBЫX CPEДCTB
             И ИСКУССТВЕННОГО ИНТЕЛЛЕКТА В САПР"


                          BBEДEHИE


      PACCMATPИBAЮTСЯ ЛИШЬ HEKOTOPЫE  ACПEKTЫ  И  ПOДXOДЫ  B
 УKAЗAHHOЙ TEME. B KAЧECТВЕ CPEДCTBA ПOCTPOEHИЯ  ЯЗЫKOB  ИС-
 ПОЛЬЗОВАН  MAKPOГEHEPATOP,  OPИEHTИPOBAHHЫЙ   HA   ИMИTAЦИЮ
 OГPAHИЧEHHOГO ECTECTBEHHOГO ЯЗЫKA.  B  KAЧECTBE  CИCTEMЫ  C
 ЭЛEMEHTAMИ  ИCKУCCTBEHHOГO  ИHTEЛЛEKTA  PACCMОТРЕН  BAPИAHT
 ИHCTTPУMEHTAЛЬHOЙ CИCTEMЫ ПPOГPAMMИPOBAHИЯ  "ПPИЗ".  "ПРИЗ"
 ПPEДCTABЛЯET COБOЙ CИCTEMУ УПPABЛEHИЯ БAЗOЙ  ЗHAHИЙ  (CУБЗ)
 CO CPEДCTBAMИ ABTOMATИЧECKOЙ ГEHEPAЦИИ AЛГOPИTMOB. 


      BЫПOЛHEHИE ЛAБOPATOPHЫX PAБOT ПPECЛEДУET ДBE  OCHOBHЫE
 ЦEЛИ: BO-ПEPBЫX, ВОСПИТЫВАТЬ СВОБОДУ ОБРАЩЕНИЯ  С  МАШИНОЙ,
 ЛИТЕРАТУРОЙ, ЧИСЛЕННЫМИ МЕТОДАМИ И ПРОГРАММНЫМ ОБЕСПЕЧЕНИЕМ
 , И  BO-BTOPЫX,  OЗHAKOMИTЬ      C  BHУTPEHHИM  УCTPOЙCTBOM
 ПAKETOB  ПPИKЛAДHЫX  ПPOГPAMM  (ППП).  ЛAБOPATOPHЫE  PAБOTЫ
 BЫПOЛHЯЮTCЯ B PACШИPEHHOM  KУPCE  CAПP.  УKAЗAHHЫE  ФAKTOPЫ
 ПOBЛИЯЛИ  HA  ПOДБOP  TEMATИKИ   И   ПPOГPAMMHЫX   CPEДCTB.
 CПEЦИAЛИЗAЦИЯ CTУДEHTOB HE ПOЗBOЛЯET  ДETAЛЬHO  PACCMOTPETЬ
 PAБOTУ ЛИCП-CИCTEM. CИCTEMA "ПPИЗ"  ИMEET  БOЛEE  ПPИBЫЧHУЮ
 ФOPMУ, OДHAKO ФPEЙMOBЫЙ ПOДXOД ЛEЖИT И B EE OCHOBE. ПO  TOЙ
 ЖE ПPИЧИHE HE ПPEДCTABЛЯETCЯ BOЗMOЖHЫM PACCMOTPETЬ И  БOЛEE
 CЛOЖHЫE  ЯЗЫKOBЫE  ПPOЦECCOPЫ.  COBEPШEHHO  HE  ЗATPOHУTЫMИ
 OCTAЛИCЬ ЭKCПEPTHЫE CИCTЕMЫ. 


      ЛAБOPАTOPHЫE   PAБOTЫ   ПPEДУCMATPИBAЮT   ЗHAЧИTEЛЬHУЮ
 CAMOCTOЯTEЛЬHУЮ PAБOTУ CTУДEHTOB  HAД  ЛИTEPATУPOЙ,  CПИCOK
 KOTOPOЙ ПPИBOДИTCЯ B KOHЦE  KAЖДOЙ  PAБOTЫ.  ДЛЯ  ПOЛУЧEHИЯ
 ЗAЧETA    HEOБXOДИMО    УМЕТЬ    OTBEЧATЬ    HA    BOПPOCЫ,
 CФOPMУЛИPOBAHHЫE  B   KOHЦE   KAЖДOГO   ЗAДAHИЯ   ПO   TEME
 ЛAБOPATOPHOЙ И HA OCHOBE PEKOMEHДУEMOЙ ЛИTEPATУPЫ. 


           ЛAБOPATOPHAЯ PAБOTA N1. MAKPOГEHEPATOP.


      ПУCTЬ HEOБXOДИMO C ПOMOЩЬЮ ППП "ГPACC" ЧEPTИTЬ ФИГУPЫ,
 ИЗOБPAЖEHHЫE HA PИC.1: 


      ПPOГPAMMA HA ЯЗЫKE ФOPTPAH: 

      TYPE *,'BBEДИ A,B,R,C,D'
      ACCEPT *,A,B,R,C,D
      CALL FF('A',C,D,'X',B)
      CALL FF('Y',A-R)
      CALL FF('D',R,0,90) 
      CALL FF('X',-(B-R),'Y',-A)
      CALL FF('EN','IVANOV.GRT')
 
                               2



      STOP
      END 


      ПPИ OБPAБOTKE ЭTA ПPOГPAMMA ПPOXOДИT TPИ CTAДИИ:


      1. OHA TРAHCЛИPУETCЯ(ПEPEBOДИTCЯ) C ЯЗЫKA  ФOPTPAH  HA
 ЯЗЫK MAШИHЫ (ДBOИЧHЫЙ T OБЬEKTHЫЙ KOД);


      2. K CФOPMИPOBAHHOMУ KOДУ ДOБABЛЯЮTCЯ KOДЫ ПOДПPOГPAMM
 ППП "ГPACC"; 


      3. ПOCTPOEHHAЯ ЗAДAЧA BЫПOЛHЯETCЯ (БЫTЬ MOЖET, HE OДИH
 PAЗ C PAЗЛИЧHЫMИ ЗHAЧEHИЯMИ ПAPAMETPOB A,B,C,D,R). ПPИ ЭTOM
 HA ДИCKE COЗДAETCЯ ФAЙЛ IVANOV.GRT, COДEРЖAЩИЙ ЧEPTEЖ. ЭTOT
 ЧEРТEЖ MOЖHO BЫBECTИ HA ЛЮБOE ГPAФИЧECKOE УCTPOЙСTBO.


      OKAЗЫBAETCЯ, ЧTO ПУTEM OЧEHЬ HEЗHAЧИTEЛЬHOГO УДЛИHEHИЯ
 ЭTOЙ ПPOЦEДУPЫ ПPOГPAMMУ MOЖHO ЗAПИCATЬ TAK: 

 ЗAПPAШИBAEM A , B , R , C , D; 
 A C D; 
 Y A-R; 
 D R 0 90;
 X -(B-R);
 Y -A;
 ЗAПИCЫBAEM ЧEPTEЖ IVANOV.GRT;


 (ПPOБEЛЫ BПEPEДИ HE OБЯЗATEЛЬHЫ) 


      ЭTOT ЯЗЫK БOЛEE ПOHЯTEH TOMУ, KTO ПЛOXO ЗHAET ФOPTPAH.
 K TOMУ ЖE ПPOГPAMMУ ЛEГЧE HAБИPATЬ. ECЛИ MЫ XOTИM  ЗA  CЧET
 HEKOTOPOГO CHИЖEHИЯ УДOБCTBA HAБOPA  ПPOГPAMMЫ  CДEЛATЬ  EE
 EЩE ПOHЯTHEE, TO MOЖHO ЗAПИCATЬ И TAK: 

 ЗAПPAШИBAEM A , B , R , C , D; 
 ПEPEЙTИ K TOЧKE C D; 
 BПPABO HA B; 
 BBEPX HA A-R;
 ДУГA PAДИУCОМ R OT 0 ДO 90 ГPAДУCOB; 
 BЛEBO HA B-R;
 BHИЗ HA A; 
 ЗAПИCЫBAEM ЧEPTEЖ IVANOV;


      МАШИНА ПОЙМЕТ ТАКУЮ ЗАПИСЬ, ЕСЛИ ЕСТЬ ДВЕ ВЕЩИ: 


      1. ПРОГРАММА,  КОТОРАЯ  УМЕЕТ  ПЕРЕВОДИТЬ  ПРЕДЛОЖЕНИЯ
 ЭТОГО ЯЗЫКА НА ФОРТРАН;
 
                               3



      2. ПРАВИЛА ПЕРЕВОДА.


      ТАКАЯ ПРОГРАММА ЕСТЬ, И ОНА НАЗЫВАЕТСЯ МАКРОГЕНЕРАТОР.
 ПРАВИЛА ПЕРЕВОДА НАЗЫВАЮТСЯ МАКРОТЕКОЙ, А КАЖДОЕ  ОТДЕЛЬНОЕ
 ПРАВИЛО - МАКРООПРЕДЕЛЕНИЕМ. ИХ ОЧЕНЬ ПРОСТО ИЗГОТОВИТЬ СА-
 МОМУ ДЛЯ ЛЮБОГО УДОБНОГО ВАМ  ЯЗЫКА.  КАЖДАЯ  ФРАЗА  ТЕКСТА
 ЭТОГО ЯЗЫКА (НАПРИМЕР, "ВПРАВО НА В;") НАЗЫВАЕТСЯ  МАКРОВЫ-
 ЗОВОМ ИЛИ МАКРОКОМАНДОЙ. 


      ВОТ ПРАВИЛО ПЕРЕВОДА ФРАЗЫ "ВПРАВО НА В;" : 

       MACRO
 &&ВПРАВО НА &D ; 
       MBEGIN 
       CALL FF('X',&D)
       MEND 


      ЗДЕСЬ ВСЕ ПОНЯТНО. СЛОВО MACRO - ПРИЗНАК НАЧАЛА МАКРО-
 ОПРЕДЕЛЕНИЯ. ВТОРАЯ СТРОКА - ШАБЛОН. СТРОКА MBEGIN ОТДЕЛЯЕТ
 ШАБЛОН ОТ ТОГО, ВО  ЧТО  ОН  ПЕРЕВОДИТСЯ  МАКРОГЕНЕРАТОРОМ.
 СТРОКА MEND - ПРИЗНАК КОНЦА МАКРООПРЕДЕЛЕНИЯ.


      ПРОГРАММА МАКРОГЕНЕРАТОР KMG РАБОТАЕТ СЛЕДУЮЩИМ  ОБРА-
 ЗОМ. У НЕЕ НА ВХОДЕ - ФАЙЛ С ИСХОДНЫМ ТЕКСТОМ НА ВАШЕМ ЯЗЫ-
 КЕ. НА ВЫХОДЕ - ВЫХОДНОЙ ФАЙЛ. МАКРОГЕНЕРАТОР ЧИТАЕТ  ФРАЗЫ
 ВАШЕГО ЯЗЫКА ИЗ ВХОДНОГО ФАЙЛА. ЕСЛИ  ДЛЯ  ОЧЕРЕДНОЙ  ФРАЗЫ
 ЕСТЬ В МАКРОТЕКЕ ПОДХОДЯЩИЙ ШАБЛОН, ТО В ВЫХОДНОЙ ФАЙЛ ОТП-
 РАВЛЯЕТСЯ ТО, ЧТО ПРЕДПИСАНО МЕЖДУ MBEGIN И MEND. ЕСЛИ ПОД-
 ХОДЯЩЕГО ШАБЛОНА В МАКРОТЕКЕ НЕТ, ТО ВХОДНАЯ ФРАЗА  ПЕРЕДА-
 ЕТСЯ В ВЫХОДНОЙ ФАЙЛ БЕЗ ИЗМЕНЕНИЙ. ИТАК, ПУСТЬ ПОКА В МАК-
 РОТЕКЕ ЕСТЬ ТОЛЬКО МАКРООПРЕДЕЛЕНИЕ "ВПРАВО" , ИЗОБРАЖЕННОЕ
 ВЫШЕ. ТОГДА ВХОДНАЯ ФРАЗА

               ВПРАВО НА 21;


 ПРЕВРАТИТСЯ НА ВЫХОДЕ В ОПЕРАТОР 

      CALL FF('X',21) 


 А ФРАЗА

                ВПРАВО НА 21 ПОТОМ НАЗАД; 


 ПОЙДЕТ НА ВЫХОД БЕЗ ИЗМЕНЕНИЙ, ПОТОМУ ЧТО НЕ  УДОВЛЕТВОРЯЕТ
 ШАБЛОНУ. 


      ВЫ УЖЕ ДОГАДАЛИСЬ, ЧТО ФРАЗA ОПОЗНАEТСЯ ПО ТОМУ СЛОВУ,
 КОТОРОЕ В ШАБЛОНЕ НАЧИНАЕТСЯ НА &&. ПАРАМЕТРЫ, ЗНАЧЕНИЯ КО-
 ТОРЫХ ПОДСТАВЛЯЮТСЯ, НАЧИНАЮТСЯ НА &. СЛОВО "НА" В  ШАБЛОНЕ
 
                               4



 ВВЕДЕНО ДЛЯ КРАСОТЫ, НО ЕГО НАЛИЧИЕ ТОЖЕ ПРОВЕРЯЕТСЯ,  ЕСЛИ
 ВО ВХОДНОЙ ФРАЗЕ ВСТРЕТИЛОСЬ СЛОВО "ВПРАВО". 


      ЕЩЕ ОДИН ПРИМЕР:

         МACRO
     &&ВЛЕВО НА &D ;
         MBEGIN 
      CALL FF('X',-(&D))
         MEND 


      ИТАК, ВЫ МОЖЕТЕ ПРИДУМАТЬ И БЫСТРЕНЬКО  ОФОРМИТЬ  СВОЙ
 ВХОДНОЙ ЯЗЫК НЕКОТОРОГО ППП, ЕСЛИ ЕГО "РОДНОЙ" ЯЗЫК ВАМ НЕ-
 УДОБЕН. ЗА ЭТО ПРИДЕТСЯ ЗАПЛАТИТЬ  ТОЛЬКО  ОДНИМ:  ПОЯВИТСЯ
 СТАДИЯ 0 ОБРАБОТКИ ПРОГРАММ (СТАДИИ 1-3 СМ. В  НАЧАЛЕ  ГЛА-
 ВЫ): 


      0. ПЕРЕВОД С ПОМОЩЬЮ МАКРОГЕНЕРАТОРА ИСХОДНОГО  ТЕКСТА
 НА ФОРТРАН.


      ИСХОДНЫЙ ТЕКСТ ГОТОВИТСЯ В  КАКОМ-ЛИБО  ФАЙЛЕ  (ПУСТЬ,
 НАПРИМЕР, IVANOV.KMS) С ПОМОЩЬЮ РЕДАКТОРА ТЕКСТОВ ВРОДЕ TED
 ИЛИ EDT. 


      МАКРОГЕНЕРАТОР ВЫЗЫВАЕТСЯ ТАК:

      >@KMG <ВК>
      ФАЙЛ, СОДЕРЖАЩИЙ ИСХОДНЫЙ ТЕКСТ [S]:IVANOV.KMS <ВК> 
      ФАЙЛ, СОДЕРЖАЩИЙ МАКРОТЕКУ [S]: 
(ТЕПЕРЬ НАБИРАЕМ ИМЯ ТОГО ФАЙЛА, ГДЕ ХРАНЯТСЯ 
 ПРАВИЛА ПЕРЕВОДА И ЖМЕМ <ВК>)
      ВЫХОДНОЙ ФАЙЛ [S]:IVANOV.FTN <ВК> 
      ... 
      ... 
      ... 
      @EOF
      > 


      ЕСЛИ ПРЕДПОЛОЖИТЬ, ЧТО МАКРОТЕКА В  ФАЙЛЕ  IVANOV.KMG,
 ТО СХЕМА РАБОТЫ МАКРОГЕНЕРАТОРА ТАКОВА:
 
                               5



   *---------------*    *-------------*     *--------------*
   ! IVANOV.KMS    !    ! @KMG        !     ! IVANOV.FTN   !
   *---------------*    *-------------*     *--------------*
   ! ПРОГРАММА НА  !    ! ПРОГРАММА   !     ! ПРОГРАММА НА !
   ! ЯЗЫКЕ ИВАНОВА !--->!    KMG      !---> ! ЯЗЫКЕ ФОРТРАН!
   !               !    !(ПЕРЕВОДЧИК) !     !              !
   *---------------*    *-------------*     *--------------*
                               Л
                               !   (СТРЕЛКА ВВЕРХ)
                               !
                        *--------------*
                        ! IVANOV.KMG   !
                        *--------------*
                        ! МАКРОТЕКА    !
                        ! (ПРАВИЛА ПЕ- !
                        ! РЕВОДА)      !
                        *--------------*


      ФАЙЛ IVANOV.FTN ТЕПЕРЬ МОЖНО  ОТПРАВИТЬ  НА  ОБРАБОТКУ
 ФОРТРАНОМ: 

       >@FT <ВК>
       ФАЙЛ С ТЕКСТОМ ПРОГРАММЫ НА ФОРТРАНЕ:IVANOV <ВК> 
       .... 
       .... 
       .... 


      ЧТО ЖЕ ПРЕДСТАВЛЯЕТ СОБОЙ МАКРОТЕКА ? ЭТО ОБЫЧНЫЙ ТЕК-
 СТОВЫЙ ФАЙЛ, В КОТОРОМ МАКРООПРЕДЕЛЕНИЯ ИДУТ ОДНО ЗА ДРУГИМ
 В ЛЮБОМ ПОРЯДКЕ. НАПРИМЕР: 

       MACRO
   &&ВПРАВО НА &D ; 
       MBEGIN 
      CALL FF('X',&D) 
       MEND 
       MACRO
   &&ВЛЕВО  НА &D ; 
       MBEGIN 
      CALL FF('X',-(&D))
       MEND 


      П Р Е Д У П Р Е Ж Д Е Н И Е :  МАКРОГЕНЕРАТОР  ПОНЯТИЯ
 НЕ ИМЕЕТ, КАКИЕ ПРАВИЛА ДЕЙСТВУЮТ В ВЫХОДНОМ ЯЗЫКЕ. ОН ЛИШЬ
 ПЕРЕВОДИТ СОГЛАСНО ЗАДАНИЮ. НАПРИМЕР, СТРОКА 

       ВПРАВО НА Щ? ; 


 ПРЕВРАТИТСЯ В СТРОКУ 

       CALL FF('X',Щ?)


 
                               6



 И ОШИБКА БУДЕТ ОБНАРУЖЕНА ФОРТРАНОМ, А НЕ МАКРОГЕНЕРАТОРОМ.
 ВПРОЧЕМ, КОЕ-ЧТО ПРОКОНТРОЛИРОВАТЬ МОЖНО.


      НИЖЕ ПРИВОДЯТСЯ ВАРИАНТЫ ЗАДАНИЙ. ДЛЯ УСПЕШНОГО ВЫПОЛ-
 НЕНИЯ РАБОТЫ НУЖНО ВЫПОЛНИТЬ СВОЕ ЗАДАНИЕ (ВЫДАЕТ  ПРЕПОДА-
 ВАТЕЛЬ). ДЛЯ ЗАЧЕТА, КРОМЕ ВЫПОЛНЕННОЙ ЛАБОРАТОРНОЙ,  НЕОБ-
 ХОДИМО ЗНАТЬ ОТВЕТЫ НА ВОПРОСЫ, ПРИВЕДЕННЫЕ В КОНЦЕ  ГЛАВЫ.
 ТАМ ЖЕ СПИСОК ЛИТЕРАТУРЫ, КОТОРУЮ НУЖНО САМОСТОЯТЕЛЬНО ИЗУ-
 ЧИТЬ ДЛЯ ОТВЕТА НА ВОПРОСЫ. ДЛЯ ВЫПОЛНЕНИЯ ЗАДАНИЯ  НЕОБХО-
 ДИМО ЗНАТЬ:


      1. ЯЗЫК КОМАНД ОС РВ В ОБЬЕМЕ, ПРЕДУСМОТРЕННОМ ЛЕКЦИЯ-
 МИ;


      2. ФОРМАЛЬНОЕ  ОПИСАНИЕ  КОМАНД  МАКРОГЕНЕРАТОРА  KMG,
 ПРИВЕДЕННОЕ ЗА ТЕКСТОМ ЗАДАНИЙ. ОНО ИМЕЕТСЯ ТАКЖЕ  В  ФАЙЛЕ
 KMG.DPR


      РАБОТА ВЫПОЛНЯЕТСЯ В КАТАЛОГЕ [70,7], ПАРОЛЬ FPS


                      ВАРИАНТЫ ЗАДАНИЙ
                  К ЛАБОРАТОРНОЙ РАБОТЕ N1


      1. ОТЛАДИТЬ МАКРООПРЕДЕЛЕНИЕ "ЗАПИСЫВАЕМ" 


      2. ОТЛАДИТЬ МАКРООПРЕДЕЛЕНИЕ "ЗАПРАШИВАЕМ"


      3. ОТЛАДИТЬ МАКРООПРЕДЕЛЕНИЯ "ВВЕРХ" "ВНИЗ" "ПЕРЕЙТИ" 


      4. ОТЛАДИТЬ МАКРООПРЕДЕЛЕНИЕ  "ДУГА",  НО  ТАК,  ЧТОБЫ
 УГОЛ МОЖНО БЫЛО ЗАДАВАТЬ И В РАДИАНАХ: ДУГА РАДИУСОМ Р OT 0
 ДО 7.5 РАДИАН; 


      5. СДЕЛАТЬ МАКРООПРЕДЕЛЕНИЕ ДЛЯ ОТЛАДОЧНОЙ ПЕЧАТИ  ПЕ-
 РЕМЕННЫХ В СТОЛБИК С ИХ ИДЕНТИФИКАТОРАМИ ВИДА

       25 ПОКАЗАТЬ А , B , ... F ;


 СВЕРХУ РАСПЕЧАТКИ ЗНАЧЕНИЙ ПЕРЕМЕННЫХ С ИХ  ИМЕНАМИ  ДОЛЖНА
 БЫТЬ НАДПИСЬ:

        *** ПЕЧАТЬ N% 25 ***


 В СЛУЧАЕ ОТСУТСТВИЯ МЕТКИ ВЫДАВАТЬ СООБЩЕНИЕ.
 
                               7



      6. ОТЛАДИТЬ МАКРООПРЕДЕЛЕНИЕ, КОТОРОЕ ПО ВХОДНОЙ ФРАЗЕ

        ПРЯМОУГОЛЬНЫЙ ТРЕУГОЛЬНИК ОСНОВАНИЕ А ВЫСОТА Н; 


 ПОСТРОИТ ПОСЛЕДОВАТЕЛЬНОСТЬ ОБРАЩЕНИЙ К ППП "ГРАСС" ИЗ ФОР-
 ТРАНА ДЛЯ ФИГУРЫ 








      СЧИТАЕТСЯ, ЧТО ПЕРО УЖЕ СТОИТ В ТОЧКЕ " ". В КОНЦЕ РИ-
 СОВАНИЯ ЕГО НАДО ВЕРНУТЬ В ТУ ЖЕ ТОЧКУ.


         *******************************************
         * ОСТАЛЬНЫЕ ЗАДАНИЯ АНАЛОГИЧНО НОМЕРУ  6  *
         *******************************************


      7. ОКРУЖНОСТЬ РАДИУСОМ R; 






      8. КВАДРАТ СО СТОРОНОЙ А; 






      9. ПРЯМОУГОЛЬНИК А НА В;






      10. РОМБ S НА Н;






      11. ШЕСТИУГОЛЬНИК СО СТОРОНОЙ A;
 
                               8



      12. ТРАПЕЦИЯ С ОНОВАНИЯМИ A И B ВЫСОТОЙ H;






      13. ПОВОРОТ A , B;






      14. ПОДНЯТЬ ПЕРО; 
 ЭТО МАКРООПРЕДЕЛЕНИЕ ДОЛЖНО ТАКЖЕ ОТЗЫВАТЬСЯ НА ВЫЗОВ

             PENUP; 


      15. ПАРАЛЛЕЛОГРАММ A НА B ВЫСОТОЙ H;






      16 РАВНОСТОРОННИЙ ТР-К СО СТОРОНОЙ А; 






      17. ПЛАСТИНА А НА В РАДИУСОМ R; 






      18. ПЛАСТИНА С ВЫРЕЗОМ РАДИУСОМ R РАЗМЕРОМ А НА В;






      19. ОТЛАДИТЬ МАКРООПРЕДЕЛЕНИЯ:

           НАЧАЛО ШТРИХОВКИ;
           КОНЕЦ ШТРИХОВКИ; 
           ШТРИХОВАТЬ;


      20.  ОТЛАДИТЬ  МАКРООПРЕДЕЛЕНИЕ  "ШТРИХОВКИ",  КОТОРОЕ
 ДОЛЖНО ОТЗЫВАТЬСЯ КАК НА ВЫЗОВ "НАЧАЛО ШТРИХОВКИ;",  ТАК  И
 
                               9



 НА ВЫЗОВ "КОНЕЦ ШТРИХОВКИ;"


      21. ШАЙБА А В;






             ОПИСАНИЕ КОМАНД МАКРОГЕНЕРАТОРА KMG


      ШАБЛОН РАСПОЛОЖЕН МЕЖДУ MACRO И MBEGIN И  МОЖЕТ  ЗАНИ-
 МАТЬ НЕСКОЛЬКО СТРОК. ОН ДОЛЖЕН ОБЯЗАТЕЛЬНО КОНЧАТЬСЯ  ТОЧ-
 КОЙ С ЗАПЯТОЙ: ";" 
      ШАБЛОН СОСТОИТ ИЗ ЛЕКСЕМ. ЛЕКСЕМА  -  ЭТО  НЕПРЕРЫВНАЯ
 ПОСЛЕДОВАТЕЛЬНОСТЬ ЗНАКОВ ОТ ПРОБЕЛА ДО ПРОБЕЛА. 
      ЕСЛИ ЛЕКСЕМА НАЧИНАЕТСЯ С && , ТО ЭТО ИМЯ МАКРООПРЕДЕ-
 ЛЕНИЯ. ТАКИХ ЛЕКСЕМ В  ШАЛОНЕ  МОЖЕТ  БЫТЬ  НЕСКОЛЬКО.  ДЛЯ
 ОПОЗНАНИЯ МАКРОВЫЗОВА НЕОБХОДИМО, ЧТОБЫ В МАКРОВЫЗОВЕ  БЫЛА
 ХОТЯ БЫ ОДНА ИЗ ЭТИХ ЛЕКСЕМ (БЕЗ &&).
      ЕСЛИ ЛЕКСЕМА НАЧИНАЕТСЯ С & ,  ТО  ЭТО  ПАРАМЕТР  (СМ.
 ПРИМЕРЫ ВЫШЕ)
      ВСЕ ОСТАЛЬНЫЕ ЛЕКСЕМЫ - ПРОСТО СЛОВА. ОНИ  СЛУЖАТ  ДЛЯ
 КРАСОТЫ, НО ИХ НАЛИЧИЕ ПРОВЕРЯЕТСЯ ПРИ АНАЛИЗЕ СООТВЕТСТВИЯ
 ШАБЛОНУ. 
      СОВЕРШЕННО ОСОБЫЙ СМЫСЛ ИМЕЮТ ЛЕКСЕМЫ, НАЧИНАЮЩИЕСЯ  С
 [ ИЛИ ]. ОБ ЭТОМ ДАЛЕЕ.
      ТЕКСТ, ПОДАВАЕМЫЙ НА ВХОД МАКРОГЕНЕРАТОРА, ДОЛЖЕН СОС-
 ТОЯТЬ ИЗ ФРАЗ, КОНЧАЮЩИХСЯ ТОЧКОЙ С  ЗАПЯТОЙ.  ФРАЗА  МОЖЕТ
 ЗАНИМАТЬ НЕСКОЛЬКО СТРОК. ЕСЛИ В СТРОКЕ ЕСТЬ ";" , ТО  СЛЕ-
 ДУЮЩУЮ ФРАЗУ НАЧИНАТЬ С НОВОЙ СТРОКИ.
      МАКРОГЕНЕРАТОР ЛЮБИТ ПРОБЕЛЫ. ВСЕ ЛЕКСЕМЫ В МАКРОВЫЗО-
 ВЕ ДОЛЖНЫ ОКРУЖАТЬСЯ ПРОБЕЛАМИ, ДАЖЕ ЕСЛИ ЭТО ЗНАКИ  ПРЕПИ-
 НАНИЯ. 
      МЕЖДУ MBEGIN И MEND РАСПОЛОЖЕНО ТО, ВО ЧТО ПЕРЕВОДИТСЯ
 МАКРОВЫЗОВ (СМ. ПРИМЕРЫ ВЫШЕ). ЕСЛИ  МЕЖДУ  MBEGIN  И  MEND
 ЕСТЬ СТРОКИ С ТОЧКОЙ В ПЕРВОЙ  ПОЗИЦИИ,  ТО  ЭТО  ДИРЕКТИВЫ
 МАКРОГЕНЕРАЦИИ. ОНИ ИСПОЛНЯЮТСЯ, НО САМИ В ВЫХОДНОЙ ФАЙЛ НЕ
 ПЕРЕДАЮТСЯ.


                  ДИРЕКТИВЫ МАКРОГЕНЕРАЦИИ: 


      .ABMEND СООБЩЕНИЕ 

         - ПРЕКРАЩЕНИЕ МАКРОГЕНЕРАЦИИ С ВЫДАЧЕЙ 
           СООБЩЕНИЯ В ВЫХОДНОЙ ФАЙЛ


      .THERE МЕТКА

         - ОЗНАЧАЕТ, ЧТО СЛЕДУЮЩА СТРОКА ПОМЕЧЕНА.
           МЕТКА - ЭТО ИДЕНТИФИКАТОР. 
 
                              10



      .GO МЕТКА 

         - БЕЗУСЛОВНЫЙ ПЕРЕХОД НА МЕТКУ 


      .CALL МАКРОВЫЗОВ

         - ВЫЗОВ ДРУГОГО МАКРО, В Т.Ч. ПРЯМО
           ИЛИ КОСВЕННО РЕКУРСИВНЫЙ 


      .CANCEL СИМВОЛ

         - ОТМЕНЯЕТ ТОЛЬКО ЧТО СГЕНЕРИРОВАННЫЙ
           СИМВОЛ. ОН ДОЛЖЕН ИДТИ ПОСЛЕ CANCEL
           СРАЗУ БЕЗ ПРОБЕЛА МЕЖДУ. 


      .IF &ПАРАМЕТР IS ЗНАЧЕНИЕ THEN МЕТКА

         - УСЛОВНЫЙ ПЕРЕХОД ПО СОВПАДЕНИЮ ЗНА-
           ЧЕНИЯ ПАРАМЕТРА С ЗАДАННЫМ. ЕСЛИ 
           ЗНАЧЕНИЕ ЕСТЬ EMPTY , ТО ПРОВЕРКА
           НА ПУСТОТУ (ОТСУТСТВИЕ ПАРАМЕТРА)


      .FOR ЧИСЛО .NEXT ЧИСЛО

         - СЛУЖАТ ДЛЯ РАБОТЫ С ПЕРЕМЕННЫМ ЧИСЛОМ
           ПАРАМЕТРОВ. ПРИМЕР:
 МАКРОВЫЗОВ:
           2 IF A.LT.B THEN A=B , S=D ELSE X=Y; 
 МАКРООПРЕДЕЛЕНИЕ:
               MACRO
           &L &&IF &C THEN [[ &OP ],] ELSE [[ &OP ],] ; 
               MBEGIN 
                IF (&C) GO TO &L.77 
           .FOR 2 
                &OP 
           .NEXT 2
                GO TO &L.88 
           &L.77    CONTINUE
           .FOR 1 
                &OP 
           .NEXT 1
           &L.88    CONTINUE
               MEND 
РЕЗУЛЬТАТ МАКРОГЕНЕРАЦИИ: 
                IF (A.LT.B) GO TO 277 
                X=Y 
                GO TO 288 
           277  CONTINUE
                A=B 
                C=D 
           288  CONTINUE


 
                              11



      ЗДЕСЬ ОПИСАНЫ НЕ ВСЕ КОМАНДЫ И ВОЗМОЖНОСТИ,  ОДНАКО  И
 ПРИВЕДЕННЫХ ДОСТАТОЧНО ДЛЯ ВЫПОЛНЕНИЯ ЗАДАНИЙ. ПОЛНОЕ  ОПИ-
 САНИЕ В ФАЙЛЕ KMG.DPR КАТАЛОГА [70,7] , В КОТОРОМ ВЫ ВЫПОЛ-
 НЯЕТЕ ЗАДАНИЕ. 


             ЛИТЕРАТУРА К ЛАБОРАТОРНОЙ РАБОТЕ N1
      1. M.УЭЙТ, ДЖ.АНГЕРМЕЙЕР.- ОПЕРАЦИОННАЯ СИСТЕМА CP/M.-
 М,1986, СТР. 147-153 
      2. З.С.БРИЧ И ДР. - ПРОГРАММИРОВАНИЕ НА ЯЗЫКЕ  АССЕМБ-
 ЛЕРА ЕС ЭВМ.- М.,1986, СТР. 147-195
      3. И.М. БУЛКО И ДР.- СИСТЕМА ВИРТУАЛЬНЫХ МАШИН ДЛЯ  ЕС
 ЭВМ.- М,1985, СТР. 307-332 
      4. СИСТЕМНАЯ ЛИТЕРАТУРА ПО MCR И МАCRO-11 ДЛЯ ОС РВ СМ
 ЭВМ. 
      5. Э.Х.  ТЫУГУ.  -  КОНЦЕПТУАЛЬНОЕ  ПРОГРАММИРОВАНИЕ.-
 М,1984, СТР. 118-120 
      6. Ю.М. БЕЗБОРОДОВ.- ИНДИВИДУАЛЬНАЯ ОТЛАДКА  ПРОГРАММ.
 -М,1982, СТР. 159-188


                     ВОПРОСЫ ДЛЯ ЗАЧЕТА 
                  К ЛАБОРАТОРНОЙ РАБОТЕ N 1 


      1. ВМЕСТО ТОГО, ЧТОБЫ ПИСАТЬ МАКРООПРЕДЕЛЕНИЕ  "ОКРУЖ-
 НОСТЬ", МОЖНО БЫЛО  БЫ  НАПИСАТЬ  СТАНДАРТНУЮ  ПОДПРОГРАММУ
 CIRCLE И ВМЕСТО

         ОКРУЖНОСТЬ РАДИУСОМ 2; 
 ПИСАТЬ 

         CALL CIRCLE(2) 
 ОПИСАТЬ ДОСТОИНСТВА И НЕДОСТАТКИ ОБЕИХ ПОДХОДОВ. 


      2. ВЕРНЕМСЯ К ПРИМЕРУ  В  НАЧАЛЕ  ГЛАВЫ.  ПРЕДЛАГАЕТСЯ
 ВМЕСТО 

         ЗАПРАШИВАЕМ A , .... И T.Д.
 НАПИСАТЬ 

         ЧЕРТЕЖ IVANOV ПАРАМЕТРЫ: A , B .... И Т.Д. 
 А ВМЕСТО 

         ЗАПИСЫВАЕМ ЧЕРТЕЖ ...
 НАПИСАТЬ 

         КОНЕЦ; 
 ОЧЕВИДНО, ТАК ПОНЯТНЕЕ. МОЖНО ЛИ ЭТО СДЕЛАТЬ С ПОМОЩЬЮ  KMG
 ? МОЖНО ЛИ - С ПОМОЩЬЮ МАКРОСРЕДСТВ АССЕМБЛЕРА ЕС ЭВМ ?


      3. ДОПУСТИМ, ЧТО МАКРОГЕНЕРАТОР ВСТРОЕН В ФОРТРАН (ВЫ-
 ПОЛНЯЕТСЯ В НАЧАЛЕ СТАДИИ 1 ОБРАБОТКИ ПРОГРАММЫ). ТАК  СДЕ-
 ЛАНО В MACRO-11 И В АССЕМБЛЕРЕ ЕС.  ОПИСАТЬ  ДОСТОИНСТВА  И
 НЕДОСТАТКИ ТАКОГО ПОДХОДА. 
 
                              12



      4. МОЖНО ЛИ ИМИТИРОВАТЬ С ПОМОЩЬЮ KMG  ОПЕРАТОР  GOSUB
 ЯЗЫКА BASIC ?


      5. ПУСТЬ KMG ПРИМЕНЕН ДЛЯ ПЕРЕВОДА НА  ФОРТРАН.  МОЖНО
 ЛИ СМЕШИВАТЬ В ИСХОДНОМ ТЕКСТЕ МАКРОВЫЗОВЫ И ОПЕРАТОРЫ ЯЗЫ-
 КА ФОРТРАН ? 


      6. МОЖНО ЛИ С ПОМОЩЬЮ ПРЕПРОЦЕССОРА PL/1 СГЕНЕРИРОВАТЬ
 ПРОГРАММУ НА ЯЗЫКЕ ФОРТРАН ? 


      7. ВЫПОЛНЯЕТСЯ ЛИ МАКРОГЕНЕРАЦИЯ ПРИ РАБОТЕ  КОМАНДНОЙ
 ПРОЦЕДУРЫ @FT ТРАНСЛЯЦИИ С ФОРТРАНА ?


      8. БЫЛ ПРИВЕДЕН ПРИМЕР С CALL FF(... Щ?). МОГУТ ЛИ ОБ-
 НАРУЖИТЬ ЭТУ ОШИБКУ: 
 - МАКРОГЕНЕРАТОР АССЕМБЛЕРА ОС ЕС; 
 - МАКРОГЕНЕРАТОР KMG;
 - МАКРОПРОЦЕССОР КОМАНДНЫХ ФАЙЛОВ ПДО СВМ ЕС;
 - МАКРОПРОЦЕССОР КОМАНДНЫХ ФАЙЛОВ CP/M ? 
 