 
 
 
 
                   ЛАБОРАТОРНАЯ РА БОТАN 3
      ПОСТРОЕНИЕ ПРОСТЕЙШЕГО ПАКЕТА ПРИКЛАДНЫХ ПРОГРАММ
 
 
      ПРИ АНАЛИЗЕ РЕСПРЕДЕЛЕНИЯ ДАВЛЕНИЙ В ГИДРОНАСОСАХ ВОЗ-
 НИКАЕТ ЗАДАЧА ОПРЕДЕЛЕНИЯ ПЛОЩАДЕЙ  ПЛОСКИХ  ФИГУР  СЛОЖНОЙ
 ФОРМЫ (ПРИМЕР НА РИС.1)
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
      ТАКУЮ ФОРМУ ИМЕЮТ ПРОКЛАДКИ ГИДРОНАСОСОВ.  ХАРАКТЕРИС-
 ТИКИ ГИДРОНАСОСА ЗАВИСЯТ ОТ ПЛОЩАДИ ПРОКЛАДОК, ФОРМЫ И РАС-
 ПОЛОЖЕНИЯ ВЫРЕЗОВ И ДРУГИХ ПАРАМЕТРОВ. ФОРМУ ПРОКЛАДКИ ПРИ-
 ХОДИТСЯ ПОДБИРАТЬ ИСХОДЯ ИЗ РАЗЛИЧНЫХ УСЛОВИЙ, В TOM  ЧИСЛЕ
 ВЕЛИЧИНЫ ПЛОЩАДИ, МЕТОДОМ ПРОБ И ОШИБОК.
      КАК ЭТУ ЗАДАЧУ РЕШАЮТ  НА  ОПЫТНОМ  ПРОИЗВОДСТВЕ  З-ДА
 "ГИДРОСИЛА" ? ПЛОЩАДЬ НАХОДЯТ В ДВА ЭТАПА:
 
 
 1. ОПРЕДЕЛЯЮТ КООРДИНАЫ ТОЧЕК A,B,C,D,E,F,G,H,X,Y 2. ПЛОЩА-
 ДИ ФРАГМЕНТОВ ВЫЧИСЛЯЮТ ПУТЕМ ИНТЕГРИРОВАНИЯ.
 
 
      ОЧЕВИДНО, ЭТО ЗАДАЧА НЕТРИВИАЛЬНАЯ И  БОЛЕЕ  ДЕТАЛЬНОЙ
 АЛГОРИТМИЗАЦИИ НЕ ПОДДАЕТСЯ. КРОМЕ ТОГО, КОНКРЕТНОЕ  СОДЕР-
 ЖАНИЕ ПУНКТОВ 1 И 2 СОВСЕМ РАЗЛИЧНОЕ  ДЛЯ  ФИГУР  РАЗЛИЧНОЙ
 ФОРМЫ.
      НАМ НАДО СДЕЛАТЬ ППП ДЛЯ НАХОЖДЕНИЯ ПЛОЩАДЕЙ. ПРИ ЭТОМ
 НЕОБХОДИМО РЕШИТЬ КАК МИНИМУМ ДВЕ ЗАДАЧИ:
 
 
 1. ПРИДУМАТЬ КОМПАКТНЫЙ ЯЗЫК ОПИСАНИЯ ФОРМ И  РАЗМЕРОВ  ФИ-
 ГУР;
 2. ПРИДУМАТЬ РЕГУЛЯРНЫЙ СПОСОБ ОПРЕДЕЛЕНИ ПЛОЩАДИ.
 
 
      НАЧНЕМ СО СПОСОБА НАХОЖДЕНИЯ ПЛОЩАДИ.
 О П Р Е Д Е Л Е Н И Е: ФУНКЦИЕЙ РВАЧЕВА R(X,Y) ПЛОСКОЙ  ФИ-
 ГУРЫ НАЗОВЕМ ФУНКЦИЮ, ПРИНИМАЮЩУЮ ЗНАЧЕНИЯ 0 ИЛИ 1:
 

                               2
 
 
 
       R(X,Y) = 0 , ЕСЛИ ТОЧКА (X,Y) ВНЕ ФИГУРЫ;
       R(X,Y) = 1 , ЕСЛИ ТОЧКА (X,Y) ВНУТРИ
                    ИЛИ НА ГРАНИЦЕ ФИГУРЫ
 
 
      ТЕПЕРЬ ДЛЯ ЛЮБОЙ ТОЧКИ ПЛОСКОСТИ МАШИНА СМОЖЕТ ОПРЕДЕ-
 ЛИТЬ, ВНУТРИ ОНА ИЛИ СНАРУЖИ ФИГУРЫ. ДЛЯ ЭТОГО МАШИНА ДОЛЖ-
 НА ВЫЧИСЛИТЬ ФУНКЦИЮ РВАЧЕВА В ЭТОЙ ТОЧКЕ (ВИДЕТЬ МАШИНА НЕ
 УМЕЕТ !)
      ФУНКЦИЯ РВАЧЕВА ДЛЯ КРУГА РАДИУСОМ R С ЦЕНТРОМ В НАЧА-
 ЛЕ КООРДИНАТ:
 
       R(X,Y)=UNEG(R**2-(X**2+Y**2))
 
 
      ФУНКЦИЯ UNEG РАВНА НУЛЮ  НА  ОТРИЦАТЕЛЬНОЙ  ПОЛУОСИ  И
 ЕДИНИЦЕ НА ПОЛОЖИТЕЛЬНОЙ. НАРИСУЕМ ВОКРУГ ЭТОГО КРУГА КВАД-
 РАТ (РИС.2):
 
 
 
 
 
 
 
 
      БУДЕМ ГЕНЕРИРОВАТЬ ПАРЫ ЧИСЕЛ (X,Y) , РАВНОМЕРНО РАСП-
 РЕДЕЛЕННЫЕ В ИНТЕРВАЛАХ ([-R,R],[-R,R]). ЭТО ВСЕ РАВНО, ЧТО
 БРОСАТЬ РАВНОМЕРНО ТОИ В КВАДРАТ. ПУСТЬ  ВСЕГО  МЫ  БРОСАЛИ
 ТОЧКИ N РАЗ, А В КРУГ ПОПАЛИ M РАЗ. ТОГДА
 
     ПЛОЩАДЬ КРУГА        M
   -----------------  = -----
    ПЛОЩАДЬ КВАДРАТА      N
 
 
    S/(4*R**2) = M/N
 
    S = 4*R**2*M/N
 
 
      ПЛОЩАДЬ БУДЕТ ВЫЧИСЛЕНА ТЕМ ТОЧНЕЕ, ЧЕМ БОЛЬШЕ N И ЧЕМ
 ЛУЧШЕ РАВНОМЕРНОСТЬ РАСПРЕДЕЛЕНИЯ СЛУЧАЙНЫХ ЧИСЕЛ.
      ЭТО И СЛЕДУЮЩИЕ ЗАМЕЧАТЕЛЬНЫЕ СВОЙСТВА ФУНКЦИИ РВАЧЕВА
 ЛЕЖАТ В ОСНОВЕ СПОСОБА ВЫЧИСЛЕНИЯ ПЛОЩАДИ:
      1. ЗНАК ФУНКЦИИ РВАЧЕВА ПЕРЕСЕЧЕНИЯ ФИГУР РАВЕН  ЗНАКУ
 ПРОИЗВЕДЕНИЯ ИХ ФУНКЦИЙ РВАЧЕВА:
 
 
 
 
 
 
 
 
      2. ЗНАК ФУНКЦИИ РВАЧЕВА ОБЬЕДИНЕНИЯ ФИГУР РАВЕН  ЗНАКУ
 СУММЫ ИХ ФУНКЦИЙ РВАЧЕВА:

                               3
 
 
 
      3. ФУНКЦИ РВАЧЕВА ВНЕШНОСТИ ФИГУРЫ РАВНА ФУНКЦИИ ВНУТ-
 РЕННОСТИ С ОБРАТНЫМ ЗНАКОМ:
 
 
 
 
 
 
 
 
      НАПРИМЕР, ДЛЯ ОПРЕДЕЛЕНИЯ ПРИНАДЛЕЖНОСТИ  ТОЧКИ  (X,Y)
 ЗАШТРИХОВАННОЙ ФИГУРЕ НА РИС. 3 АНАЛИЗИРУЕМ ЗНАК ФУНКЦИИ:
 
          RA*RB*(-RC)+RD
 
 
 
 
 
 
 
 
 
      ПРОЦЕСС СЛУЧАЙНОГО БРОСАНИЯ ТОЧКИ НЕ ЗАВИСИТ ОТ  ФИГУ-
 РЫ, И ЕГО ВПОЛНЕ МОЖНО ОФОРМИТЬ В ВИДЕ  СТАНДАРТНОГО  ФРАГ-
 МЕНТА ПРОГРАММЫ. А ВОТ R(X,Y) ПРИДЕТСЯ ВЫЧИСЛЯТЬ НА  ОСНОВЕ
 ОПИСАНИЯ ФОРМЫ ФИГУРЫ FPS-ОПЕРАТОРОМ COMPUTE.
      ИТАК, МАШИНА ДОЛЖНА ЗНАТЬ:
      1. КАК ВЫЧИСЛЯТЬ R ВНУТРЕННОСТИ ПРОСТЫХ ФИГУР;
      2. КАК ВЫЧИСЛЯТЬ R ПЕРЕСЕЧЕНИЯ, ОБЬЕДИНЕНИЯ И ВНЕШНОС-
 ТИ ФИГУР.
 
 
      ДЛЯ ЭТОГО НЕОБХОДИМО ВНЕСТИ В  БАЗУ  ЗНАНИЙ  СЛЕДУЮЩИЕ
 МОДЕЛИ:
 1. МОДЕЛИ ПРОСТЫХ ФИГУР (ПО ОДНОЙ ДЛЯ КАЖДОЙ ФИГУРЫ)
 2. МОДЕЛЬ ПЕРЕСЕЧЕНИЯ
 3. МОДЕЛЬ ВНЕШНОСТИ
 4. МОДЕЛЬ ВНУТРЕННОСТИ.
 
 
      МОДЕЛЬ КРУГА:
 
MODEL CIRCLE( REAL X,Y,R; - ТЕКУЩИЕ КООРДИНАТЫ И R-ФУНКЦИЯ
              REAL XC,YC,RADIUS; - КООРД. ЦЕНТРА И РАДИУС
              REAL W;
              LET W=RADIUS*RADIUS-SQR(X-XC)-SQR(Y-YC);
              MODULE UNEG IN W OUT R;
             );
SAVE CIRCLE;
 
 
      ДЛЯ ОПРЕДЕЛЕНИЯ UNEG ИСПОЛЬЗОВАН СВОЙ  МОДУЛЬ.  MOДЕЛЬ
 ПЕРЕСЕЧЕНИЯ ОФОРМЛЯЕМ В ВИДЕ МАКРООПРЕДЕЛЕНИЯ:
 
       MACRO
&N &&ПЕРЕСЕЧЕНИЕ ОБЛАСТЕЙ [[ &F ],] ;

                               4
 
 
 
       MBEGIN
MODEL &N (
          REAL R,X,Y;
 .FOR 1
          MODEL &F IS &F;
          LET &F.X=X;
          LET &F.Y=Y;
 .NEXT 1
          R=
 .FOR 1
            &F.R +
 .NEXT 1
 .CANCEL*
          ;
         );
       MEND
 
 
      АНАЛОГИЧНО ОФОРМЛЯЕМ МОДЕЛИ ОБЬЕДИНЕНИЯ,  ВНЕШНОСТИ  И
 ВНУТРЕННОСТИ. ВСЕ ЭТИ ( И ДРУГИЕ НЕОБХОДИМЫЕ ) МАКРООПРЕДЕ-
 ЛЕНИЯ НАХОДЯТСЯ В ФАЙЛЕ AREAS2.KMG
      ИТАК, СОСТАВЛЯЕМ  ПОСТАНОВКУ  ЗАДАЧИ  ДЛЯ  ОПРЕДЕЛЕНИЯ
 ПЛОЩАДИ ЗАШТРИХОВАННОЙ ФИГУРЫ НА РИС. 3:
 
USE AREAS2;
A ВНУТРЕННОСТЬ ФИГУРЫ CIRCLE RADIUS=2.0 ,
                             XC=(-0.8) ,
                             YC=0.0 ;
B ВНУТРЕННОСТЬ ФИГУРЫ CIRCLE RADIUS=2.0 ,
                             XC=0.8 ,
                             YC=0.0 ;
C ВНЕШНОСТЬ ФИГУРЫ CIRCLE RADIUS=3.0 ,
                          XC=0.0 ,
                          YC=(-1.0) ;
D ВНУТРЕННОСТЬ ФИГУРЫ BOX SIDE=1.0 , X=10.0 ,
                          Y=(-2.0) ;
E ПЕРЕСЕЧЕНИЕ ОБЛАСТЕЙ A , B , C ;
S ОБЬЕДИНЕНИЕ ОБЛАСТЕЙ E , D ;
НАЙТИ ПЛОЩАДЬ S;
 
 
      ОСТАЛОСЬ ТОЛЬКО ПОЛУЧИТЬ МАКРООПРЕДЕЛЕНИЕ "НАЙТИ  ПЛО-
 ЩАДЬ". ОНО СДЕЛАНО ТАК ЖЕ , КАК И МАКРООПРЕДЕЛЕНИЕ  "ВЫЧИС-
 ЛИТЬ" ИЗ ПРЕДЫДУЩЕЙ РАБОТЫ, НО ДОПОЛНИТЕЛЬНО СОДЕРЖИТ:
 - ПРОЦЕДУРУ UNEG;
 - ОФОРМЛЕННЫЙ В ВИДЕ ФРАГМЕНТА ПРОГРАММЫ НА  PASCALЕ  АЛГО-
 РИТМ БРОСАНИЯ ТОЧКИ В КВАДРАТ;
 - ДАТЧИК СЛУЧАЙНЫХ ЧИСЕЛ.
 
 
      А ЧТО ЕЩЕ ЗА КОНСТРУКЦИЯ "USE AREAS2" В НАЧАЛЕ  ЗАДАЧИ
 ? СОГЛАСНО ОПИСАНИЮ ОПЕРАТОРА USE  И  ДОКУМЕНТАЦИИ  ПО  FPS
 (ФАЙЛ FPS.DPR И МЕТОДИЧКА В МАШИННОМ  ЗАЛЕ)  ЭТОТ  ОПЕРАТОР
 ВКЛЮЧАЕТ В МОДЕЛЬ ЗАДАЧИ КАКИЕ-ТО МОДЕЛИ И ПЕРЕМЕННЫЕ.  ЭТИ
 СЛУЖЕБНЫЕ МОДЕЛИ И ПЕРЕМЕННЫЕ ИСПОЛЬЗУЮТСЯ В МАКРООПРЕДЕЛЕ-
 НИИ "НАЙТИ ПЛОЩАДЬ". ДЛЯ НАС ИНТЕРЕСНЫ  ЛИШЬ  СЛЕДУЮЩИЕ  ИЗ
 НИХ:

                               5
 
 
 
      1. REAL SPACESIDE - СТОРОНА КВАДРАТА С ЦЕНТРОМ В НАЧА-
 ЛЕ КООРДИНАТ, КУДА БРОСАЕМ ТОЧКИ. ЭТОТ КВАДРАТ  ДОЛЖЕН  СО-
 ДЕРЖАТЬ ВСЕ РАССМАТРИВАЕМЫЕ ФИГУРЫ. ЗНАЧЕНИЕ  ПО  УМОЛЧАНИЮ
 SPACESIDE=10.0
      2. INTEGER NTRIES - ОБЩЕЕ ЧИСЛО БРОСКОВ, ПО  УМОЛЧАНИЮ
 200
 
 
      КАК ОБЫЧНО, ВАМ  ПРЕДЛАГАЮТСЯ  ЗАДАНИЯ,  ЛИТЕРАТУРА  И
 ВОПРОСЫ. РАБОТАТЬ В КАТАЛОГЕ [70,7]  ,  ПАРОЛЬ  FPS  .  ДЛЯ
 ТРАНСЛЯЦИИ МОДЕЛЕЙ ПРОСТЫХ ФИГУР ПРИМЕНЯЙТЕ КОМАНДУ @FPSB .
 СПИСОК ОТТРАНСЛИРОВАННЫХ МОДЕЛЕЙ СМОТРИМ ПО КОМАНДЕ @MODELS
 . СОБСТВЕННУЮ МАКРОТЕКУ МОЖНО УКАЗАТЬ ЧЕРЕЗ  ЗАПЯТУЮ  ПОСЛЕ
 AREAS2.KMG В ОТВЕТЕ НА ЗАПРОС КОМАНДЫ @FULLRUN .
 
 
                      ВАРИАНТЫ ЗАДАНИЙ
                  К ЛАБОРАТОРНОЙ РАБОТЕ N 3
 
 
      1. СОЗДАТЬ МОДЕЛЬ ПРОСТОЙ ФИГУРЫ КВАДРАТ
      2. МОДЕЛЬ ЭЛЛИПСА
      3. РАВНОСТОРОННИЙ ТРЕУГОЛЬНИК
      4. ПРЯМОУГОЛЬНИК. ПО  УМОЛЧАНИЮ  СТОРОНЫ  ДОЛЖНЫ  БЫТЬ
 РАВНЫ
      5. НАЙТИ ПЛОЩАДЬ КВАДРАТА 20 НА 20
      6. НАЙТИ ПЛОЩАДЬ ЭЛЛИПСА С ПОЛУОСЯМИ 20 И 60
      7. НАЙТИ ПЛОЩАДЬ ПРЯМОУГОЛЬНИКА 40 НА 60
      8. НАЙТИ ПЛОЩАДЬ ЗАШТРИХОВАННОЙ ФИГУРЫ (ТОЧНЫЕ РАЗМЕРЫ
 И ТОЧНОЕ РАСПОЛОЖЕНИЕ КРУГОВ - ПО ВАШЕМУ ВЫБОРУ):
 
 
 
 
 
 
 
 
 
 
        ********************************************
        *   ОСТАЛЬНЫЕ ЗАДАНИЯ - АНАЛОГИЧНО N 8     *
        ********************************************
 
 
                КОНТРОЛЬНЫЕ ВОПРОСЫ К ЗАЧЕТУ
                 ПО ЛАБОРАТОРНОЙ РАБОТЕ N 3
 
 
      1. ЕЩЕ ПРОЩЕ НАРИСОВАТЬ ФИГУРУ НА МИЛИМЕТРОВКЕ И  ПОС-
 ЧИТАТЬ ЧИСЛО КЛЕТОЧЕК. СРАВНИТЬ ЭТОТ МЕТОД ВЫЧИСЛЕНИЯ  ПЛО-
 ЩАДЕЙ С НАШИМ И С ПРИМЕНЯЕМЫМ НА ЗАВОДЕ ПО ВСЕМ ПАРАМЕТРАМ:
 ТОЧНОСТЬ,  СКОРОСТЬ,  ПРОСТОТА,  КВАЛИФИКАЦИЯ  ИСПОЛНИТЕЛЯ,
 ТРЕБУЕМЫЕ РЕСУРСЫ И Т. П.
      2. ПОЧЕМУ ПОНЯТИЕ "ПЕРЕСЕЧЕНИЕ" ОФОРМЛЕНО КАК МАКРООП-
 РЕДЕЛЕНИЕ, А НЕ КАК МОДЕЛЬ FPS ?
      3. ОБЬЯСНИТЕ, КАК РАБОТАЕТ МАКРООПРЕДЕЛЕНИЕ  "ВНУТРЕН-

                               6
 
 
 
 НОСТЬ"
      4. МЫ ПОСТРОИЛИ НЕКОТОРЫЙ ЯЗЫК. КАКИЕ ДВА  НОВЫХ  ТИПА
 ДАННЫХ МЫ НЕЯВНО ВВЕЛИ В ОБРАЩЕНИЕ В ТОМ ЯЗЫКЕ  ?  ЯВЛЯЮТСЯ
 ЛИ ЭТИ ТИПЫ ДАННЫХ СОВМЕСТИМЫМИ ПО КОНТЕКСТУ ?
      5. ЧТО ТАКОЕ МЕТОДЫ МОНТЕ-КАРЛО  ?  КАКИЕ  ЕЩЕ  ЗАДАЧИ
 МОЖНО РЕШАТЬ ЭТИМИ МЕТОДАМИ ?
      6. КАК РАБОТАЕТ ДАТЧИК СЛУЧАНЫХ ЧИСЕЛ ?
      7. И ЕЩЕ ОДИН СПОСОБ РЕШЕНИЯ ЗАДАЧИ: ВЕРНЕМСЯ К ВОПРО-
 СУ 1. РАЗБИЕНИЕ НА КЛЕТОЧКИ МОЖНО ПРОМОДЕЛИРОВАТЬ  НА  ЭВМ.
 ПОКАЗАТЬ, ЧТО НА ЭВМ ЭТОТ МЕТОД ХУЖЕ НАШЕГО.
      8. СЛЕДУЕТ ЛИ РЕКОМЕНДОВАТЬ К ПРИМЕНЕНИЮ  НА  ПРАКТИКЕ
 ПОСТРОЕННЫЙ НАМИ ППП ?
      9. ЧЕМ ОТЛИЧАЕТСЯ ПОНЯТИЕ ППП  ОТ  ПОНЯТИЯ  БИБЛИОТЕКИ
 СТАНДАРТНЫХ ПРОГРАММ ?
 
 
            ЛИТЕРАТУРА К ЛАБОРАТОРНОЙ РАБОТЕ N 3
 
 
      1.   Э.Х.ТЫУГУ.-   КОНЦЕПТУАЛЬНОЕ   ПРОГРАММИРОВАНИЕ.-
 M,1984, СТР. 50-194
      2. И.М.СОБОЛЬ.- МЕТОД МОНТЕ-КАРЛО. - M,1982
      3. С.M.ЕРМАКОВ - МЕТОД МОНТЕ-КАРЛО И СМЕЖНЫЕ  ВОПРОСЫ.
 -M,1971
 