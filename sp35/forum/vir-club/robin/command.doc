		Описание работы вакцинированного 
		       COMMAND.COM'a
		             и
	    некоторые соображения о компьютерных вирусах.


	Вы наверняка слышали, и скорее всего сталкивались с
компьютерными вирусами. Но зачастую  пользователи относятся к ним с
недопониманием. Недооценивая или переоценивая воздействие вирусов на
ЭВМ. Поскольку компьютерные вирусы во многом напоминают
биологические, то можно провести некоторую аналогию с отношением
людей к СПИДУ . Потенциально его боятся все, но рассмотрим два
крайних проявления поведения. 

	Вариант первый - недооценка. Некто рассуждает: "Чему быть
того не миновать. Это у них там, у загнивающих наркоманов. Меня это
не касается. А если вдруг такое случится и я умру, будет что
вспомнить". И продолжает спать, как и раньше, с кем попало, забывая,
что в случае смерти, вспоминать будет нечем.

	Вариант второй - переоценка. Действия такие - забывает свои
желания, старается провести некую хирургическую операцию, которая
позволит эффективно справиться с предыдущим действием. Сидит дома,
никуда не выходит, ни с кем не знакомится, ни кого не зовет в гости,
боится даже посмотреть какую-нибудь "Эммануель - 9.5" по видушке.
Вообще, лишается последних удовольствий.

	А ведь можно и первому, и второму пользоваться простым
презервативом и жить в большей безопасности, не ударяясь в крайности.

	Но вернемся к вирусам компьютерным. 
	
	Вариант недооценки. У некоего пользователя есть SCAN и
AIDSTEST и он чувствует себя в ПОЛНОЙ (!!!) безопасности. Даже не
запуская их. Или более того, доходит до абсурдов. У него AIDSTEST
стоит в AUTOEXEC.BAT'e. И при каждой загрузке Лозинский находит у
него какой-нибудь вирус. Действия пользователя - никаких!!!. Это
быль. Когда вирус ему форматирует винчестер, он (пользователь)
достает архивные дискеты (если есть) и в очередной раз, всего за 1
(один) день сливает все на винчестер. Благо программы ворованные, и
пользователю  кажется, что прямого ущерба он не несет.

	Вариант переоценки. На ВЦ вводится режим самоизоляции с
военным положением с президентским правлением. Создается комитет
ВЦанального спасения во главе с парторгом. На человека с дискетой
смотрят как на человека с ружьем. Слово "игра" ассоциируется со
словом "смерть" и т.п. Знакомая ситуация, не правда ли? И тем не
менее, на таком ВЦ, вирусов бывает не меньше, чем и у пользователя с
недооценкой. Хотя бы из-за того, что к ним реже попадают новые
антивирусы (у них уже есть AIDSTEST 26). А главное, к ним в принципе
не попадает информация о компьютерах вообще и о вирусах в частности,
например Софтпанорама. Последствия от вирусов на таком ВЦ еще
страшнее. То есть, если на экране осыпаются буквы, винчестер
форматируется самим парторгом со своей программой.

	Вообще, много проблем из-за вирусов возникает только от
недопонимания ситуации пользователем и незнания методов и средств
защиты от них. И это несмотря на все увеличивающееся количество
толковых публикаций и работ по этой теме. Имеются ввиду работы
Безрукова, Касперского, Лозинского, Сусликова и других вирусологов.
"Сенсационные" околокомпьютерные публикации  в некоторых массовых
изданий рекомендуется "изучать" по принципу "прочти и забудь".

	Естественно, у большинства пользователей нет ни малейшего
желания и времени изучать тонкости работы вирусов и других гадостей.
Но некоторый необходимый минимум надо знать. И как при работе с АРМ
"Бухгалтера" не мешает знание команды DIR операционной системы, так
не будет помехой знание основных правил компьютерной гигиены и
применения антивирусных программ.

	Кстати, знаете ли Вы, какие бывают защиты? На какие виды они
подразделяются и чем отличаются? Какой уровень эффективности защиты
они имеют и для чего они нужны?

	Подробно эти вопросы освещаются в работах вышеперечисленных
вирусологов и повторять их просто не имеет смысла. Проще взять эти
работы с самому на досуге немного почитать. А сейчас можно привести
пример типичного диалога г.Юзеровского с г.Хакеровским.

	Юзеровский.   - Здравствуйте, г.Хакеровский!
	Хакеровский. (шутит)  - Welcome to DOS! г.Юзеровский!
	Ю. - У меня тут есть проблемы...
	Х. - С чем? 
	Ю. - Да, кажется, вирусы.
	Х. - С чего Вы взяли?
	Ю. - Да, нажимаю Ctrl-Alt-Del музыка играет. Паганини, 24-й каприс
	Х. - На FoxBase не похоже. А вы проверяли компьютер?
	Ю. - Проверял.
	Х. - Чем?
	Ю. - Как обычно, SCAN, AIDSTEST.
	Х. - Ну и как?
	Ю. - Как обычно, SCAN нашел Голландскую девочку...
	Х. - В TALKER'e?
	Ю. - Ага.
	Х.(в сторону) - SCAN'у верить - себя не уважать.
	Ю.(продолжает) -... а AIDSTEST сказал все чисто.
	Х. - AIDSTEST какой?
	Ю. - "Сотка"
	Х. - Ну, хорошо. А взглянуть на компьютер можно?
	Ю. - У нас вообще-то вход по пропускам, формы допуска, сам знаешь...
	Х. - Отлично. Когда ваша программа управлением ракет в безвоздушном
	     пространстве запоет, я думаю, проблемы с пропуском
	     разрешатся сами собой.
	     

Через 3 дня.
	     
	Ю. - Здравствуйте, г.Хакеровский!
	Х.(шутит)  - Welcome to DOS! г.Юзеровский!
	Ю. - У меня тут есть проблемы...
	Х. - Все те же?
	Ю.(космополитствует) - Yes, it is.
	Х. - Пропуск с собой?
	Ю. - Да.
	Х. - Let's go!
	

На ВЦ.

	Х. - А вы не обратили внимание что у вас COMMAND.COM длиной 26971?
	Ю. - Ну и что?
	Х. - Да ничего. Просто стандартная длина 25307. 
	Ю. - А что это значит?
	Х. - Вообще-то вирус.
	Ю. - А почему ты начал смотреть именно COMMAND.COM?
	X. - Потому что это командный процессор. Он обрабатывает все
	     вводимые тобой команды. Т.е. при каждом DIR'e или DIGGER'e 
	     из Нортона вначале запускается COMMAND.COM, который и выполняет 
	     DIR или DIGGER. Поэтому его вирусы очень любят, и стараются
	     первым делом сесть на него. Вот почему COMMAND.COM лучше
	     держать на виртуальном диске. Винчестер меньше дергается,
	     быстрее происходит загрузка, и если вдруг COMMAND.COM заразится,
	     то при выключении он просто сотрется и не будет заражать
             программы при последующей перезагрузке. 
	Ю. - А как сделать виртуальный диск?
	Х. - В файл CONFIG.SYS вставь строку DEVICE=VDISK.SYS 30. 
	     если в твоем компьютере есть расширенная память, то
	     лучше в эту строку добавь /E, чтобы виртуальный диск создавался
	     в расширенном ОЗУ. А в файл AUTOEXEC.BAT вставь строки...
	     У тебя винчестер разбит на сколько дисков?
	Ю. - На два - C: и D:
	X. - Значит VDISK сделает виртуальный диск E:
	     Тогда строки будет выглядеть следующим образом
	     copy c:command.com е:\
	     set comspec=e:\command.com
	     т.е. мы копируем COMMAND.COM на виртуальный диск, и сообщаем
	     DOS, что активный командный процессор, будет на диске E:
	X.(делает COMMAND.COM'у  F3 из Norton Commander'а)
	X. - Видишь надписи "Full moon tonight"  и др. Это вирус.
	Ю.(в панике) - Что же делать?!
	Х. - Для начала перегрузимся с дистрибутивной чистой
	     заклееной системной дискеты. Есть у тебя такая? 
	Ю. - Есть!
	Х. - Слава Богу! AFD или DEBUG есть?
	Ю. - А что это?
	Х. - Отладчики.
	Ю. - DEBUG, кажется, есть.
	Х. - Перепишешь у меня AFD  и сохрани. Пригодится. TASM есть?
	Ю. - А это что?
	Х. - Турбоассемблер.
	Ю. - Кажется, где-то валяется.
	Х. - Ворованный?
	Ю. - Ну как тебе сказать...
	Х. - Все понятно. Надо купить. Сейчас в Москве появилась
	     ассоциация борландовская. У них и узнай насчет покупки.
	     А я буду приходить к тебе компилироваться на законной
	     версии, пока не разбогатею и сам не куплю.
	Ю. - Этот вопрос не ко мне.
	Х. - Ладно, теперь пойди перекури. Я тут немного покопаюсь.
	

Через некоторое время.

	Х. - Все в порядке. Вирус несложный, Лечится очень просто.
	Если у Вас нет подходящего фага, в каком-нибудь отладчике перепишите
	три байта, которые находятся перед байтами 0D и 0A и словом "Full" в
	начало Вашей программы, вместо JMP'a на тело вируса.  Запишите
	программу длиной равной CX-67Fh байт.
	Ю. - Для меня это темный лес. Что мне с ним делать?
	Х. - Я тут набросал маленький фаг от него. Правда, он лечит
	     только в текущей директории. Но как скорая помощь, пока не 
	     появится соответствующая версия AIDSTEST'a, пойдет. Сейчас мы 
	     им вылечим твои программы, а вообще-то, ты отнесись к этой
	     проблеме посерьезнее.
	Ю.(философски) - Гром не грянет, мужик не перекрестится. Кстати,
	ты какое-то слово, очень похожее на неприличное, сказал?
	Х. - "Фаг"?. "Г" в конце.
	Ю. - А это что?
	Х. - Фаг - это антивирусная программа, которая лечит от вирусов.
	     Определяет наличие вируса в программе и "выкусывает" его.
	Ю. - Это типа AIDSTEST'a?
	Х. - Соображаешь! ADSTEST - классический фаг. Помнишь, у него
	     флаг /f, как раз и предназначен для лечения. А если этот
	     флаг не указывать, то он просто ищет вирусы в программе.
	Ю. - Как SCAN?
	Х. - Да. Кстати, такие программы называются детекторы. Т.е. они 
	     только обнаруживают вирусы.
	Ю.(пародируя Кинчева [не путать с Бончевым!]) - Ух, как интересно!
	     А какие еще есть фаги и детекторы, кроме AIDSTEST'a и SCAN'a?
	Х. - Много. Назову лишь некоторые. SOS, LD Е.Сусликова (Кемерово) 
	     -V Е.Касперского (Москва), VL, VR А.Шеховцова (Киев) и много
	     других.
	Ю. - И где это все взять?
	Х. - См. Софтпанораму.
	Ю. - А какие еще защиты бывают?
	Х. - Ревизоры, вакцины, сторожа и т.д. и т.п.
	Ю. - А это что? Почему их так много? У меня уже крыша поехала!
	Х. - Почему их так много? Потому что, универсальной защиты от
	     вирусов не бывает, и в принципе быть не может . Кроме, 
	     как в рекламах недобросовестных контор, спекулирующих на 
	     вирусной тематике. Но это либо прохвосты, либо наивные дурачки.
	Ю.(задумчиво) - А почему не может быть универсальной защиты?
	Х.(убедительно) - Это особый вопрос. Сейчас поверь мне на слово. 
	     А если тебе это интересно - почитай Софтпанораму.
	Ю. - Ну ладно. Расскажи, пожалуйста, о защитах подробнее.
	Х.(назидательно) - Как я уже говорил, программные защиты бывают 
	     нескольких видов. Например, ревизоры. Это программы, которые
	     следят за состоянием диска, изменениями произошедшими с 
	     программами, системными областями, типа FAT, boot-сектор,
	     Master boot record ... 
	Ю.(в сторону) - не знаю, что это такое, но интересно!
	Х.(продолжает) - ... контрольными суммами и т.п. 
	Ю. - А пример таких программ, ты можешь привести?
	Х. - Я, например, пользуюсь ревизором Д. Мостового и В. Ладыгина
	     "Dinf". Тем более, что ревизоры полезны еще, кроме
	     защиты от вирусов, тем, что проще отслеживать изменения в
	     версиях программ, которые сам пишешь.
	Ю. - А где его взять?
	Х.(отрывисто) - Софтпанорама.
	Ю. - Что еще?
	Х. - Сторожа. Т.е. программы, которые постоянно "сидят" в памяти
	     компьютера, и отслеживают, опасные действия программ. 
	     Некоторые из них, следят за конкретными вирусами. (Например,
	     хорошо тебе известный ANT4US2. Другие программы 
	     -D(-D3) Касперского, MVT М.Купчса (Рига) и др.
	Ю.(кратко) - Софтпанорама?
	Х.(кратко) - Софтпанорама.
	Ю. - А эти, как их, вакцины?
	Х. - А вакцины, имитируют действие вируса. И когда вирус пытается
	     навредить, он считает, что программа или память уже заражены,
	     им, обижается и прекращает свою работу.
	     Например, VitaminB A.Сессы из Днепропетровска
	     "заражает" собой загрузочный (boot) сектор дискеты, и
	     когда на нее садится вирус, например, Stoned, эта
             вакцина прекращает работу и дальнейшее распространение вируса.
	     В условиях "персонального компьютера общего пользования"
	     такая вакцина просто необходима. Есть другие программы NeatVac
	     В. Пономаренко (Киев) и т.д. 
	Ю. - Неужели и это в Софтпанораме?
	Х. - А как ты догадался?
	Ю. - Всего так много. Чем конкретно мне лучше пользоваться?
	Х. - Определенного ответа, на этот вопрос нет. Попробуй несколько
	     программ. Выбери те, которые понравятся. Тем более, что для 
	     антивируса большое значение имеет, кроме количества 
	     отлавливаемых вирусов, количество ложных срабатываний, количество
	     пропускаемых вирусов. В этом отношении пресловутый SCAN является
	     весьма ненадежным. Для сравнения, я проводил соревнования между
	     AIDSTEST'ом и SCAN'ом. В коллекции из 16 вирусов AIDSTEST
	     нашел 13 вирусов, а SCAN всего 9. И это не учитывая ложных
	     срабатываний SCAN'a. 
	     Вообще фаги и детекторы стоят на последнем месте в
	     защите от вирусов. Они уже только обнаруживают зараженные
	     программы. Фаги еще пытаются лечить, что не всегда возможно
	     корректно. Т.е. они борются с плесенью, а не с сыростью.
	     Чего стоит фаг на 300 вирусов, если винчестер Вам угробит 
	     301-й вирус!
	     Основной упор должен делаться на профилактику. Т.е. на сторожа,
	     вакцины и т.д.
	     Кстати, я недавно начал пользоваться одной разработкой 
	     небезизвестного тебе В. Рабиновича из Харькова. Он
	     подписывает свои программы "Robin". Видел наверное? 
	Ю.(удивленно) - Нет.
	Х.(твердо) - Еще увидишь.
	Ю. - А что за разработка?
	Х. - Он для стандартного COMMAND.COM'a написал маленькую вакцинку,
	     которая при каждом запуске COMMAND.COM'a, проверяет COMMAND.COM,
	     его длину, контрольную сумму и т.д. И если какой-нибудь вирус
	     сядет на COMMAND.COM, он тебе сразу сообщит в рамочке со
	     свистом о своей поломке или неправильной длине. После этого 
	     он спросит продолжать работу или нет. Ответь "N", перегрузись
	     с чистой дискеты, и попробуй разобраться, что это было.
	     Запусти какой-нибудь фаг или детектор. Если они ничего,
	     не обнаружат, а такое будет продолжаться, зови кого-нибудь
	     из знающих людей, меня, например, или того же, Robin'а.
	Ю. - А как к нему обратиться?
	Х. - Его адрес: 310058, Харьков, ул. Данилевского, 10, кв. 136
	     телефон:   (0572) 43-82-22
	Ю. - А что ты еще можешь рассказать об этой разработке?
	Х. - Этот COMMAND.COM реагирует практически на любой
	     вирус который заражает COMMAND.COM. Т.е. ему не важно, 
	     известный это вирус или новый...
	Ю.(перебивая) - Так что, это универсальная защита? 
	Х.(с усмешкой) - Нет, конечно. Повторю, еще раз - универсальной
	     защиты нет, и быть не может. Но этот COMMAND.COM позволит
	     тебе сразу остановить заражение вирусом, свести потери к
	     минимуму.
	Ю. - Но если он каждый раз сам себя проверяет, это наверно долго?
	Х.(усмехаясь) - Очень долго. Аж где-то пол-секунды на XTишке.
	Ю. - А как я смогу узнать зараженный у меня COMMAND.COM или нет
	     визуально? У него, наверно, другая длина?
	Х. - Длина у вакцинированного COMMAND.COM'a осталась прежней 25308.
	     Хотя считается, что стандартная длина 25307, но он брал
	     COMMAND.COM с дистрибутивной дискеты, а там он был длиной
	     25308 байт. Этот COMMAND.COM родной, Microsoft'овский.
	     Вакцина находится внутри него, не меняя длину.
	Ю. - Есть еще у него какие-нибудь особенности?
	Х. - Когда ты перепишешь этот COMMAND.COM на диск, и он начнет
	     работать, у тебя постоянно будет появляться надпись 
	     "Robin, JNP club". Это метка запуска COMMAND.COM'а. В начале
	     это немного раздражает, но потом привыкаешь. Тем более, что
	     благодаря этому можно отслеживать запуски COMMAND.COM'а.
	     И ты заметишь, как часто он работает, и поймешь почему
	     вирусы так его любят. Более того, предположим, что появился
	     вирус, который как-то хитро убивает COMMAND.COM, и отсутствие
	     этого сообщения, тоже должно настораживать.
	Ю. - Так а как он лечит?
	Х. - Да не лечит он ничего! Он как пожарная сигнализация - сигнализи-
	     рует о пожаре, а не тушит его. А лечить надо AIDSTEST'ом.
	     Во всяком случае, пользуясь программой PROTECT Д.Гуртяка
	     из Донецка, которая защищает диск от записи, и COMMAND.COM'om
	     Рабиновича я чувствую себя в большей безопасности.
	Ю. - Да, я обязательно установлю себе этот COMMAND.COM!
	Х. - И в заключение, хочу сказать, что хоть этот COMMAND.COM,
	     существует недавно, но уже успел доказать свою практическую
	     состоятельность, и остановил размножение нескольких вирусов.
	     Ну, все, мне пора. Я пошел. Пока!
	Ю. - Пока! Спасибо за консультацию!
	Х. - Будут проблемы звони! Телефон помнишь.
	

	Харьков, 17-Apr-91			Рабинович В.М.	
						(Robin)
___________________________________________________________________________
