
  10/04/91

          Уважаемый редактор "Софтпанорамы" !


       Представляю Вашему вниманию небольшую утилиту для работы  с ин-
  терфейсом Турбо Паскаля v6.0. Что касается формата вызова и прочего,
  то это можно найти в файле ITPU.DOC. Здесь же мне бы  хотелось поде-
  литься некоторыми соображениями и планами.
       Во-первых, я прекрасно понимаю, что сама по себе эта утилита не
  особенно-то и нужна пользователю, важно лишь то, что  теперь  формат
  TPU стал секретом полишенеля (естественно, до  очередного  изменения
  его Борландом - будем надеяться, не скорого). Поэтому  считаю нужным
  объяснить, что при известном интересе и поддержке  в  массах  должна
  появиться версия 'viewer' для NC. А с самыми любопытными и настойчи-
  выми, при определенной степени материальной  заинтересованности, ве-
  роятно, смогу поделиться ноу-хау.
       Пока же предлагаю Вашему бюллетеню  распространение  этой прог-
  раммы на принципах SHAREWARE (но уж никак не УБПП, на мой  взгляд, у
  названий УБПП и ГКЧП есть что-то родственное), на общих основаниях.

       Хотелось бы сразу предупредить напрашивающиеся  вопросы относи-
  тельно недостатков, поэтому я выделил некоторые из них:

    1. Некорректно  выводится  структура   записи   с   использованием
       case-объединений. Это связано с чисто техническими затруднения-
       ми, но в принципе разрешимо, за исключением  вложенных case-по-
       лей - тут немного сложнее.

    2. Пока  что  отсутствуют  значения  инициализированных  констант.
       Сложности с вложенными записями, и т.д.

    3. Порядок следования определения типов, констант и т.п. не всегда
       правильный с точки зрения семантики Паскаля. Это принципиальная
       проблема (и, похоже, непреодолимая), потому что в TPU все иден-
       тификаторы записаны совсем не в  том  порядке,  в  котором  они
       встречались в исходном тексте, а в удобном для компилятора. Для
       минимального удобства чтения полученных файлов  я  сгруппировал
       их по Паскалевским разделам const, type, var и т.д.

    4. Не осуществляется wrapping длинных строк. Это временно.

    5. Не везде в определении процедур  (функций)  имеются  имена фор-
       мальных параметров. Это зависит от состояния опции $L  при ком-
       пиляции данного модуля (включение отладочной информации  по ло-
       кальному контексту). Если опция была включена (и  процедура  не
       является external), то имена параметров будут присутствовать.

    6. Самые любопытные, возможно, попробуют ковырнуть SYSTEM.TPU. Что
       ж, и это возможно, однако, информация о generic  ("родных") ти-
       пах Турбо Паскаля будет иметь довольно глупый вид, типа Longint
       = Longint. Кроме того, все системные функции и  макросы  вообще
       не имеют никакой информации, кроме типа, поэтому они помещаются
       в раздел "generic" и никакой ценной информации не дают.

       Мне бы хотелось узнать различные мнения по данному вопросу, по-
  этому все предложения, дополнения и прочее можно направлять  по ука-
  занному адресу.



                             С искренним уважением, - Данилов О.В.
