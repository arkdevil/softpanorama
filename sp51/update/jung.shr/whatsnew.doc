
     WHATSNEW.DOC                                           August 1992


     This lists the user visible changes to ARJ since ARJ 2.30.

     ARJ 2.39

     Speeded up compression and extraction especially on diskettes and
	uncached disk drives.
     By default, ARJ will not allow updates of multiple volume archives
        unless the "u" modifier of the "-v" switch is specified because
        multiple volume updates are NOT supported.
     Added the feature of setting the correct file date-time stamp when
        using the ARJ "p" command as in ARJ p archive name | LIST /s.
     Added delete permission prompt to ARJ e -d *.* usage.
     Added a default critical error handler.
     Added "-&1" to disable any critical error handler.
     Added "-hcDOS_COMMAND" option for executing DOS command at start of ARJ.
     Added "-he" option to abort when processing an ARJ-SECURED archive.
     Added "-hi" option to put more detail in the "-ji" index file.
     Added "-hs" option to disable file sharing code.
     Added "-hw" options to provide various display options for "ARJ w".
     Added "-ja1" option to inhibit the display of the archive comment.
     Added "-jn" option to facilitate restarting multiple volumes by using
	the information from the index file.
     Added "-od" option to select files 0 to N days old.
     Added bar and percentage display ("-i2" option).
     Added "r" modifier to "-v" switch to allow the reservation of space on
	the first volume.
     Added "-x-" support so that ARJ resets exclude list when it sees the
	"-x-".
     Added "Out of near memory" error message.
     Added feature to check for device driver filenames except for "-jw".
     Changed ARJ to always prompt for a diskette volume unless disabled
        by "-jyv" even if "y" is specified.
     Changed the -jy switch processing to toggle like other ARJ switches.
     Added a warning when work disk is too small to make volume.
     Added check for error writing to stdout.
     Added "Replacing" message when adding a file to an archive which
        already contains such a file.
     Shortened the "CRC OK" message to "OK".
     Removed auto Huffman setting as it did not do much in practical use.
     Removed [YNAQ] messages.
     Added intermediate "OK to extract to a new filename?" prompt.
     Changed the backup feature to mark only non-backup files.
     Changed the "-v" option to accept its modifiers in any order.
     Changed the "always" response to yes/no queries to "always", "skip",
	and "global".
     Changed the "quit" response to generate an error for both ARJ and
	ARJSFX.
     Removed the "end of file" error message when using the "-jr" option
	on an undamaged ARJ archive.
     Removed the ":" from the index file "-ji" header.
     Removed "CRC OK" messages during "ARJ w" command to simplify output.
     Improved the error message when extracting with the wrong password.
     Used MS-DOS/BIOS calls to handle cgets/cputs/getch, etc.
     Improved allocation of i/o buffer space.
     Changed ARJSFX to NOT prompt for "Continue extraction" when "-e" or
        "-x" has been specified.
     Changed ARJSFXJR to distinguish between true errors and skipping of
        files that already exist.
     Added CTL Break checking to ARJSFXJR (-je1).
     Added error checking of invalid switch options like -jm3.
     Added documentation briefly explaining ARJ error messages.

     Fixed reporting of errors during extraction to catch "Can't open"
        errors and other failures.
     Fixed rare volume overflow when using -m4.
     Fixed side effect modification of "-jq" option when using "-ju".
     Fixed -jt option when adding 0 files in a move command.
     Fixed ARJ to list filenames with embedded "%"s.
     Fixed ARJ to not modify version number in archive file headers.
     Fixed "-jp" to inhibit pauses when stdout is redirected.
     Fixed ARJ /? to inhibit pauses when "always" query chosen.
     Fixed problem of leftover ARJTEMP.$* files when processing wildcarded
	ARJ files.

     Removed support for the "w" command in DEARJ for program size reasons.

     Fixed REARJ "/f /d /u" option to work on updating a diskette archive.
     Corrected ARJ support in REARJ.CFG.


     ARJ 2.30

     Added "-t1g" to support text with graphics characters.
     Added [YNAQ] message to all query prompts.
     Changed the "Bad Huffman code" message to "Bad file data".
     Fixed a bug in ARJ w processing in very small files.
     Fixed a bug in -jt option with extraction on secured archives.
     Fixed the "-t1f" text file test algorithm.
     Fixed the "Can't delete directory" problem.
     Fixed DOS 2.11 file handling.


     ARJ 2.30 BETA_2

     Increased the -m1 (default) and the -m2 compression ratios.
     Decreased file sharing violations to a minimum even on deletes.
     Changed opening of input files to allow shared reading.
     Improved the compression speeds with -jm improving the most.
     Added support for concatenated switch options such as "-ri1".
     Added "-&" option to install a critical error handler.
     Added "-+" option to set the environment variable name.
     Added "-#" option to allow extraction by order number in archive.
     Added "-d" option to ARJ e and ARJ x commands to provide a "move
	file from archive" feature.
     Added "-t1g" support for text files with graphic characters.
     Modified text mode to re-archive the file when it is not text.
     Added directory delete support to ARJ m -a1 archive.
     Added removal of empty archive when deleting files.
     Added permission prompt when deleting "*.*" files from an archive.
     Added option to allow up to 1000 uniquely named multiple volumes.
     Added ARJ b command to execute DOS command on archive files.
     Added ARJ g command to garble an ungarbled archive.
     Added ARJ k command to purge archive files marked as backups.
     Added ARJ y command to copy archive with new options such as
	creating a self-extractor or setting the backup flag.
     Added "-g?" garble option to prompt for password with no echo.
     Added "w" modifier to "-v" option to inhibit splitting of files in
	multiple volume mode.
     Added option to allow the use of "-o" and "-ob" at the same time.
     Added documentation of "ARJ c file -zNUL" and "ARJ c file -jzNUL"
	methods of stripping of file comments.
     Added "-n" option support to ARJ "d" command to delete files in
	archive that do not exist on disk.
     Added "-n" option support to ARJ "l" command to display files in
	archive that do not exist on disk.
     Added "-jb" option to set the backup flag during adds and updates
	to backup files instead of overwriting them.
     Added "-jb1" option to reset the backup flag.
     Added "-jb2" option to unmark backup files.
     Added "-jb3" option to mark files as backup files.
     Added "-jc" option to allow ARJ to exit extraction when specified
	number of files has been extracted.
     Added "-jg" option to include selection of files marked as backup.
     Added "-jg1" option to select ONLY archive files marked as backup.
     Added "-ji" (index file) support to ARJ d, e, j, l, t, and w commands.
     Added "-jo" option to extraction to generate unique output filenames.
     Added "-jp" support to ARJ w command.
     Added page size support to "-jp" option.
     Added "-jq" option to supply command line parameters to ARJ w and b
	commands.
     Added "-jt" option support to extract type commands to allow
	extraction of files only after a successful test of the archive.
     Added "-jt1" option to ARJ t and ARJ modification commands to do an
	actual file compare along with a CRC check.
     Added "-jt2" option to ARJ modifications commands to do file compares
	only on added files while doing CRC checks on the rest.
     Added "+" miscellaneous option to ARJ_SW configuration file.
     Added "*" indicator to "l" display to indicate backup files.
     Added sequence number to "v" command display.
     Added backup flag and backup files message to end of "l" display.
     Added support for "-<switch>-" such as "-w-" for all switches.
     Added information to documentation on simple commands to delete
	archive comments.
     Modified ARJ to handle Bad Huffman codes without aborting.
     Changed the "Bad Huffman code" message to "Bad file data".
     Modified ARJ to delete extracted files with bad CRCs.
     Improved the compression of large ASCII type files.
     Removed base directory command line checking for certain commands.
     Changed calls to clock() (int 1AH) to gettime() (DOS 2CH).
     Speeded up file position seeking when archiving multiple volume
	archives with large input files.
     Improved the ARJ documentation.
     Added control break handling to single character input mode.

     Removed superfluous repetitive display blocks with the "-i1" option.
     Fixed problem with "ARJ u -e1" command where basedir has drive and/or
	root.
     Fixed extraneous size display when storing directories.
     Fixed TEXT mode filesize test where CTLZ is in first 4K bytes.
     Made failure to set a volume label return an error.
     Fixed rare situation during break handling where original archive
	could be deleted.
     Improved error messages and error processing in ARJSFXJR module.
     Fixed ARJSFX and ARJSFXJR to contain identification string "aRJsfX"
	as documented so that 3rd party programs can discern ARJ SFXes.


     ARJ 2.22

     This is a fix release for MS-DOS compatibility issues.
     Removed use of clock() [int 1AH].
     Removed use of int 1AH in C0.ASM.
     Removed use of setcbrk() and getcbrk().


     ARJ 2.21a

     ** IMPORTANT NEWS ****************************************************

	ARJ 2.21 does NOT correctly garble (-g option) stored (-m0)
	files larger than 32767 bytes.	ARJed GIFs and archives may have
	this problem, since ARJ reverts to storing when unable to
	compress the file.  Archived files with this problem will
	test/extract with a CRC error.	ARJ 2.21a has an option "-h+" to
	correctly extract such files.

     **********************************************************************

     Fixed garble bug with stored files larger than 32767 bytes.
     Fixed slight inefficiency when extracting stored files.


     ARJ 2.21

     ** IMPORTANT NEWS ****************************************************

	On a very small number of large files, the use of the option
	-jh65535 has resulted in system hangs and file CRC errors.  This
	occurs with the number 65535 and 65534.  If you use this option
	without the -jt option, you should verify your archived files.
	I extend my deepest apologies to everyone so inconvenienced.
	This is fixed in ARJ 2.21.

     **********************************************************************

     Added MS-DOS 3.x international language support so that casing of
	letters is properly handled (such as the "u" with umlaut) on
	the command line and with the ARJ "w" command.
     Speeded up archival operations on diskettes.
     Speeded up store, unstore, and diskette copy operations.
     Speeded up ARJ "w" command.
     Added a default choice of yes to caseless search prompt.
     Added "-jv" option to "s", "p", "w" commands.
     Added "-t1.doc.asm.c" option to select file type by suffix.
     Added "-t1f" option to force text type.
     Added "-+" option to inhibit ARJ_SW usage by ARJ.
     Added TIPS and USING ARJ AS A BACKUP PROGRAM sections to the ARJ.DOC.
     Added several batch files to demonstrate using ARJ to backup/restore
	and using REARJ to convert archives.
     Added a count of files to the ARJ deleting input files messages.
     Added a volume count to "OK to proceed to next volume..." message.
     Slightly improved the compression on -m3 and -m4.
     Modified "ARJ l -jp *.arj" to accept a "n" input to skip archive
	currently being displayed.
     Modified CTL BREAK processing to always delete ARJTEMP.$nn and the
	ARJ archive file when breaking during the temp copying process.
     Modified ARJ to return an ERRORLEVEL of 1 for answering "NO" to
	the "OK to proceed to next volume..." prompt.
     Simplified many of the error messages to avoid confusion.
     Improved the volume size limiting logic to account for
	uncompressible data.
     Fixed problem with "ARJ u -e1" command.
     Fixed rare CTL Break hang problem when DOS BREAK is ON.
     Fixed the ARJ "w" command when the target text spans buffers.
     Fixed the ARJ "c" command to display the correct archive name
	when the archive has been renamed.
     Fixed ARJ file commenting to skip continued files on volumes.
     Fixed a problem with a missing C/R when using "ARJ s -jv".
     Fixed the diskette processing when the diskette is swapped during
	the lack of disk space user prompt.
     Fixed ARJ attempt to open file named "*.ARJ" for add commands.
     Fixed midnight date problem caused by clock() and DOS bug.
     Fixed ARJ.DOC to indicate that ARJ <command> *.ARJ works for all
	ARJ commands except for the add commands (a, f, j, m, u).
     Fixed rare ARJ error when using -jh65535 with certain files.
     Fixed "ARJ e archive ... -zcomment.txt" to not abort for 0 files.
     Fixed ARJ to handle file attributes on directories correctly.
     Fixed ARJ "Out of memory" error when using "-jm" and ARJ_SW.
     Fixed "-jyy" option handling of "function" key inputs.
     Modified "-jyy" to display input character in original case.
     Fixed "-?" to work with "-jyy".
     Fixed ARJ to abort on reaching end of file early when using STDIN.
     Fixed ARJ processing of empty list files to not display errors.
     Fixed ARJ to delay aborting on updating an ARJ-SECURED archive so a
	command like "ARJ c *.ARJ -r -zBBS.TXT" does not end prematurely.
     Slightly revised LICENSE.DOC and ORDERFRM.DOC.

     Significantly speeded up self-extraction from diskettes.
     Fixed ARJSFXJR (-je1) to send its output to standard output.

     Verified that QSORT by Ben Baker will work with ARJSORT.BAT without
	the memory limitation problem of MS-DOS SORT.
     Fixed ARJSORT to allow -! in ARJ_SW.
     Fixed ARJSORT pause when user has set -jp in ARJ_SW.
     Fixed ARJSORT to detect errors in MS-DOS SORT processing.

     Modified REARJ.CFG to not allow full directory extractions for PAK.
     Modified REARJ to remove the temp directory between conversions.
     Added REARJ "/u" usage information to "/a*" usage to REARJ.DOC.
     Changed REARJ.CFG to support Viruscan version 80.
     Improved REARJ CTL Break handling using PKZIP/UNZIP.


     end of WHATSNEW.DOC

