

                  Модуль BLModel  V 1.0

                   (c) Ярослав Мигач


        Описываемый модуль определяет базовый обьектный тип
   абстрактной модели логической электронной схемы. Под
   определяемую модель подходят все виды логических электронных
   схем - как комбинационные, так и схемы с памятью.
   Единственное ограничение определяемое внутренней структурой
   данных задаваемого обьектного типа - это невозможность
   переопределения состояния выводов с входного на выходной и
   наоборот в процессе моделирования. Т. е. функции выводов
   явлются фиксированными и определяются перед началом
   моделирования.
        Модуль написан на языке программирования Turbo Pascal V
   6.0 и требует для своей поддержки модули System, Dos, Crt из
   стандартной библиотеки TURBO.TPL, а также модуль GMODEL.TPU
   где содержится базовый обьектный тип для моделирования
   логических электронных схем и систем.


                 Типы данных.


    TypeLm = RECORD
        - Представляет собой запись, содержащую всю необходимую
    информацию относительно состояния входов и выходов
    моделируемого элемента, а также информацию о подсоединенных
    выводах других моделей элементов. Благодаря наличию
    оператора выбора, эта запись более компактна по отношению к
    полной информационной записи описания состояний,
    определенной в базовом модуле GMODEL, однако такой формат не
    позволяет переключать вход на выход в процессе
    моделирования, без изменения входных/выходных параметров
    вывода. Рассмотрим подробнее элементы записи.

        > StLm : InformLm;
        - Определяет текущее состояние вывода, его статус и
    напряжение, в случае, если вывод является выходным.

        > Friend : ConcatLm;
        - Массив определяющий карту соединений данного вывода с
    выводами других моделей.

        > LogicState : BOOLEAN;
        - Признак логического состояния модели. Этот признак 
    определяет логическое состояние вывода в текущий момент 
    моделирования. 


        Перейдем к вариантной части записи. Если данный вывод 
    является выходным, то действительными являются следующие 
    поля записи:
        > Out_1 : REAL; - напряжение выхода "1";
        > Out_0 : REAL; - напряжение выхода "0";
        > OutCount : REAL; - приращение напряжения переключения 
        выходного состояния.
        Если вывод является входным, то действительными являются 
    следующие поля:
        > InPrU_1 : REAL; - пороговое напряжение переключения в 
        "1";
        > InPrU_0 : REAL; - пороговое напряжение перключения в 
        "0"; 
        > InCounter : WORD; - счетчик задержки по входу.
        > InPrCounter_1 : WORD; - пороговое значения счетчика 
        переключения внутренней логики в "1";
        > InPrCounter_0 : WORD; - пороговое значение счетчика 
        переключения внутренней логики в "0".


    StateBLModel = ARRAY [ 1..MaxDealLm ] OF TypeLm;
        - Массив состояния модели абстрактрной логической схемы.

    StateBLModelPtr = ^StateBLModel;
        - Указатель на массив состояния модели. 


                Обьектный тип абстрактной модели
                     логической схемы.


    BaseLogicModel = OBJECT ( BaseModel )
        - Идентификатор обьектного типа.

    BaseLogicModelPtr = ^BaseLogicModel;
        - Указатель на обьект модели абстрактной логической 
        схемы.

        Обьявляемый обьектный тип содержит абстрактный метод, 
    который должен быть переназначен наследующими обьектными 
    типами. Это метод определяет логику работы модели, как для 
    любой комбинационной схемы так и для схемы с памятью.

        Поля.
        ______


        InfModel : StateBLModelPtr;
        - Указатель на массив состояния выводов. Память под 
    этот массив выделяется констрактором. Фактическую 
    размерность массива определяет поле DealLm обьявленное в 
    предшествующем обьектном типе.


        SingLogic : BOOLEAN; 
        - Признак логического состояния модели. Констрактором 
    обьектного типа определяется как FALSE. Это означает что 
    внутренняя логика модели не определена. Этот признак должен 
    быть установлен в состояние TRUE констракторами наследующих 
    обьектных типов или их установочными методами.  Пока признак 
    равен FALSE обращение к методам моделирования будет выдавать 
    сообщение об ошибке.

        Razbros : REAL;
        - Это поле определяет разброс параметров каждого вывода 
    по отношеню к общим параметрам, установленным констрактором.
    Разброс определяется в процентах от 0 до 70.0 .

        Out_1_All : REAL;
        - Общее напряжение выхода "1".

        Out_0_All : REAL;
        - Общее напряжение выхода "0".

        Out_Count_All : REAL;
        - Общее напряжение счетчика приращения выхода.

        InPr_1_All : REAL;
        - Общее пороговое напряжение "1" по входу.

        InPr_0_All : REAL;
        - Общее пороговое напряжение "0" по входу.

        InCount_1_All : WORD;
        - Общее пороговое значение счетчика задержки для
    переключения в "1" по входу.

        InCount_0_All : WORD;
        - Общее пороговое значение счетчика задержки для
    переключения в "0" по входу.


        Констракторы и дестракторы.
        ___________________________


       CONSTRUCTOR Init ( Deal : BYTE; OU_1, OU_0, OU_C : REAL;
                         IU_1, IU_0 : REAL; IC_1, IC_0 : WORD;
                         RB : REAL );
       - Инициализация модели, установка общих парамерров 
    выводов модели.

    Рассмотрим параметры, передаваемые констрактору:

        > Deal : BYTE;
        - Количество выводов модели элемента схемы.

        > OU_1 : REAL; 
        - Общее напряжение выхода "1".

        > OU_0 : REAL; 
        - Общее напряжение выхода "0".

        > OU_C : REAL; 
        - Общее напряжение счетчика приращения выхода.

        > IU_1 : REAL;
        - Общее пороговое напряжение "1" по входу.

        > IU_0 : REAL; 
        - Общее пороговое напряжение "0" по входу.

        > IC_1 : WORD;
        - Общее пороговое значение счетчика задержки для
    переключения в "1" по входу.

        > IC_0 : WORD;  
        - Общее пороговое значение счетчика задержки для
    переключения в "0" по входу.

        > RB   : REAL;                           
        - Определяет разброс параметров каждого вывода по 
    отношеню к общим параметрам, установленным констрактором.  
    Разброс определяется в процентах от 0 до 70.0 .


        DESTRUCTOR Done; 
        - Деинициализация модели, освобождение памяти из под 
    массива состояний.


        Базовые методы.
        _______________

        PROCEDURE SetParamLm ( NumLm : BYTE; State : StateLm );
        - Устанавливает параметры моделирования для указанного 
    вывода. Где :
        > NumLm -  номер устанавливаемого вывода;
        > State -  состояние вывода. Может принимать значения 
        OutLm или InLm.
    Этот метод должен быть выполнен для каждого вывода модели до 
    вызова методов моделирования. Метод является виртуальным  и 
    может быть переназначен.


        PROCEDURE GetStateLm ( NumLm : BYTE; VAR State : InformLm);
                - Метод возвращает текущее состояние
    вывода обьекта моделирования ЛЭС на данный момент времени.
    Метод является виртуальным и должен быть переназначен для
    реальных моделей.
        > NumLm - номер вывода;
        > State - выходное состояние вывода.
    Этот метод является наследуемым методом базового обьектного 
    типа.

        PROCEDURE ConnectLm ( MyNum, NumObj : BYTE;
                              ObjPtr : BaseModelPtr;
                              VAR Result : BYTE );
                - Метод позволяет установить однонаправленное
    соединение с заданного вывода оьекта модели с заданным
    выводом другого обьекта модели. Не исключается соединение
    выводов оного и того-же обьекта. 
        > MyNum  - номер вывода данного обьекта;
        > NumObj - номер вывода подсоединяемого обьекта;
        > ObjPtr - указатель на подсоединяемый обьект;
        > Result - результат операции :
                 > 0  - успешное соединение;
                 > 1  - соединение уже было задано;
                 > 2  - нет места для соединения;
                 > 3  - соединение невозможно;

        PROCEDURE CalcLogic ( LogicPtr : StateBlModelPtr );
        - Определяет логическое состояние выходов по логическому 
    состоянию входов. Метод является абстрактным и должен быть 
    переназначен для реальных моделей.

        PROCEDURE SetStart; VIRTUAL; - Устанавливает начальное
    состояние выходов обьекта моделирования ЛЕС таким образом,
    чтобы оно соответствовало состоянию все единицы на входах.

        PROCEDURE RunModel; VIRTUAL; - Производит один такт
    моделирования. Изменяет состояние выходов модели в
    зависимости от состояния входов и внутренней логики.

