



       3.  Р А З Р А Б О Т К А   М А Т Е М А Т И Ч Е С К О Г О

                      О Б Е С П Е Ч Е Н И Я.



        3.1. Описание структуры моделируемого устройства.


        В   настоящий   момент    для   реализации    алгоритмов

    моделирования     структтура     моделируемого    устройства

    представляется    в    списочной    форме.    Где   отдельно

    представляются списки используемых элементов и списки  общих

    точек  соединения  с  указанием  подсоединенных  элементов и

    значения  сигналов  на  линиях  схемы  ханятся в специальном

    рабочем  массиве  -  рабочем  поле  (  РП  ).  Данный способ

    представления моделируемой схемы позволяет использовать  как

    компилятивные, так и интерпритативные методы  моделирования.

    Однако  просмотр  больших  списков  в процессе моделирования

    связан  со  все  возрастающими  временными затратами по мере

    роста  величины  списков.  В  настоящей  работе предлагается

    информацию о подсоединениях данного элемента модели к другим

    элементам   располагать   непосредственно   только    модели

    элемента.  Тогда  каждый  элемен  располагает  информацией о

    своих подсоединениях. На практике применяют ссылки  текущего

    выходного вывода на все подсоединенные выходные:






      ┌────────┐ Вых 2
      │ Эл 1   ├────────┐  Вх1 ┌───────────┬──────────┐
      │        │ Вых 7  └──────┤Ук эл1 вых2│  Эл 4    │ Вых 4
      │        ├─────┐     Вх3 ├───────────┤          ├─────
      └────────┘     └─────────┤Ук эл1 вых7│          │
      ┌────────┐ Вых 4     Вх5 ├───────────┤          │  Вых 6
      │ Эл 2   ├───────────────┤Ук эл2 вых4│          ├─────
      │        │           Вх2 ├───────────┤          │
      └────────┘      ┌────────┤Ук эл8 вых2│          │
                      │        │ . . . . . │          │
      ┌────────┐ Вых 2│        │Ук эл3 вых1│          │
      │ Эл 8   ├──────┤        └───────────┴──────────┘
      │        │      │
      └────────┘      │
                      │
                      │Вых 1
                 ┌────┴──┐
                 │ Эл 3  │
                 └───────┘

                       Рис.  3.1.1.



    Однако следует учитывать, что в современной элементной  базе

    присутствуют  элементы  способные  изменять состояние своего

    вывода  с  входного  на  выходной  в  зависимости  от режима

    работы, определяемого логикой схемы вцелом. Поэтому в данной

    работе,  при  определении   взаимосвязей  между   элементами

    моделируемой  схемы,  применяются  двунаправленные   ссылки.

    Благодаря наличию перекрестных ссылок отпадает необходимость

    содержания   списка   точек   подсоединения   элементов    с

    информацией по каждому подсоединенному выводу. Таки  образом

    предоставляется   возможность    обойтись   одним    списком

    элементов,  порядок  следования  элементов  в  котором будет

    определятся   в   зависимости   от   выбранного    алгоритма

    моделирования.  Предлагаемое  ограничение  - подсоединение в

    одной точке не более 5-ти выводов элементов. Это ограничение

    можно  легко  изменить  в   большую  или  меньшую   сторону,

    изменив  в   исходном  коде   программ  одну    единственную

    константу.




        3.2. Двоичное моделирование с учетом задержек.



        Обычные  алгоритмы  синхронного  моделирования  обладают

    высоки  быстродействием,  однако  результаты  их  выполнения

    могут зависеть от  порядка нумерации элементов.  Кроме того,

    синхронное  моделирование  не  позволяет  получать временные

    диаграммы работы  схемы, оценивать  скорость распространения

    сигналов  и  решать  другие   задачи,  связанные  с   учетом

    временных соотношений между сигналами. Эти и другие  причины

    обусловили  разработку  более   медленных,  но  зато   более

    адекватных  алгоритмов  моделирования  с  учетом  задержек в

    элементах схемы или, так называемых, алгоритмов асинхронного

    моделирования.

        Задержка переключения элемента вообще говоря зависит, от

    того, на каом входе  происходит смена сигнала и  как именно.

    При  моделировании  дискретных  устройств  с  очень  высоким

    быстродействием,  также  необходимо  учитывать  задержки   в

    линиях связи между элементами. Для простоты  предполагается,

    что задержка не  зависит от вида  смены сигнала (  "0-1" или

    "1-0" ). Задержки в линиях могут быть учтены путем  введения

    в  схему  специального  элемента  задержки  сигнала  без его

    искажения.  Выбор  масштаба   времени  обычно   производится

    пользователем.  Единица  масштаба  может  быть произвольной.

    После   того,   как   выбран   масштаб,   задержка  элемента

    представляется безразмерной  величиной -  отношением времени

    задержки элемента к единице масштаба, называемой  моденльной

    задержкой.  Как  правило  это  целая  величина, определяющая

    задержку  на  N  тактов  моделирования.  Т. е. моделирование




    производится  дискретно  и  значения  сигналов  на   выходах

    элементов  определяются  по  истечении  заданного количества

    тактов  или  на  каждом  такте,  в зависимости от выбранного

    алгоритма моделирования.

        Для  схем  с  одинаковыми  задержками  в элементах можно

    применять  как  алгоритм  сквозного  моделирования,  так   и

    алгоритмы событийного моделирования. При различных задержках

    алгоритм сквозного моделирования практически нерпименим. Для

    алгоритмов событийного моделирования с различными задержками

    в  элементах  строят  очередь  будующих событий, что заметно

    ускоряет  процесс  моделирования,  однако  требует   больших

    ресурсов памяти.

        В  данной  работе   применяется  следующий   асинхронный

    алгоритм моделирования. Моделирование производится по тактам

    и  значения  на  выходах  элементов  определяется по входным

    значениям  на  каждом  такте.  Примем  также  допущение, что

    выходные  сопротивления  элементов  намного  больше входных.

    Тогда  доминирующим  сигналом  на   линии  будет  сигнал   с

    наименьшим  уровнем.  Это  не  даст  большой погрешности при

    функциональном моделировании.

        Для   текущего   просматриваемого   элемента   в  начале

    определяем состояния всех входных выводов, затем  определяем

    выходные  состояния  по  таблице  истинности  и далее задаем

    приращения  напряжения  на  выходах.  Определение  состояние

    текущего входного  вывода производится  следующим образом  -

    определяется   доминирующий   уровень   сигнала   по    всем

    подключенным  выходным  выводам  соседних  элементов,  затем

    полученный  уровень  сравнивается   с  пороговым   значением




    напряжения  переключения  и   приозводится  увеличение   или

    уменьшения счетчика задержки, если  он не принял к  текущему

    моменту соответствующего  порогового значения.  Если счетчик

    задержки  равен  соответствующему  пороговому  значению,  то

    производится  изменение  входного  логического  значения  по

    данному  выводу   элемента.  После   того,  как   внутреннее

    логическое   состояние   выводов   определено,  определяется

    выходное  внутреннее   логическое  состояние   по   таблицам

    истинности или иным  образом. Алгоритм моделирования  одного

    такта для отдельно взятого элемента приведен в приложении.





        3.3. Условия адекватности моделирования.



        Приведенный   алгоритм   моделирования   отличается   от

    традиционных,   где   для   каждого   такта    моделирования

    производится необходимое  количество итераций  до сходимости

    результатов  двух  соседних  итераций.  Такой подход требует

    значительных ресурсов  памяти для  храниеия результатов  как

    минимум  двух   итераций  одновременно,   неговоря  уже    о

    значительном замедлении процесса моделирования.  Приведенный

    алгоритм дает правильный результат за одну итерацию только (

    т. е. во время одного такта ) при моделировании сперва  всех

    элементов, подключенных выходами к данной точке  соединения,

    а затем элементов, подключенных входами. В противном  случае

    на  протяжении  одной  итерации  могу  поступить   различные

    значения сигнала на элементы подключенные входными  выводами

    к одной точке  соединения, а это  приведет в свою  очередь к



    неадекватности  результатов   моделирования.  Однако,   если

    принять,  что  время  такта  моделирования  в  несколько раз

    меньше самого  короткого сигнала  в схеме  и задержки самого

    быстрого  из   элементов,  то   подобное  возмущение   будет

    воспрянято как короткая импульсная помеха по входу и  засчет

    наличия  счетчика  задержки  севдена  на  нет.  Т.  е.  если

    принмать значения времени элементарного такта  моделирования

    в  3  -  4  раза  меньше   минимальной  задержки  любого  из

    элементов,  то  необходимость  в  итерациях  для  достижения

    адекватности  моделирования  на   текущем  такте   отпадает.

    Эксперементально  проверено,  что   для  достижения   полной

    адекватности,   значение    времени   такта    моделирования

    необходимо  принять  раным  в  5  раз меньше задержки самого

    быстродействующего  элемента,  при  этом  для  идентификации

    значения  напряжения  сигнала   в  текущий  момент   времени

    моделирования,   берется   среднее   значение   сигнала    в

    исследуемой точке за два такта моделирования.   Максимальная

    продолжительность  такта  моделирования  дролжна  составлять

    время не более чем в 3 раза меньше задержки самого  быстрого

    из моделируемых элементов схемы.

        Все выше сказанное позволило значительно сократить время

    моделирования  и  уменьшить  используемые  ресурсы памяти по

    сравнению  с  традиционными  системами.  Подобный   алгоритм

    позволит   успешно   производить   моделирование  достаточно

    сложных схем на персональном  компьютере IBM PC с  640 Кбайт

    опреративной  памяти  и  быстродействием  1  Млн. операций в

    секунду.

