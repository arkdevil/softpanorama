


      2.   Т Е Х Н О Л О Г И Я     М О Д Е Л И Р О В А Н И Я

                 Л О Г И Ч Е С К И Х   С Х Е М .



        При  изготовлении  и  эксплуатации  цифровых   устройств

    требуется   иметь   средства   проверки   правильности    их

    функционирования.   Одним   из   таких   средств    являются

    проверяющие тесты. При  построении и анализа  тестов широкое

    применение находит моделирование на логическом уровне.

        Логическое   моделирование   заключается   в  построении

    математической  модели  исследуемого  устройства  -  системы

    соотношений,  описывающих  поведение   этого  устройства   с

    заданной  точностью,  и  последующем  анализе поведения этой

    модели по ее реакции на входные воздействия.

        С помощью моделирования в системе автоматизированного

    проектирования дискретных устройств решаются следующие

    задачи:

        - проверка правильности логического функционирования

    дискретного устройства ( ДУ );

        - проверка временных характеристик ДУ;

        - проверка функционирования цепей установки ДУ в

    начальное состояние;

        - анализ состязаний и рисков сбоя;

        - определение полноты тестов;

        - определение диагностических свойств тестов.

        Существует   много   различных   методов   и  алгоритмов

    моделирования. Рассмотрим  некоторые из  них, представляющие

    наибольший  интерес.  Основными  характеристиками алгоритмов

    моделирования являются адекватность, быстродействие и  обьем

    памяти,  необходимый  для   реализации.  Под   адекватностью




    понимается  степень  соответствия  результатов моделирования

    истинному поведению исследуемого  ДУ. Для комбинационных  ДУ

    алгоритмы  моделирования  гарантируют  полную адекватность с

    установившимися     значениями      сигналов.      Поведение

    последовательных  ДУ  в  общем  случае  неоднозначно   из-за

    неопределенности начальных состояний и состязаний  сигналов,

    что усложняет задачу моделирования таких ДУ. Неоднозначность

    учитывается в  различной степени  алгоритмами моделирования.

    Еще  труднее  адекватно  моделировать  переходные  процессы,

    однако  для  большенства  практически важных рассматриваемых

    задач этого и  не требуется: достаточно  правильно вычислять

    установившиеся значения сигналов.

        Адекватность  моделирования   зависит  в   основном   от

    принятой модели  ДУ, моделей  элементов и  сигналов, способа

    учета временных  соотношений между  сигналами. как  правило,

    повышение   степени   адекватности   связано   со  снижением

    быстродействия  и  увеличением  требуемого  обьема   памяти,

    поскольку  усложнение  модели  ведет  к  увеличению обьема и

    сложности  обработки.  Наиболее  быстрыми являются алгоритмы

    двоичного  моделирования  без  учета  задержек элементов. Во

    многих случаях необходимо  принимать во вниманпие  не только

    номинальные   значения   задержек,   но   и   их    разброс.

    Быстродействие  таких  алгоритмов  как  правило  еще   ниже.

    Поэтому   выбор   метода   моделирования   часто    является

    результатом  компромиса  между  различными  требованиями   и

    зависимости  от  класса  расматриваемых  ДУ,  вида  решаемой

    задачи , имеющихся в распоряжении вычислительных ресурсов  и

    т.д.




        2.1. Факторы, определяющие адекватность моделирования.



        2.1.1. Модели ДУ.


        Как уже отмечалось, модель ДУ представляет собой  ситему

    соотношений,  в   некотором  приближении   описывающую   ДУ.

    Различают   функциональные   и    структурные   модели.    В

    функциональных  моделях  отсутствкют  сведения  о внутренней

    структуре  устройства,  т.  е.  оно  представляется  в  виде

    "черного ящика".  Функциональной моделбю  комбинационного ДУ

    обычно служит конечный автомат ( абстрактный или структурный

    ).   Функциональные   модели   ДУ   полезны   при    решении

    теоретических задач,  однако из-за  сложности их  получения,

    большого обьема и отсутствия  в них информации о  внутренней

    структуре  устройства  на  практике используются структурные

    модели.

        Структурной моделью ДУ  служит, как правило,  логическая

    сеть,  которая  задается  перечислением  входов  и   выходов

    элемента  ДУ,  а  также   связей  между  этими   элементами.

    Благодаря своей компактности, удобству получения и обработки

    структурные модели нашли  самое широкое распространение  при

    реализации алгоритмов моделирования.





        2.1.2. Модели сигналов.


        При  моделировании,  входным  и  внутренним   переменным

    присваиваются   значения,   которые   называются  символами.

    Совокупность   роазличных    символов,   используемых    при

    моделировании, называется  алфавитом моделирования.  Моделью

    сигналов называется соответствие между реальными сигналами и

    символами   принятого   алфавита.   Простейшим   и  наиболее

    рапространенным  является  двоичный  алфавит  {  0, 1 }. Для

    учета  неоднозначности  поведения  устройства   используется

    троичный  алыавит  {  0,  1,  X  },  где символ "X" означает

    неизвестное  или  неопределенное  значение. Другими словами,

    если некоторой переменной приписан  символ "X" то сигнал  на

    соответствующем полюсе моджет быть равен либо 0, либо 1. При

    анализе состязаний испльзуется алфавит либро троичный,  либо

    с  большим  числом  символов,  позволяющий уточнить характер

    переходных  процессов.  Необходимо  отметить.  что   сростом

    значности алфавита  быстро растет  требуемый обьем  памяти и

    время моделирования.






        2.1.3. Модели элементов.


        Элементом  ДУ  называется  конструктивно и функционально

    законченная часть ДУ, не подлежащая дальнейшему расщеплению.

    Элементы  ДУ  представляются   как  функциональными  так   и

    структурными     моделями.     Возможность      использовать

    функциональные модели обуславливается сравнительно-небольшим

    числом типов элементов и относительной простотой реализуемых

    ими  функций  по  сравнению  с  функциями,  реализуемых  ДУ.

    Простейшие логические элементы ( И, ИЛИ, НЕ, И-НЕ и т. п.  )

    практически всегда представляются функциональными моделями.

        Множество   элементов   модели,   реализующих  различные

    логические  функкции,  называются  базисом  модели ( базисом

    моделирования  ).   Следует  подчеркнуть,  что  базис модели

    может несовпадать с  элементарным базисом ДУ.  Использование

    элементарного базиса ДУ в  качестве базиса модели имеет  ряд

    преимуществ. Однако в состав элементарного базиса ДУ  обычно

    вводят  сложные  элементы  памяти  и  реализация  алгоритмов

    моделирования   в   базисе,   включающем   элементы  памяти,

    существенно  усложняется.  Отказ   от  рассмотрения   базиса

    модели,  включающего  элементы  памяти,  вообще  говоря   не

    ограничивает  класс  рассматриваемых  ДУ,  поскольку  каждый

    элемент ДУ можно  представить в виде  эквивалентной подсхемы

    комбинационного базиса.

        Простейшей  моделью  элемента  комбинационного   базиса,

    используемой   при    двоичном    моделировании,    является

    реализуемая им  булева функция,  заданная с  помощью таблицы

    истинности  или  любым  другим  способом.  При  многозначном

    моделировании   модель   элемента   задается   при    помощи

    многозначной таблицы истинности.




        2.2. Сходимость моделирования.



        Во   многих   случаях   алгоритм   моделирования   можно

    представить следующим  образом. При  подаче входного  набора

    поочередно вычисляются  значения на  выходах всех  элементов

    схемы по значениям на  их входах. Такая поцедура  называется

    итерацией. В результате ее значения некоторых сигналов могут

    изменятся. Тогда необходимо выполнить вторую итерацию, затем

    третью  и  так  до  тех  пор,  пока  все  сигналы  не примут

    постоянное   значение.   Возможен    и   другой    результат

    моделирования  -   периодическая  смена   наборов   значений

    сигналов.  В  этом  случае  говорят,  что  моделирование  не

    сходится из-за генерации  модели ДУ. Следовательно,  если не

    принять  специальных  мер,  процесс  моделирования  не будет

    завершен.   Поэтому   в   алгоритмах   моделирования  должен

    присутствовать критерий завершения моделирования.

        Наиболее  просто  обстоит   дело  для  тех   алгоритмов,

    сходимость  которых  гарантирована.  Для  них   естественным

    критерием окончания  моделирования является  совпадение двух

    соседних  итераций.  Для  некоторых  динамических алгоритмов

    моделирования вообще не  требуется совпадения двух  соседних

    итераций, поскольку каждая итерация соответствует  состоянию

    модели в определенный момент времени. Если же сходимость  не

    гарантирована,  обычно  задают   один  из  двух   критериев:

    совпадение результатов или достижение некоторого предельного

    числа  итераций,  после   которого  считается,  что   модель

    заведомо находится в состоянии генерации.




        2.3. Выбор факторов моделирования.



        Выберем  основные  факторы  моделирования для построений

    моделей  сложных  логических  электронных  схем  с  участием

    микроконтроллеров    и    микропроцессоров    совмесно     с

    моделированием программной работы этих устройств.

        Сразу  становится очевидным выбор динамической струкруры

    модели. Поскольку разрабатываемое моделируемое устройство  в

    начальном виде  всегда представлено  структурной схемой,  то

    будем  представлять  струрной  моделью  все моделируемое ДУ.

    Достаточно часто  структурная модель  представляется в  виде

    списка  элементов  с  их  параметрами  и списка взаимосвязей

    между этими элементами. В общем случае структурная модель ДУ

    является логической сетью. Для моделирования  неисправностей

    следует предусмотреть возможность замены одного из элементов

    логической  сети  непосредственно  в процессе моделирования.

    Таки  образом,  сеть,  представляющая  модель,  должна  быть

    максимально гибкой для внесения любых изменеий без нарушения

    целостности модели в процессе моделирования.

        Отдельно следует остановиться на выборе модели сигналов,

    поскольку от этого  зачастую напрямую зависит  эффективность

    моделирования.   Предлагаемое    в    литературе    двоичное

    представление   сигнала   зачастую   не   дает   достаточной

    адекватности.  Следует  учитывать  большой  разброс проговых

    зачений     напряжений     переключения     элементов      в

    микропроцессорных системах, поскольку зачастую  используется

    элементная база различных  серий микросхем. Благодаря  этому

    такие  системы  подверженны  явлению,  называемому "гонки по



    входу". Гонки  по входу  возникают, когда  ветвящийся сигнал

    поступае   на   элементы,   имеющие   разброс   по    уровню

    срабатывания, а  фронт этого  сигнала излишне  пологий. Если

    длительность фронта входного сигнала заметно больше  времени

    срабатывания элементов,  то где-то  в середине  фронта будет

    существовать отрезок  времени, когда  с точки  зрения одного

    элемента  входной  сигнал  уже  равен  "1", а с точки зрения

    другого - еще равен "0". Элементы будут реагировать на  один

    и тот же сигнал как  на два различных, а такая  ситуация при

    проектировании  схемы  ее  алгоритмом  не предусматривается.

    Предлагаемое   в   литературе   многозначное   моделирование

    повышает адекватность модели,  но заметно увеличивает  время

    моделирования потребляя при этом все более значимые  ресурсы

    вычислительной ситемы.   В настоящей  работе предлагается  в

    качестве модели  сигнала использовать  вещественное значение

    амплитудного  напряжения  сигнала  в  текущий момент времени

    моделирования  на  заданном   выводе  элемента.   Применение

    вещественных чисе при работе ПЭВМ с сопроцессором даст  даже

    уменьшение времени  моделирования и  упрощение алгоритма  по

    сравнению     с      моделированием      при      применении

    могозначного  алфавита,  поскольку  вещественные операции на

    сопроцессоре  выполняются  также  быстро,  как  и операции с

    двоичными машинными словами. Кроме этого резко увеличивается

    адекватность  моделирования.   Применение  подобной   модели

    сигналов расширяет также возможности системы  моделирования,

    за счет большей  адекватности моделей элементов.  Становится

    возможным моделировать затяжку фронтов для выходов различных

    элементов  в  самом  широком  диапазоне.  Поскольку   многие

    элементы современной элементной базы используют переключение




    вывода  в  третье  Z  состояние,  необходимо  также  иметь в

    алфавите  модели  сигнала  такое  состояния,  как отсутствие

    сигнала. Таки  образом предлагаемый  алфавит модели  сигнала

    имеет вид: { 0...U, Z }.

        Теперь остановимся на  модели элементов. Для  увеличения

    приозводительности  моделирующей  среды  удобно представлять

    модели  элементов  функциональными  моделями.  Однако,   для

    повышения  адекватности  моделирования  элементов не следует

    отбрасывать возможность построения новых элементов, на  базе

    ранее  заданных  функционально.  Таки  образом,  в  качестве

    базовых, всеравно остаются фунциональные модели.   Благодаря

    принятому  алфавиту  модели  сигнала,  модель элемента может

    обладать пороговыми значениями напряжений переключения в "1"

    и  "0",  следует  также   учесть,  что  пороговые   значения

    переключения  могут  отличатся  даже  для  различных  входов

    одного и тогоже моделируемого элемента. Таким образом модель

    элемента будет учитывать возможность наличия гонок по  входу

    между  выводами   самого  элемента.   Далее  нужно    учесть

    затягивание фронтов на  выходах элементов. Для  этого введем

    значение приращения напряжения на каждом такте моделирования

    при  переключении  выходного  сигнала,  а  также номинальные

    значения напряжения  "1" и  "0" на  каждом выходе  элемента.

    Таки мобразом значение  на выходе будет  "плавно" изменяться

    от  "0"  до  "1"  значения   и  наоборот  с  каждым   тактом

    моделирования.

        Поскольку  модель   всего  моделируемого   ДУ   является

    динамической,   необходимо    учесть    величины    задержек

    распространения сигналов внутри самих элементов, а также  их



    помехоустойчивость по входу при наличии в системе гонок типа

    "1- 1" или "0-0". Для каждого входа введем значение счетчика

    тактов   моделирования   и   его   пороговые   номиналы  для

    переключения внутренней логики модели в "1" или "0" по входу

    внутренней  логической  модели.  При  достижении  на   входе

    элеметна   порогового   значения   напряжения   переключения

    значение счетчика начинает изменяться в меньшую или  большую

    сторону  до  своего  прогового  значения  с  каждым   тактом

    моделирования.  Соответственно  каждый  вход  и  выход имеют

    пременную,       обозначающую       текущее       внутреннее

    логическое   состояние   элемента.   Таким   образом  модель

    внутренней  логики  элемента   полностью  отделена  от   его

    динамической модели, что резко сокращает время моделирования

    и   сложность   алгоритмов   по   сравнению   с    моделями,

    предполагающими многозначные  таблицы истинности  элементов.

    Кроме этого подобный подход экономит ресурсы  вычислительной

    среды.

