
INTRODUCTION
------------

Like many of you, I own a large hard disk which, inconveniently, has
more than 1024 cylinders.  This disk, a middle-aged ESDI unit, is structured
with 1222 cylinders, 15 surfaces (heads), and 36 sectors per track.

Many folks (including some IBM guys) have said that OS/2 2.0 is compatible
with such disks, if some special care is taken during installation.  More
recent opinion has been that OS/2 is not yet compatible with these disks,
unless they are SCSI units.  Regardless, after much trial and many errors, 
I have successfully configured my disk.  

Before I relate the procedure which worked for me, I'd like to address
the question of "why?"  In many cases, the hard disk cannot be used to
its full capacity unless these "excess" cylinders are used.  In other
cases, such as mine, the disk controller supports "sector mapping" or
"sector translation" -- essentially hiding the physical configuration of
the disk from the operating system and "mimicing" a disk with fewer 
cylinders and more heads or sectors per track.

I could have used sector translation on my ESDI drive.  In fact, I _did_
use sector translation at first.  My motivation for using "native" format
was to increase the performance of OS/2.  ($OPINION ON)  HPFS and disk
caches depend in some ways on the physical layout of the underlying drive.
Caches know how to read one "track" (cylinder+surface) ahead to speed 
transfers.  My drive seemed to be doing an excessive amount of work, 
compared to what I was accustomed to under DOS.  I theorize that one
reason for this is because my drive is "lying" about its actual physical
layout, thereby defeating some of the "enhancements" of the operating
system.  Indeed, after eliminating sector translation, my drive seems to 
be "snappier" (technical term).  I do not have measured statistically 
significant data to back up this opinion.  I CAN'T SAY WITH CERTAINTY
THAT THE BENEFIT FROM THIS PROCEDURE IS WORTH THE TROUBLE. ($OPINION OFF)

PROCEDURE
---------

To implement this procedure, you will need the program SpeedStor by 
Storage Dimensions, or its equivalent.  (I first tried Norton Utilities 
alone, without success.) SpeedStor is a DOS program, and I doubt it will 
run in a VDM under OS/2.

1.  Start with a clean sandblasted disk.  Be sure any valuable data is
first backed up, because it will _definitely_ be lost during this 
procedure!

2.  Decide how many partitions you need.  You can't use the entire disk
as one partition, because the boot partition must be <1024 cylinders.
Since you are reading this document, you will have to partition your 
disk into at least two parts.

3.  If you want to use BootManager to implement multiple operating systems,
be sure to leave a "hole" of at least 1M byte at the front of the disk.
You must calculate how many cylinders this will occupy.  In my case, each 
cylinder holds 15 (heads) * 36 (sectors/trk) = 540 sectors.  Since each 
sector is 512 bytes, it requires 4 cylinders on my drive to store 
BootManager (540 * 512 = 1080K).  This "hole" is left implicitly.  
SpeedStor allows you to specify the beginning and ending cylinder for 
each partition.  I just started my first partition at cylinder 4, 
head 0, track 1.

4.  Define your chosen partitions as "DOS" partitions.  It may not be
significant, but my first attempt failed when I defined one of my partitions
as "SSTOR" readable instead of DOS.

5.  Exit SpeedStor and start the installation of OS/2 2.0.  Load the first
two disks (Installation followed by Disk 1), and hit ESC to exit the
installation process.

6.  Run FDISK from Disk 1 of the OS/2 2.0 distribution.  You should see
your partitions already defined.  Note for BootManager users: you must have
a "bootable" partition for each operating system you wish to install.  I
had to "delete" one of my middle partitions, then "create" the same 
partition to mark it as bootable.  Define one of your partitions as 
"installable", and the OS/2 installation will use it by default.

7.  If you want BootManager, install it at this time.  Define which 
partitions are bootable, and the default partition.

8.  Reset the machine and install OS/2.  From this point on, you can
install OS/2 normally.  Be sure to choose "format partition" when offered.

I successfully installed a multi-boot sustem with DOS 5.0 and OS/2 2.0.
For my system, I defined five partitions (four actual, one an "extended"
partition containing two logical drives).  The partitions are:

Boot Manager  1M     ****
DOS 5.0 Boot  10M    FAT
OS/2 2.0 Boot 65M    HPFS
DOS files     100M   FAT   | Extended partition
OS/2 files    145M   HPFS  |

After going through this, I'm not sure the benefit is worth the hassle.  If
I knew at the start how much trouble it would be to discover this stuff,
I probably would have abandoned the idea!

Thanks to John Bridges for his help.

-- Joe Barnhart 76174,1573
