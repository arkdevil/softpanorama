
                     M  a  c  r  o  B  a  t
                     ----------------------

               Б и б л и о т е к а   п а к е т о в
               -----------------------------------

          (C) 1992 by L.G.Bunich.  ALL RIGHTS RESERVED.


   В этом документе описаны включенные в поставку  примеры пакетов
MS-DOS и процедур MacroBat. Слева дан  синтаксис  запуска,  правее
расположены пояснения.

   Пакеты настроены на мою личную файловую среду,  поэтому  прежде
чем их использовать,  просмотрите их текст  и скорректируйте,  где
надо, пути к программным файлам.  Кроме того, в них вызываются не-
сколько дополнительных пакетов; поясню их назначение.

   Пакет SETPATH.BAT содержит одну команду Set Path=...  и  служит
для восстановления стандартных путей после работы тех пакетов, ко-
торые меняют значение переменной PATH.

   Пакет SETARJ.BAT устанавливает режимы упаковщика ARJ,  и у меня
он имеет следующий вид:

        Set ARJ_SW=-S -I1 -JS

   Далее используется сокращение:   спф - спецификация файла.


------------------------ Пакеты MS-DOS ---------------------------

ACL файл вых_код листинг
                Компиляция  и  компоновка  ассемблерных   программ
                (компилятор TASM). Объектный модуль уничтожается.
                  Файл - исходная программа, расширение ASM подра-
                зумевается.
                  Вых_код:

                  c - получить COM-файл (принято по умолчанию)
                 *c - аналогично, для вызова из Multi-Edit
                  e - получить EXE-файл
                 *e - аналогично, для вызова из Multi-Edit
                  d - получить EXE-файл с отладочной информацией
                 *d - аналогично, для вызова из Multi-Edit

                  Листинг: имя файла для листинга, если надо. Если
                выхкод не задан,  второй  параметр  воспринимается
                как имя листинга.

AR              Работа с архиватором ARJ в текущем оглавлении.
                Для дискет используется  рабочее  оглавление  (для
                архивов длиной более 200000 байтов)  или электрон-
                ный диск (для прочих), для  винчестера  обновление
                происходит сразу.

AV              Проверка, нет ли вирусов в  текущем  оглавлении  и
                всех  его  подоглавлениях.  Запускаются AIDSTEST и
                SCAN.

D               Распечатка состава текущего оглавления.
D /S		То же, включая все подоглавления
D /2            Аналогично, в 2 столбца (вызывается NDOS).
D /4            Аналогично, в 4 столбца.
D архив         Распечатка оглавления архива  (ARJ, LZH, ICE, ZIP,
                PAK, ARC). Используется подпакет PD_ARJ и програм-
                ма RV.EXE.
D архив /W      Аналогично, в пять столбцов.
D *             Распечатка оглавления всех архивов.

LIBLIST         Вывод  состава  объектной  библиотеки   (программы
                LIBLIST и LIST).

PUSHD и POPD    Запоминание и восстановление текущего диска и ог-
                лавления.

SAVE            Ведение  двух  архивов:   новые  поколения  файлов
                (имя-N) и старые (имя-O). Это практически гаранти-
                рует надежное хранение информации. При запуске со-
                общается режим работы:

                  N - новый копируется в старый, затем обновляется
                      (режим создания нового поколения)
                      Перед копированием архив тестируется
                  M - старый сохраняется, новый обновляется
                      (режим модификации)

SFX архив       Создание самораспаковывающегося архива. Вызывается
                соответствующий архиватор.

TCC файл выхкод режимы
                Компиляция и компоновка программ на Турбо-Си (ком-
                пилятор BCC). Объектный модуль уничтожается.
                  Файл - исходная программа,  расширение .C подра-
                зумевается.
                  Выхкод:

                  e - получить EXE-файл (принято по умолчанию)
                  c - получить COM-файл
                  d - получить EXE-файл с отладочной информацией

                  Режимы: дополнительные режимы  компиляции,  если
                они нужны (тогда выхкод опускать нельзя).

UA архив        Распаковка архива в текущее оглавление. Полное имя
                архива указывать не обязательно, достаточно задать
                несколько первых  символов  (префикс),  однозначно
                определяющих архив.  Расширение определяется авто-
                матически, затем вызывается  соответствующий архи-
                ватор.

UAD архив       Аналогично  UA,  но распаковка происходит в специ-
                ально созданное оглавление,  подчиненное текущему;
                имя нового оглавления совпадает  с  именем  архива
                (без расширения). Корректируется TREEINFO.NCD.

XC код          Копирование утилитой XCOPY. Примеры:

                  XC ac    эквивалентно XCOPY A:*.* C: /S
                  XC cb    эквивалентно XCOPY C:*.* B: /S

ZAPT            Уничтожение текущего оглавления и всех  его подог-
                лавлений.  Вызывается утилита ZAP,  затем NCD  для
                обновления Norton-дерева (TREEINFO.NCD).


---------------------- Процедуры MacroBat ------------------------

ARCH.MB         Меню для Norton Commander, действия с архивами.  У
                меня оно вызывается клавишами F2+A.

ASM.MB          Меню для Norton Commander, действия с Ассемблерны-
                ми текстами. У меня оно вызывается нажатием ENTER,
                когда текущий файл имеет расширение ASM.

CALC.MB         Небольшой  целочисленный  калькулятор.  Вы вводите
		формулу (числа, скобки, знаки: + - * / # ) и нажи-
		маете ENTER; ниже высвечивается результат.

COPY.MB         Меню разных операций копирования.

DISK.MB         Меню  разных операций  с дискетами:  копирование и
                тестирование

FORMAT.MB       Меню для вызова из пакета или из Norton Commander,
                разметка дискет.

PRINT.MB        Меню для принтера и печати.


------------------------- М у з ы к а ----------------------------

HOLMS.MB        В. Дашкевич.  Музыкальная  заставка  к киносериалу
                "Приключения Шерлока Холмса и доктора Ватсона"

POPCORN.MB      "Воздушная кукуруза"
