
                                     Емельянов Дмитрий Иванович


                            ЗАЩИТА

   Вниманию пользователей и программистов предоставляется прог-
рамма, позволяющая  защитить  (в  некоторой  мере) их авторские
права. Программа дает возможность защитить от насанкционирован-
ного копирования имеющиеся программы форматов .COM и .EXE.

   Программа представляет  собой  систему поиска некоторых осо-
бенностей свойственных только для защищаемого файла, с последу-
ющим сохранением описания этих особенностей в исполняемом моду-
ле.  Защищаемый модуль в процессе работы программы  удлинняется
на 368 байт (удлиннение зависит от версии программы) и начинает
вести себя несколько по другому. При загрузке защищенного моду-
ля на исполнение происходят следующие действия:

 - первыми командами производится передача управления "хвосту";
 - "хвост" или тестирующий модуль производит поиск  тех  харак-
   терных особенностей, которые определяются в процессе защиты;
 - производится сравнение найденных параметров с сохраненными;
 - при  совпадении  производится вывод на экран сообщения ~This
   programm is copy protected...~ и управление передается  заг-
   руженной программе;
 - при несовпадении параметров  на  экран  выводится  сообщение
   ~UNREGISTERED COPY...~ и производится выход в DOS.

   Программа очень проста в работе и довольно эффективна. Одна-
ко  существует  некоторое  ограничение  -  невозможность защиты
исполняемых файлов,  находящихся на дискетах. Вернее сказать не
невозможность, а неэффективность применения данного способа за-
щиты на съемных носителях. Это заключается в том, что применен-
ный метод защиты основвывается на запоминании расположения фай-
ла на диске.  А так как имеется возможность полностью  скопиро-
вать дискету, то соостветственно появляется возможность копиро-
вания Ваших защищенных программ.  Поэтому работа данной системы
защиты оправдывается только на "винчестере".

   Программа работает со следующими ключами:

   /i - установка защиты
   /u - снятие защиты

   Программе также указывается имя диска,  на котором  произво-
дится работа,  путь поиска файла и его имя. В процессе защиты у
пользователя  запрашивается  пароль,  который будучи сохранен в
защищенном модуле, понадобится при снятии защиты.

   В ходе  работы производится проверка на возникновение ошибок
и осуществляются действия,  направленные на их  предотвращение.
Сообщения о тех или иных ошибках могут выдаваться на экран.

   В процессе работы программа может выдавать следующие сообще-
ния:

  - Защищаю                   Сигнализирует о работе программы.
  - Готово                    Сообщение о успешной защите.

  - Не защищен                Сообщение о безуспешной защите.

  - Файл  .COM - структуры    Сообщения о  несоответствии  типа
  - Файл  .EXE - структуры    файла,  указанного  в  расширении
                              имени, с  действительной структу-
                              рой файла.

  - Файл меньше 58 байт       Программа не позволяет иммунизи-
                              ровать файлы, длина кторых меньше
                              58 байт.

  - Файл больше 1Мбайт        Программа не прозволяет иммунизи-
                              ровать файлы,  длина которых пре-
                              вышает 1Мбайт.

  - Длина может превысить 64К Сообщение  выдается  когда  длина
                              .COM файла,   после   иммунизации
                              превышает 64Кбайт

  - Несоответсвие длины файла Сообщение  выдается  при  попытке
                              иммунизировать .EXE файлы,  у ко-
                              торых действительная    длина  не
                              совпадает с длиной,  указанной  в
                              заголовке файла.  Такое сообщение
                              обычно выдается при попытке имму-
                              низировать самораспакующиеся  ар-
                              хивы.

   Сообщение о  несоответствии  длины файла сопровождается зап-
росом на корректировку заголовка  файла.  Утвердительный  ответ
позволяет  защитить модули которые имеют несовпадение настоящей
длины с длиной указанной в заголовке.  Это относится  только  к
.EXE-модулям.  Однако нет полной гарантии, что сохранится рабо-
тоспособность такой скорректированной программы.  Так  например
есть возможность испортить программу, которая является одновре-
менно и исполняемым модулем и оверлеем,  т.е. часть файла подг-
ружается во время работы.  Снятие защиты с такой программы пол-
ностью восстанавливает ее работоспособность.

