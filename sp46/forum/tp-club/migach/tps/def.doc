
                            DEF V 1.1        
                     Модуль основных определений    

                       (c) 1990, Мигач Ярослав      

                     РУКОВОДСТВО ПО ЭКСПЛУАТАЦИИ

	Модуль Define  V 1.1   предназначен для  стыковки модулей
    "  TURBO  PASCAL  SUPPORT  "  по общим процедурам, функциям и
    типам  данных,   процедур  и   функций.  При    использовании
    специализированных процедур вода / вывода обьявленных в  этом
    модуле  появляется  возможность  быстрой организации красивых
    демонстрационных   версий   пользовательских   программ.  Эта
    возможность  появляется  за  счет  перехвата  функций  опроса
    клавиатуры.  Кроме  того,  если  пользовательская   программа
    использует  некоторые  вспомогательные  текстовые  файлы  для
    своей  работы,  то  в  демонстрационной  версии  эти файлы не
    потребуются, т.к. они будут включены в демонстрационный  файл
    вместе с перехватом клавиатуры.

	При  подключеном  манипуляторе  "мышь"  процедуры  модуля
    обращаются  к  соответствующему  драйверу  и   интерпритируют
    передвижение     "мышки"     как     нажатие      управляющих
    клавиш на функциональной клавиатуре.

       ТИПЫ ПЕРЕМЕННЫХ     

    StandartString  - STRING [ 79 ];
	-  Этот  тип  обьявлет  стандартную  строковую переменную
        длинной не более 79 символов.

    TextScreen = ARRAY [ 1..25, 1..80 ] OF RECORD
						 Ch : CHAR;
						 At : BYTE
					   END;
	-  Этот  тип  отпределяет  расположение  символов  и   их
          атрибутов  для  экранной  памяти  в  текстовом   режиме
          25 Х 80. Ch - символ; At - его цветовой атрибут.

       ТИПЫ ПРОЦЕДУР И ФУНКЦИЙ   

    LoadFunction = FUNCTION : BYTE;
	- Обьявляет байтовую загрузочную функцию.

    ControlFunction = FUNCTION : BOOLEAN;
	- Обьявляет универсальную управляющую функцию.

    RealFunction = FUNCTION ( x : REAL ) : REAL;
	- Обьявляет универсальную функцию вещественного
        аргумента.


    CheckEditFunc = FUNCTION ( VAR Stroka : StandartString ) :
                              BOOLEAN;
	- Функция контроля введенного строкового значения при
        экранном вводе и редактировании. Должна возвращать
        значение TRUE в случае успешного контроля и FALSE в
        случае ошибки.

    RunProcedure = PROCEDURE;
	- Универсальная процедура запуска.

    HelpEditProc = PROCEDURE ( VAR Stroka : StandartString );
	- Универсальная процедура подсказки для строковой
        заданной переменной.

       ПРОЦЕДУРЫ И ФУНКЦИИ - ЗАГЛУШКИ 

	Ниже  приведенные  процедуры  и  функции  выполняют  роль
    заглушек в программах использующих обьявленные типы  процедур
    и функций.

    NulLoadFunction : BYTE;
	- Возвращает нулевое значение.

    NulControlFunction : BOOLEAN;
	- Возвращает значение FALSE.

    NulRealFunction ( x : REAL ) : REAL;
	- Возвращает нулевое значение.

    NulCheckEditFunc ( VAR Stroka : StandartString ) : BOOLEAN;
	-  Возвращает  значение  TRUE,  передаваемую  строку   не
        изменяет.

    NulRunProc;
	- Не выполняет никаких действий.

    NulHelpEditProc ( VAR Stroka : StandartString );
	- Не выполняет ни каких действий, передаваемую строку  не
        изменяет.

       ПРОЦЕДУРЫ И ФУНКЦИИ ОПРОСА КЛАВИАТУРЫ 

	Для  того,  чтобы   использовать  возможности  пакета   в
    создании  демонстрационных  версий,  необходимо  использовать
    следующие процедуры и функции опроса клавиатуры.

    GetKey : CHAR;
	-  Вводит  символ  с  клавиатуры или из демонстрационного
        файла. Если установлен признак создания демонстрационного
        файла,  то  помимо  ввода  символа,  записывает введенный
        символ   в    демонстрационный   файл.    Аналогична    в
        использовании стандартной функции READKEY;


    SingKey : BOOLEAN;
	- Возвращает признак нажатия клавиши опрашивая клавиатуру
        или вводя его из демонстрационного файла. Если установлен
        признак создания  демонстрационного файла,  то записывает
        полученный признак в демонстрационный файл. Аналогична  в
        использовании стандартной функции KEYPRESSED.

    AnyKey;
	- Ждет нажатия  любой клавиши предварительно  погасив все
        предыдущие   нажатия   клавиш.   Если   установлен   флаг
        демонстрации просто дает временную задержку.

    HideKey;
	- Гасит нажатия клавиш клавиатуры, которые происходили до
        вызова этой процедуры.

       ПРОЦЕДУРЫ ПЕРЕНАЗНАЧЕНИЯ УПРАВЛЕНИЯ "МЫШКОЙ"  


	Следующие процедуры позволяют переназначить установленные
   модулем  Def  имитирующие  символы  при работе с манипулятором
   "мышь"

   SetLeftButton  ( Ch1, Ch2 : CHAR ); - имитирующие символы  при
	нажатии левой  кнопки. Значение  по умолчанию  : <Enter>,
        #0.

   SetRightButton ( Ch1, Ch2 : CHAR ); - имитирующие символы  при
	нажатии  правой  кнопки.  Значение  по  умолчанию  :  #0,
        < Insert >.

   SetMouseLeft   ( Ch1, Ch2 : CHAR ); - имитирующие символы  при
	перемещении манипулятора влево.  Значение по умолчанию  :
	#0, < Arrow Left >.

   SetMouseRight  ( Ch1, Ch2 : CHAR ); - имитирующие символы  при
	перемещении манипулятора пвраво. Значение по умолчанию  :
	#0, < Arrow Right >.

   SetMouseUp     ( Ch1, Ch2 : CHAR ); - имитирующие символы  при
        перемещении манипулятора вверх.  Значение по умолчанию  :
	#0, < Arrow Up >.

   SetMouseDown   ( Ch1, Ch2 : CHAR ); - имитирующие символы  при
        перемещении манипулятора  вниз. Значение  по умолчанию  :
	#0, < Arrow Down >.


       ПРОЦЕДУРЫ И ФУНКЦИИ РАБОТЫ С ТЕКСТОВЫМ ФАЙЛОМ   

	Эта  группа  процедур  и  функций  позволяет обрабатывать
    заданный текстовый файл как файл только для чтения. Однако  в
    случае  использования  этих   средств  становится   возможным
    включение текстового файла в состав демонстрационного файла.

    SetNameText ( Name : StandartString );
	-  Установить  имя  используемого  текстового файла. Если
        файл  не  существует,  то  DefResult  возвратит ненулевое
        значение.

    ReadText ( VAR Line : StandartString );
	-  Читает  строку  из  установленного текстового файла. В
        случае  ошибки  чтения  DefResult  возвращает   ненулевое
        значение.

    EofText : BOOLEAN;
	- Возвращает признак  конца текстового файла.  Аналогична
        по использованию стандартной функции EOF.

    CloseText;
	- Закрывает обработанный текстовый файл. В случае  ошибки
        функция DefResult возвращает ненулевое значение.

    DefResult : BYTE;
	-  Аналогична   по  использованию   стандартной   функции
        IORESULT в применении к используемому текстовому файлу.

       ПРОЦЕДУРЫ И ФУНКЦИИ УПРАВЛЕНИЯ ВВОДОМ 

	Следует сразу оговорить, что если не используются  вызовы
    процедур  SetMakeDemonstration  или  SetEmulation то программ
    пользователя  работает  в  нормальном  режиме  так  как будто
    используются обычные стандартные средства опроса клавиатуры и
    обработки текстовых файлов. Все "фокусы" начинаются с вызовом
    выше  указанных  процедур.  В  программе  может  быть вызвана
    только  одна  из  этих  двух  процедур,  причем  вызов должен
    происходить   до   первого   обращения   к   функциям   ввода
    определенным в модуле Def.

    SetMakeDemonstration ( Name : StandartString );
	- Создать демонстрационный файл с именем Name.

    SetEmulation ( Name : StandartString );
	- Использовать  файл с  именем Name  как демонстрационный
        для переназначения ввода с клавиатуры и текстовых файлов.

    CloseDef;
	-  Закрыть   демонстрационный  файл.   В  случае,    если
        предыдущие процедуры  использованны небыли  эта процедура
        не выполнит ни каких действий.


    SetWait ( Wait : WORD );
	-  Устанавливает  время  задержки  для  DELAY  в   режиме
        демонстрации.    Между    каждым    "нажатием"    клавиши
        производится вызов DELAY ( Wait ).

       СООБЩЕНИЯ ОБ ОШИБКАХ ВРЕМЕНИ ВЫПОЛНЕНИЯ   

	Все  ниже  приведенные  сообщения  об  ошибках  возникают
    только при работе с демонстрационным файлом.

    - Ошибка открытия демонстрационного файла.

    - Ошибка записи демонстрационного файла.

    - Ошиба чтения демонстрационного файла.

    - Ошибка синхронизации #1, модуль Def.

    - Ошибка синхронизации #2, модуль Def.