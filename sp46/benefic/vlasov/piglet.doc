                             ╔═════════════╗
                             ║ P I G L E T ║
                             ╚═════════════╝

    "PIGLET" - is a little resident program, which created for your
more better programming. If you want, you may read text, nexted follow,
but russian only. As I can, I translate only very needed information,
And I am sorry for many mistakes and errors in this text (may be, very
hard errors), but I don't say, that I've long speak english.
  And So, I begin . . .

  To Make PIGLET resident, you must type command "PIGLET" at any time.
Then PIGLET say any message on your screen and PIGLET now residented.

  To activate PIGLET press key [5] on numeric keypad (only when
Num Lock not lighted)

  PIGLET may work in three mode:
    ASCII mode,
    COLORS mode,
    KEYCODE mode

  in Any mode of PIGLET you may use next keys:

     <Alt-Up> or <Alt-Down> - change mode
     <Alt-Space> or <Space> - enter to Menu of select flush format
     <Esc>                  - return

     Note: in KEYCODE mode <Space> no work
           and to return you must press double <Esc>

   in Menu of select flush format you may press:
     <Up>,   <Down>,
     <Home>, <End>,
     <PgUp>, <PgDn> - move cursor
     <Space>        - select format at cursor location
     <Enter>        - accept selected format
     <Esc>          - cancel accept format and return back

   in ASCII mode (char selection):
     <Up>,   <Down>,
     <Left>, <Right>,
     <Home>, <End>,
     <PgUp>, <PgDn> - cursor movement
     <Enter>        - exit from PIGLET and enter selected char into text
     <Ctrl-Enter>   - enter select into text and return back to PIGLET
     <Ctrl-Up>,
     <Ctrl-Left>,
     <Ctrl-Right>,
     <Ctrl-Down>    - drawing to direction by selected character

  in COLORS mode (color select)
     <Up>,   <Down>,
     <Left>, <Right>,
     <Home>, <End>,
     <PgUp>, <PgDn> - cursor movement
     <Enter>        - insert color code into text (used current flush
                      format)

  in KEYCODE mode (review key codes)
     <5> on num. keypad - insert key code into text


  Follow I describe all available flush formats:

  1) A         - self character
  2) ^A        - or self character, or it Ctrl-analog
  3) 65 (dec)  - decimal character code
  4) #65       - decimal character code (for Turbo Pascal)
  5) 41 (hex)  - hexadecimal character code
  6) $41       - hexadecimal character code (for Turbo Pascal)
  7) 0x41      - hexadecimal character code (for C (See))
  8) \x41      - hexadecimal character code (for C (See))
  9) 041H      - hexadecimal character code (for assembler (TASM, MASM, etc.)

-----------------------------------------------------------------------------
Thah's all.

   This product is freewarest product, and may be copied, hou to kommercied
use, so and absolute free and unkommercied.

   If you understand russian, than you may read unical manual, which follow
downer.


-----------------------------------------------------------------------------

                             ╔═════════════╗
                             ║ P I G L E T ║
                             ╚═════════════╝



    PIGLET - это небольшая резидентная программка, призванная облегчить
некоторые рутинные процессы в нелегком, но интересном труде программиста.
Данная программа была создана, исходя из реальных потребностей и поэтому
каждый, кто решится ею пользоваться, найдет ее удобной и полезной для
себя.

    Если вы навестите своего (или может быть чужого) друга-программиста,
то вы наверняка увидите на его рабочем столе листы бумаги с распечатаными
на них разными текстами. Среди этого хлама можно найти известный бестсел-
лер программиста - книгу БРЯБРИНА, открытую в том месте, где автор книги
приводит таблицу кодов ASCII. Рядом могут лежать распечатки некоторых
статей Tech-Helpа, повествующих о том: какой клавише - какой код соответ-
ствует. Ну и, разумеется, потрепаные листки со сделаными от руки заметками
типа: Желтый-14, Синий-1 и т.п.
    Что скрывать. Такую картину могли наблюдать и мои друзья, приходя
ко мне в гости. Особенно активно я использовал книгу БРЯБРИНА. Дошло до
того, что я взял карандаш и вписал в каждую клеточку с символом ASCII его
десятичный код. Следующим нововведением, по видимому, было бы обклеивание
вышеуказанных страниц книги клейким полиетиленом, дабы листы, несущие
бесценную информацию, не ветшали и не трепались. Так бы оно и было, не
приди мне в голову блестящая идея.
    -Зачем ? -сказал я себе,- мне нужна эта груда бумаги ?
    -Да ни зачем !- ответил я сам себе и сел писать программу.

    Через несколько дней первая версия программы была готова. Делала
она немного. При нажатии на клавишу <Alt-Z> на экране появлялось окно.
На нем в шестнадцать рядов по шестнадцать символов красовались все
символы ASCII, начиная с символа с кодом 0, и кончая символом с кодом
255. Тут же отображался курсор желтого цвета в виде двух стрелок окру-
живших один из символов. С помощью клавиш стрелок я подводил курсор к
нужному мне символу и нажимал клавишу <Enter>. Окно тут же исчезало,
а выбраный символ вставлялся в текст.
    Программа оказалась настолько удобной, что на следующий день я
вставил в нее выбор цветов. Выбор цветов вызывался нажатием клавиши
<Alt-H>. Затем на экране появлялось окно с полной гаммой цветов.
Выбрав курсором цвет, я нажимал клавишу <Enter> и моя программа встав-
ляла в текст число в символьном виде. Число это соответствовало коду
выбраного мной цвета. Так, например, если я выбирал цвет Желтый на
синем фоне то программа вставляла в тескт последовательность: "$1e"
где символ "$" означает шестнадцатиричную систему счисления, при-
нятую в системе Turbo-Pascal.
    Программа оказалась настолько удобной, что я вставил в нее вывод
заставки с копирайтами, дал ей имя "ASCII.COM" и роздал друзьям для
ограниченного пользования.
    Затем долгое время программа не изменялась и активно использова-
лась. В результате выявились мелкие пожелания по улучшению и крупное
пожелание по вставке в программу третьего модуля для оперативного про-
смотра кодов клавиш. В течении недели программа была полностью пере-
писана и отработана. Результат чего вы и можете наблюдать.

    Что касается настояшей версии программы:

    Что бы повесить программу резидентной, лучше всего скопировать файл
"PIGLET.COM" в корневой каталог и включить в файл "autoexec.bat"
команду "piglet". Если же вы не хотите добавлять что либо в стартовый
командный файл, то просто запустите программу.
    Для того что бы вызвать резидентную программу нажмите клавишу 5
на дополнительной цифровой клавиатуре:                            │
  ┌───────────────────────────────────────────────────────────────┘
  │    ╔═══╦═══╦═══╦═══╗ █
  │    ║ 7 ║ 8 ║ 9 ║   ║ █
  │    ╠═══╬═══╬═══╣ + ║ █
  └────╫─4─╫─5 ║ 6 ║   ║ █
       ╠═══╬═══╬═══╬═══╣ █
       ║ 1 ║ 2 ║ 3 ║   ║ █
       ╠═══╩═══╬═══╣  │║ █
       ║   0   ║ . ║ <┘║ █
       ╚═══════╩═══╩═══╝ █
      ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀

    При этом на экране появится окно одного из трех режимов:

  -выбор символа         (ASCII mode)
  -выбор цвета           (COLOR mode)
  -просмотр кодов клавиш (KEY mode)


                 1. Выбор символа (ASCII mode).


    В этом режиме на экран выводятся все символы по возрастанию кодов
слева-направо и сверху-вниз. Один из символов является текущим и окру-
жен двумя желтыми треугольниками. Два этих треугольника называются
курсором. Для передвижения курсора используйте клавиши стрелок, а так-
же клавиши: <Home>, <End>, <PgUp> и <PgDn>.
    Что бы вставить текуший символ в текст нажмите клавишу <Enter>.
При этом окно PIGLETа уберется с экрана, а выбраный вами символ кор-
ректно вставится в текст (так-же, как если бы вы нажали некую клавишу,
шлющую этот код), независимо от того, в каком редакторе вы находитесь.
Что бы возвратиться в среду PIGLETа, снова нажмите клавишу <5>.
    Если вы нажмете клавишу <Ctrl-Enter> вместо <Enter>, то после
вставки символа в текст, PIGLET автоматически вернет вас в свою среду.
    Если же вы не хотите вставлять никакой символ, то просто нажмите
клавишу <Esc> или <Ctrl-[>.
    Если вы хотите посмотреть, что твориться под PIGLETовским окном,
нажмите клавишу <Back> (Варианты: <Забой>, <BackSpace>, < <- >). Окно
PIGLETа тут же уберется с экрана и покажет, что было под ним. Вы даже
можете подумать, что вы вышли из среды PIGLETа. Но это не так ! Нажмите
любую клавишу, и вы убедитесь, что вы опять в родной среде PIGLETа.
    Если вы хотите вывести какой-либо символ много раз подряд, например,
если вы хотите начертить горизонтальную линию символом "─", то вам нео-
бязательно сто раз входить в PIGLET. Просто войдите в PIGLET, выберите
нужный символ и нажмите <Ctrl-Right> столько раз, сколько вам нужно.
Надо сказать, что вы можете нажимать не только <Ctrl-Right>, но и
<Ctrl-Left>, равно как и <Ctrl-Up> с <Ctrl-Down>ом. При этом PIGLET
кроме вставки символа в текст будет эмулировать нажатие клавиш стре-
лок для редактора, которым вы пользуетесь, и рисование символа будет
делаться в соответствующую сторону.
    Во время всех этих манипуляций окно PIGLETа будет убрано, дабы
не раздражать глаз своим мельканием. Но несмотря на то, что PIGLETов-
ского окна не будет, вам необходимо помнить, что на самом деле вы на-
ходитесь в среде PIGLETа и нажатие любой клавиши кроме <Ctrl со стре-
лочкой> да еще <Esc> вызовет возврат в среду PIGLET. Нажатие клавиши
<Esc> вызовет возврат в ваш редактор и визуально не наблюдается.
    Было бы полезно перед подобными манипуляциями отключать режим
вставки, иначе при рисовании в левую сторону возможны нежелательные,
но предвиденные эффекты.
    Бывают случаи, когда в текст необходимо вставить не сам символ, а,
например, его код. Если вы нажмете клавишу пробела, то вашим глазам
предстанет меню выбора формата вывода символа.
    В данной версии существуют следующие девять форматов вывода:

   1) A  - в текст будет вставлен сам символ

   2) ^A - если код символа больше или равен чем код пробела (32), то
           этот формат полностью аналогичен первому; в противном
           случае символ будет вставлен в текст в виде последовательности
           вида ^?, где заместо вопроса будет стоять соответствующий
           Ctrl символ (например, если вы выбрали символ "сердечко" с
           кодом 3, то в текст вставится последовательность "^C"

   3) 65 (dec) - в текст будет вставлена последовательность, эквивалентная
                 коду, преобразованому в строку (в десятичной системе счис-
                 ления)

   4) #65      - алалогично третьему формату но сначала пойдет символ "#".
                 Только для тех, кто програмирует на Turbo-Pascalе

   5) 41 (hex) - аналогично третьему формату, но в шеснадцатиричном виде

   6) $41      - 5) для Turbo-Pascalистов

   7) 0x41     - 5) для тех, кто програмирует на C, C++ и т.п.

   8) \x41     - кто програмирует на C, тот знает, а остальным не надо

   9) 041H     - для тех профессионалов, которые отваживаются писать на
                 языке самого низкого уровня - языке ассемблера


    Меню имеет следующий вид:

                       █▀▀▀▀▀▀▀▀▀▀▀▀▀▀█
                       █ (o) A        █
                       █ ( ) ^A       █
                       █ ( ) 65 (dec) █
                       █ ( ) #65      █
                       █ ( ) 41 (hex) █
                       █ ( ) $41      █
                       █ ( ) 0x41     █
                       █ ( ) \x41     █
                       █ ( ) 041H     █
                       █▄▄▄▄▄▄▄▄▄▄▄▄▄▄█

    С помощью стрелок вверх и вниз подведите мигающий курсор к нужному вам
формату и нажмите пробел. Кругляшок перекочует в позицию курсора. Затем
нажмите <Enter> что бы принять выбраный формат. Либо <Esc>, если вы пото-
ропились менять формат вывода.




                   2. Выбор цвета (COLOR mode).



    В этом режиме на экране располагается полный набор всех комбинаций
цветов фона и символа. Слева-направо возрастает цвет фона, а сверху-вниз
- цвет символа. Так же как и в ASCII mode вы выбираете цвет при помощи
курсора, вставляете код выбраного цвета в текст с помощью <Enter> а воз-
вращаетесь по <Esc>. Выбрать формат вывода можно, нажав клавишу пробела.

    Код цвета занимает один байт и получается следующим образом:

  -младшие четыре бита (с 0-го по 3-ий) - это цвет символа
  -старшие четыре бита (с 4-го по 7-ой) - цвет фона

  ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄
  █ 0 │ 0 │ 0 │ 1 █ 1 │ 1 │ 1 │ 0 █      байт = 00011110 bin
  ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀           = 1E hex
    │           │   │           │             = 30 dec
    └─────┬─────┘   └─────┬─────┘
          │               └────────────  мл. биты = 1110 bin
          │                                       = E hex
          │                                       = 14 dec
          │                                       = желтый
          │
          └────────────────────────────  ст. биты = 0001 bin
                                                  = 1 hex
                                                  = 1 dec
                                                  = синий

    Итого получилось, что коду 1E hex (30 dec) соответствует комбина-
ция - желтые буквы на синем фоне.

    3. Просмотр кодов клавиш (KEY mode)

    Этот режим позволит вам оперативно, т.е. без выхода в ДОС и запуска
специальных программ просмотреть коды всех клавиш, во всех их мыслимых
(Ctrl-, Alt-, Shift- и т.д.) и немыслимых (???) комбинациях.

    Все, что вам неоходимо делать в этом режиме - это давить кнопки и
лицезреть результаты этих надавов. Вся исчерпывающая информация об на-
давленых кнопках будет у вас перед глазами.

    Поскольку вы можете захотеть просмотреть коды таких клавиш, как
<Enter>, <Esc> и пробел, то управлять PIGLETом в этом режиме вам при-
дется при помощи необычных кнопок и их комбинаций.
    <5> на дополнительной клавиатуре - вставит код клавиши в текст
    <Alt-SPACE> (то бишь Alt-ПРОБЕЛ) - выбор формата вывода
    Что бы выйти из PIGLETа, в этом режиме нажмите два раза <Esc>

    По поводу клавиш <Ctrl-Up> и <Ctrl-Down> обольщаться не стоит,
так как коды 5FF hex и 6FF hex они шлют только в среде PIGLETа, а в
других средах они, как правило, кодов вообще не шлют.

-------------------------------------------------------------------

    У читателя уже, наверное, давно крутиться в голове вопрос:
    - А как же режимы-то переключать ?
Отвечаю:
    - Переключайте режимы клавишами <Alt-Up> и <Alt-Down>


   Ну вот и все, пожалуй.

-------------------------------------------------------------------
Немного интересной информации:

   Программа PIGLET полностью написана на языке ассемблера.

   Резидентная часть занимает восемь с небольшим килобайт.
   Перехватываются два прерывания: 9 и 16h
   Для регистрирования резидентной части используется 31h-ая функция ДОС.

   При вызове резидентной части анализируются тип видеоадаптера и
   номер текущей видеостраницы.

    Во время написания программы была создана неплохая библиотека для
ассемблера по работе с экраном, клавиатурой, и преобразованию чисел в
символьный вид.

    Сам я программирую в среде Turbo Pascal и имею неплохую библиотеку
для реализации задач самого различного направления.

    Для лиц, считающих себя профессионалами, и не программирующих на
СУБД, предлагаю телефон в городе Уфе для контакта: (8-347-2) 32-79-88

    Буду благодарен за ошибки, найденные в моей программе.
    Программа может копироваться безо всяких ограничений и бесплатно.
    Автор и исполнитель: М. Власов

------------------------------------------------------------------------
                               ПРИЛОЖЕНИЯ
------------------------------------------------------------------------

ПРИЛОЖЕНИЕ 1. Форматы вывода

  1) A         - сам символ
  2) ^A        - сам символ или Ctrl-аналог
  3) 65 (dec)  - код символа в дес. виде
  4) #65       - код символа в дес. виде (для Turbo Pascal)
  5) 41 (hex)  - код символа в шест. виде
  6) $41       - код символа в шест. виде (для Turbo Pascal)
  7) 0x41      - код символа в шест. виде (для C (Си))
  8) \x41      - код символа в шест. виде (для C (Си))
  9) 041H      - код символа в шест. виде (для ассемблера)

ПРИЛОЖЕНИЕ 2. Перечень задействованных клавиш
  1) при неактивном PIGLETе:
     <5> на доп.клав. - вызов PIGLETа

  2) во любом режиме PIGLETа:
     <Alt-Up> или <Alt-Down>   - сменить режим
     <Alt-Пробел> или <Пробел> - выбор формата вывода
     <Esc>                     - выход

     примечание: в режиме KEY mode <Пробел> не работает
                 а для выхода надо нажать <Esc> два раза

  3) в меню выбора формата вывода:
     <Up>,   <Down>,
     <Home>, <End>,
     <PgUp>, <PgDn> - перемещение курсора
     <Пробел>       - выбрать формат в позиции курсора
     <Enter>        - принять выбраный формат
     <Esc>          - отменить выбор формата

  4) в режиме ASCII mode (выбор символа)
     <Up>,   <Down>,
     <Left>, <Right>,
     <Home>, <End>,
     <PgUp>, <PgDn> - перемещение курсора
     <Enter>        - выйти и вставить символ в текст
     <Ctrl-Enter>   - вставить символ в текст и возвратиться в PIGLET
     <Ctrl-Up>,
     <Ctrl-Left>,
     <Ctrl-Right>,
     <Ctrl-Down>    - рисовать символом в соответствующем направлении

  5) в режиме COLOR mode (выбор цвета)
     <Up>,   <Down>,
     <Left>, <Right>,
     <Home>, <End>,
     <PgUp>, <PgDn> - перемещение курсора
     <Enter>        - вставить код цвета в текст

  6) в режиме KEY mode (просмотр кодов клавиш)
     <5> на доп.клав. - вставить код клавиши в текст

ПРИЛОЖЕНИЕ 3. Устраненые ошибки

    Сразу же после того, как первая версия программы была запущена в исполь-
зование, выявился ряд ошибок и пожеланий, в результате чего программа была
переработана.
    1) Первая версия программы вызывалась принажатии на клавишу [5] на до-
полнительной цифровой клавиатуре независимо от того, горел-ли индикатор
[Num Lock], или же нет, что начисто лишало любителей дополнительной циф-
ровой клавиатуры вводить цифру 5. В данной версии эта ошибка исправлена.
    2) Оказалось, что PIGLET не совсем корректно работает в некоторых средах,
(например Norton Editor). Некорректность выражалась в том, что после вызова
PIGLETа и последующего возврата прикладная программа из которой его вызывали
переставала реагировать на нажатия клавиш (даже таких, как Num Lock). Но это
не мешало вызывать самого PIGLETа. В данной версии эта ошибка устранена, хотя
в пресловутом Norton Editor`е PIGLET все равно работает не совсем верно. Так,
например, если попробовать вывести номер цвета в редактор выводится только
первый символ, а остальные проглачиваются. Естественно, что тут виноват толь-
ко пресловутый Norton Editor.
    3) В ходе исправлений была несколько переработана внутренняя структура
программы, и я надеюсь, что эта переработка скажется только в лучшую сторону,
но никак не в худшую.






