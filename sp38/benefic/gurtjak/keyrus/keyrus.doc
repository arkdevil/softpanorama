                   ╔═══════════════════════════════════╗
                   ║    Драйвер дисплея и клавиатуры   ║
                   ║            KEYRUS  V6.2           ║
                   ╚═══════════════════════════════════╝

   KEYRUS - это драйвер клавиатуры и дисплея для IBM PC-XT/AT, PS-2 и 
совместимых компьютерах, оборудованными видеоадаптерами EGA, VGA и 
совместимых с ними. Частично поддерживается CGA, MDA и др.

   Драйвер является самым компактным из всех, которые мне известны.
В зависимости от конфигурации он может занимать от 900 байт до 7.5 К.
(Например BETA занимает более 20 К оперативной памяти)
   Возможна полная поддержка символов пользователя во всех стандартных
(0-13h) видеорежимах с любым разрешением.
   KEYRUS был изначально задуман, как драйвер-русификатор но в текущей 
версии его можно настроить на любую клавиатуру пользователя и на любой
национальный шрифт, будь то украинский, белорусский или любой другой.
   Программа очень легко настраивается на любой, даже самый прихотливый
вкус пользователя. Текущая версия драйвера (6.2) поддерживает 24 
различных ключа, с помощью которых можно составить бесчисленное 
множество вариантов конфигурации в зависимости от вкуса пользователя и 
требований о объеме занимаемой памяти.

   Наберитесь, пожалуйста терпения и прочитайте длинный список всего, 
чего может программа KEYRUS (и это все занимает до 7.5К памяти !)

            Можно указать любой шрифт, указав файл с кодировкой рисунка 
         букв, который можно получить с помощью популярного редактора 
         фонтов EVAFONT или подобных ему.
            Можно изменить расположение русских букв на клавиатуре, 
         также поддерживается дополнительные символы (обычно это
         псевдографика), а также можно изменить расположение букв
         и на английской клавиатуре.
            Можно изменить стандартную клавишу переключения РУС/ЛАТ на 
         любую другую а также можно разделить клавиши включения и 
         выключения режима РУС.
            Можно настроить на любой способ индикации текущего регистра
         РУС/ЛАТ - цветом рамки, потрескиванием клавиш, звуком разной 
         частоты при переключении регистра, лампочкой на клавиатуре.
           Драйвер рассчитан на работу с компьютерами с EGA,VGA 
         и совместимыми с последними, но может поддерживать и CGA, MDA, 
         Herc если русский шрифт "вшит" в ПЗУ компьютера.  
            Можно настроить драйвер на поддержку графических режимов
         (см. ключи /ALL,/128) Это необходимо при работе с редактором
         WORD 5.0 в графическом режиме.
            Мне попадались компьютеры с VGA и зашитым русским шрифтом.
         можно указать опцию /ROM и программа будет занимать всего 1К.
            Конфигурация драйвера может очень гибко изменяться.  
         К примеру, если я не работаю в режиме 80x50 и мне не нужны 
         русские буквы в графике, зачем мне держать в памяти шрифт 
         для знакогенератора 8x8. Достаточно ввести при запуске опцию 
         /8x8=off и мы сэкономим 1К памяти. (подробнее см. описание ключей) 
            KEYRUS поддерживает шрифты 8x8, 8x14, 8x16.
            Для того, чтобы не набирать каждый раз при запуске все 
         ключи, достаточно набрать их один раз и в конце командной
         строки добавить /SAVE - ваша конфигурация станет теперь по 
         умолчанию. Текущую конфигурацию можно посмотреть, набрав
         KEYRUS /?
            Некоторые параметры можно менять, не выгружая драйвер из 
         памяти. Конкретнее см. описание ключей.
            Драйвер можно выгрузить из памяти с помощью ключа /RELEASE
         или программой RELEASE.
            При использовании драйвера на клавиатуре без проблем 
         набираются такие символы, как русское "р" и др. (За 
         исключением программы Norton Commander, которая работает в 
         этом отношении несколько некорректно - она просто отбрасывает 
         символ "р", введенный с клавиатуры. Можно очень просто 
         исправить этот недостаток - см. примечание в конце 
         документации)
            Также в драйвер вставлены и некоторые сервисные функции -
         можно увеличить буфер клавиатуры, отключить Scroll Lock при 
         загрузке, изменить скоростные параметры клавиатуры AT и др.
            Можно управлять работой драйвера из программы пользователя 
         (подробнее см. дальше)

            Этот список возможностей драйвера далеко не полон, он лишь
         дает общее представление о программе. 

Маленькое дополнение для программистов
---------------------------------------------------------------------
   В KEYRUS'е использованы ряд оригинальных алгоритмов, которые не 
встречались мне ранее.
     1. Если включен режим /compress, то весь фонт в теле драйвера
        при запуске упаковывается (процентов на 40) и при загрузке
        используется шрифта используется процедура, которая используя
        обращение к портам EGA/VGA непосредственно распаковывает 
        шрифт прямо в память знакогенератора. Разумеется в этом режиме
        не поддерживается графический режим т.к. BIOS требует указатель
        на неупакованный шрифт. 
        -- Авторское право на этот алгоритм принадлежит 
        Царенко П.(г.Донецк, ДонГУ)

     2. Вы наверное заметили, что KEYRUS.COM занимает почти 
        17К.  На самом деле драйвер представляет собой конгломерат 
        процедур на все случаи жизни, шрифтов, клавиатур и др. При 
        запуске программы он себя переписывает в более старшие адреса, 
        а затем считывает конфигурацию пользователя и начинает строить
        тело драйвера в памяти из процедур, кусков фонтов (возможно 
        упаковав их при этом) и т.д., в общем всего того, что надо
        пользователю, не оставив ни одного лишнего байта в памяти.
------------------------------------------------------------------------
Замеченные недостатки
---------------------
  1. На VGA в режиме 640x350 используется не шрифт 8x14, а 8x16.
     Это иногда (довольно редко) может приводить к не совсем корректному
     изображению русских букв. Для того, чтобы исправить это - надо было
     одновременно держать в памяти не 2 шрифта, а 3. Это увеличит размер
     драйвера в памяти на 3.5К. Стоит ли? Эта ситуация возникает довольно
     редко.
  2. Мне встречались нестандарные EGA, про которые Нортон при нажатии
     Alt+F9 говорил, что это не EGA. Драйвер Бунича там работает, а мой
     нет (пока). Работы в этом направлении ведутся.
  3,4... ???

О всех обнаруженных недостатках прошу сообщать автору программы.

				Гуртяк Дмитрий Александрович
				340048 г. Донецк ул. Артема 147 "г" кв. 23
                                тел. 55-78-52 (в Донецке)

			   Запуск драйвера
			   ───────────────

        KEYRUS < список ключей >

   Возможные ключи : (подробное описание каждого ключа см. дальше)
      /?                        - узнать текущую конфигурацию по 
                                  умолчанию.
      /SAVE                     - сохранить изменения конфигурации
      /COLOR=<цвет>             - указать цвет рамки.  
      /FONT=<файл>              - загрузить пользовательский фонт.
      /KEYS=<файл>		- загрузить пользовательскую клавиатуру.
      /GRAPH=<флаг>		- определить переключатель псевдографики.
      /SCAN=<скэнкод>		- определить клавишу для переключения Рус\Лат.
      /ROM			- указать на зашитый в BIOS фонт.
      /128			- указать на конфигурацию 128 символов.
      /ALL			- указать на конфигурацию всех символов.
				  ( Необходим для работы в  редакторе Word
                                    В графическом режиме )
      /BEEP                     - звуковой сигнал при переключении
      /CLICK                    - потрескивание клавиатуры в режиме Рус.
      /LAMP			- Индикация руского режима лампочкой Scroll Lock
      /LAT=<скэнкод>            - Определить клавишу для переключения на Лат.
      /RUSSIAN                  - Указать на конфигурацию только русских символов.
      /COMPRESS                 - Сжатие символов (см. дальше)
      /8x8                      - Ключ позволяет не грузить символы 8x8
      /SWITCH=....              - Указать на возможность временной приостановки
				   работы драйвера по нажатию клавиши.
      /INTERFACE                - Позволяет сэкономить немного памяти,
                                  если не используется программный интерфейс.
      /BASE_KEYS                - Поддержка клавиатуры и в английском режиме.
      /RANGE=....               - Определить символы, отличающиеся от
				  стандартных.
      /BUFFER                   - Большой буфер клавиатуры.
      /FAST                     - На AT повышенная скорость клавиатуры.
      /RELEASE                  - Выгрузить KEYRUS из памяти.

	Все параметры можно указывать в произвольном порядке.
	Все ключи могут иметь расширение =ON или =OFF

	например :	KEYRUS /color=12
			KEYRUS /keys=kbd /graph=12 /switch=off
			KEYRUS /color=16 /font=vga.fnt /all /scan=58

		Более подробное описание ключей драйвера.
		─────────────────────────────────────────

1. Ключи, позволяющие определить признак русского регистра (рамка и др.)

   /Color=<цвет>   - указать цвет рамки в русском режиме клавиатуры.
   ─────────────     По умолчанию - 1 ( синий ).
	Для адаптера EGA от 0 до 63, для CGA от 0 до 15,
	для VGA от 0 до 256, для монохромных адаптеров рамка не
	отображается.
        Если указан =0 или =off , то рамка не появляется, при этом драйвер
	занимает меньше памяти. Этот параметр можно менять в процессе работы,
        если при загрузке рамка была разрешена.

   /BEEP           - Если указан этот ключ, то при переключении режимов
   ─────             Рус/Лат раздается звуковой сигнал. Если произошло
       переключение на русский режим - частота сигнала высокая, если на
       латинский - частота низкая. Если /beep=on или /beep, то драйвер
       будет занимать на 100 байт больше.
       В процессе работы можно только отключить этот параметр /beep=off
                Например : KEYRUS /beep /color=off
                           При переключении режимов раздается звуковой сигнал,
                           и рамка отключена.

   /CLICK          - Если указан этот ключ, то в режиме Русской клавиатуры
   ──────            при нажатии на клавиши будет слышно тихое потрескивание.
       В этом случае драйвер будет занимать чуть больше памяти.
       Рекомендуется для компьютеров с монохромным дисплеем.
       В процессе работы можно только отключить этот параметр /click=off

		Например : KEYRUS /beep /click

   /LAMP           - Индикация русского режима лампочкой Scroll Lock на
   ─────             клавиатуре. Этот ключ работает корректно только на
		     клавиатуре AT.
       Побочный эффект : при работе в Turbo Debugger 1.5 (и возможно, некоторых
       других программ) переключение режимов Рус/Лат будет создавать тот-же
       эффект, как нажатие клавиши Scroll Lock - Включается режим "буксировки"
       текущего окна.
       В процессе работы можно только отключить этот параметр /lamp=off


2. Ключи, позволяющие переопределить клавиши переключения.

   /Graph=<флаг>   - Используется для переопределения клавиши, переключающей
   ─────────────     в режим набора символов псевдографики. В русском
	режиме при нажатии указанной клавиши смещения генерируются символы
	псевдографики. По умолчанию используется клавиша Alt.

		     Возможные ключи :
			 1 : Нажата правая клавиша Shift
			 2 : Нажата левая клавиша Shift
			 4 : Нажата клавиша Ctrl
			 8 : Нажата клавиша Alt ( по умолчанию )
			16 : Режим Scroll Lock
                 	32 : Режим Num Lock
			64 : Режим Caps Lock
		       128 : Режим Ins

		 Допустимы любые комбинации указанных ключей.
	Например если указать ключ 12 ( 12=8+4 ), то псевдографика
	будет генерироваться при одновременном нажатии Ctrl и Alt.
	Если указан 255, то псевдографика никогда не будет
	генерироваться.  Не рекомендуется указывать для этой цели
	клавиши Shift или Caps Lock, т.к. они используются для
	переключения на заглавные буквы. Также не рекомендуется
	клавиша Scroll Lock, если вы используете /LAMP.
	  Пример : KEYRUS /graph=32
        Рекомендуются значения 16 (Scroll Lock) или 32 (Num Lock).

        Если введен ключ /graph=off , то дополнительная клавиатура будет
        отключена и драйвер будет занимать на 100 байт меньше памяти.
	Этот ключ можно свободно менять в процессе работы.

   /Scan=<скэнкод> - Переопределить клавишу переключения Рус/Лат.
   ───────────────   По умолчанию - 54 ( right SHIFT ).
	     При использовании для этой цели клавиш  Capslock ( 58 ),
	     Numlock ( 69 ) или ScrollLock ( 70 ) для фиксации режимов
	     CapsLock, NumLock или ScrollLock соответственно, надо нажать
	     эту клавишу + SHIFT.
	     Для определения для этой цели клавиш, присутствующих только
	     на расширенной клавиатуре можно добавить к концу числа
	     символ "e".
	     Таблица кодов клавиатуры дана в приложении.

	     Примеры :
 		 KEYRUS /scan=29e       Определяет клавишу  'Right Ctrl'
					на клавиатуре AT.
		 KEYRUS /scan=29	Определяет клавишу  'Left Ctrl'.
					( как видно, ключ /ext не указан )
		 KEYRUS /scan=56e       Определяет клавишу  'Right Alt'
					на клавиатуре AT.
	Этот ключ можно свободно менять в процессе работы.


   /LAT=<скэнкод>   - Этот ключ позволяет пользователю иметь различные
   ──────────────     клавиши для включения режимов Лат. и Рус.
	Использование этого ключа аналогично ключу /Scan
	При этом клавиша определенная через /scan будет переключать
	только в русский режим.
	 По умолчанию /lat=off
		Например :
                 KEYRUS /lat=42
                     ;Рус - Right Shift, Лат - Left Shift
		 KEYRUS /scan=29e /lat=29
		     ;Рус - Rigth Ctrl , Лат - Left Ctrl
		 KEYRUS /scan=29e /lat=56e
		     ;Рус - Rigth Ctrl , Лат - Right Alt
	Этот ключ можно свободно менять в процессе работы.

   /SWITCH [ =<scancode>,<shift> ]  - Этот ключ определяет клавишу,
   ───────────────────────────────    нажатием которой можно переключаться
	между символами драйвера (русскими) и символами, которые "зашиты"
	в ПЗУ. По умолчанию /switch=off
	Если клавиша не определена, подразумевается Alt+Tab ( /switch=15,8 )
	Scancode - Скэн код клавиши (см. приложение).
		   Внимание! нельзя указывать коды с расширением "e"
	Shift    - Код клавиши смещения ( коды описаны выше в параметре /GRAPH )

		Например :
		 KEYRUS /switch=87,4      - клавиша Alt + F11


   /Base_Keys	   - Этот ключ расширяет клавиатуру пользователя на английский
   ────────────	     режим. Это позволяет переопределить клавиши на
                     нестандартные, или наоборот - стандартные на нестандартной
	 клавиатуре.  По умолчанию /base_keys=off
	 Этот ключ нельзя динамически переопределять.


   /Keys=<файл>	   - Загрузить файл с клавиатурой пользователя.
   ────────────	     вы можете задать расположение клавиш, отличное
	от стандартного. Размер файла - 318 или 212 байт.
	Файл состоит из 6-ти или из 4-х равных частей, каждая из которых задает
	кодировку для 4-х клавиш смещения в русском режиме и английских клавиш
        (если /base_keys=on) :
		< нет смещения >
		SHIFT
		клавиша включения псевдографики ( Alt )
		SHIFT + клавиша включения псевдографики ( Shift + Alt )
		English
		Shift + English
        Если в файле встречается символ 0FFh, то это означает, что символ
        с данным скэн-кодом драйвером не обрабатывается ( например клавиши
        Ctrl, Left Shift и др. )

         Например, файл KBD задает следующее размещение клавиш.

          <Shift>                         <Alt+Shift>       <Alt>
       !":/%,.?()_+    1234567890-=      !":/%,.?()_+    1234567890-=
       ЯВЕРТЫУИОПШЩ    явертыуиопшщ      ╔╦╗╒╤╕█▄▌▐      ┌┬┐╓╥╖│─║═
       АСДФГХЙКЛ:"Ч    асдфгхйкл;'ч      ╠╬╣╞╪╡▀■¤       ├┼┤╟╫╢░▒▓
       ЪЗЮЦЭБНМьЬЖ     ъзюцэбнм,.ж       ╚╩╝╘╧╛№         └┴┘╙╨╜√

         Если файл не указан, используется стандартное размещение клавиш.
       ( это расположение продублировано в файле KEYBOARD )

           <Shift>                      <Alt+Shift>       <Alt>
       !":/%,.?()_+    1234567890-=     !":/%,.?()_+    1234567890-=
       ЙЦУКЕНГШЩЗХЪ    йцукенгшщзхъ     ╔╦╗╒╤╕█▄▌▐      ┌┬┐╓╥╖│─║═
       ФЫВАПРОЛДЖЭ~    фывапролджэ`     ╠╬╣╞╪╡▀■¤       ├┼┤╟╫╢░▒▓
       |ЯЧСМИТЬБЮЁ     \ячсмитьбюё      ╚╩╝╘╧╛№         └┴┘╙╨╜√

       !@#$%^&*()_+    1234567890-=
       QWERTYUIOP{}    qwertyuiop[]
       ASDFGHJKL:"~    asdfghjkl;'~
       |ZXCVBNM<>?     \zxcvbnm,./

	 Этот ключ нельзя динамически переопределять.

3. Ключи, позволяющие переопределить шрифты, определить режим работы.


   /Font=<файл>	   - Загрузить файл со шрифтом пользователя.
   ────────────	     допустимы фонты 3-х типов :
	8x8  ( CGA )   размер файла 2048 ( файлы CGA.FNT, CGA1.FNT )
	8x14 ( EGA )   размер файла 3584 ( файлы EGA.FNT, EGA1.FNT, BETA.FNT )
	8x16 ( VGA )   размер файла 4096 ( файлы VGA.FNT, VGA1.FNT )

        Файлы фонтов очень удобно редактировать программой EVAFONT.
        Имя файла не имеет значения, главное чтобы была корректной его длина.
	Можно одновременно загрузить 2 файла :
	Например : keyrus /font=cga.fnt /font=ega.fnt загружает
	один файл для фонта 8x8, другой - для фонта 8x14.
	При запуске драйвера фонт 8x8 грузится всегда, а из фонтов
        8x14 и 8x16 грузится только один, в зависимости от видеоадаптера
        ( EGA - 8x14, VGA - 8x16 ).

	 Этот ключ нельзя динамически переопределять.


   /ROM		   - Используется на компьютерах с адаптерами EGA или VGA,
   ────	     	     у которых рисунок русских символов "зашит" в BIOS.
   	Если параметр указан, то при запуске грузится только драйвер
	клавиатуры, и драйвер в памяти занимает гораздо меньше памяти.
          ВНИМАНИЕ! Этот параметр не запоминается - его надо указывать
                    каждый раз в командной строке.

   /128		   - Если указан этот ключ, то драйвер будет подгружать
   ────		     не только русские символы, а все 128 последних
   	символов таблицы ASCII. При этом драйвер занимает в памяти 4-5
	килобайт.
	В этом режиме символы кириллицы поддерживается в текстовых
	режимах и в графических режимах CGA ( 4,5,6 ).

   /ALL		  - Если указан этот ключ, то драйвер будет подгружать
   ────		    не только русские символы, а всю таблицу
	кодов ASCII. При этом драйвер занимает в памяти 6-8 килобайт.
	В этом режиме символы кириллицы поддерживаются во всех текстовых
	и графических режимах.

   /RUSSIAN       - Этот режим включен по умолчанию. При этом драйвер
   ────────         подгружает только русские символы ('А'-'п','р'-'ё').
	Обычно не указывается, кроме случаев, когда состояние драйвера было
	сохранено с альтернативными ключами /rom , /128 или /all.
	Этот ключ автоматически включает /compress=on
        Ключ /russian работает как макрокоманда.
        KEYRUS интерпретирует его как команду :  
        /range=128-175,224-241 /compress=on

   /RANGE= <начало_1>-<конец_1>,<начало_2>-<конец_2>
   ─────────────────────────────────────────────────
        - Эта команда является обобщением команды /russian. При этом вы
	должны указать 2 промежутка для символов, которые будут загружаться.
	Промежутки задаются в виде первого и последнего кода символов в
	промежутке.
	Все параметры обязательны. Если вам нужен 1 промежуток, разбейте его
	на 2 прилегающих.
             Пример :
              KEYRUS /range=128-175,224-239
                ; выбросить буквы 'ё' и 'Ё'

    /8x8        - Этот ключ позволяет исключить из загрузки символы 8x8
    ────          для этого надо указать /8x8=off (по умолчанию /8x8=on),
	т.е. на EGA/VGA русских символов не будет в режиме 43/50 строк.
	  Если вы не работаете с русскими символами в графике и в режимах 43/50
	то рекомендуется использовать этот ключ.
	При этом драйвер будет занимать существенно меньше памяти.
	Если этот ключ используется в режиме /128, то в графических режимах
	русских символов не будет.
	Если ключ используется в режиме /ALL, то русские символы грузятся
	в режимах 640x350,640x480 и не грузятся в режимах 320x200,640x200.

    /COMPRESS   - Этот ключ переключает между 2-мя алгоритмами загрузки
    ─────────     символов.
	  Первый (/compress=off) выполняет загрузку шрифта, используя BIOS
	  Второй (/compress=on) алгоритм хранит в драйвере шрифты в сжатой
	примерно в 2 раза форме и KEYRUS занимает намного меньше памяти,
	но в графических режимах символы вообще не поддерживаются.
	Все авторские права на этот алгоритма полностью принадлежат
                           Царенко П. (г.Донецк)
	Этот ключ автоматически выставляется в =ON в режимах /russian, /range
	и сброшен (=OFF) в режимах /all, /128 для поддержки графики,
	поэтому если надо изменить значение этого ключа, его надо указать
	после ключа установки режима (/russian,/range,/128,/all)

4. Дополнительные ключи.

    /INTERFACE  - Драйвер KEYRUS имеет программный интерфейс с программами
    ──────────    пользователя через прерывание 2Fh (См. Программное управление)
	Если вам такой интерфейс не нужен, можете указать /interface=off
	Это вам сэкономит байт 100 памяти.
	При этом, правда, KEYRUS потеряет следующие возможности :
	  Изменять параметры драйвера в процессе работы
	  Выгружать себя опцией /release
	  При повторной загрузке не будет выдано сообщение 'Already installed'

    /SAVE       - Этот ключ должен стоять последним в строке.
    ─────         Он делает все введенные параметры, включая клавиатуры
	и рисунки символов определенными по умолчанию.
	     Пример :
		KEYRUS /all /font=myfont.fnt /save
		    ; после этого все параметры становятся по умолчанию,
		    ; и стандартный фонт keyrus перекрывается фонтом myfont.fnt
		    ;  и теперь достаточно только набирать "keyrus"
        Смотри также ключ /?

    /BUFFER     - Определяет большой буфер клавиатуры (на 31 символ)
    ───────       ВНИМАНИЕ! этот ключ не запоминается через /savе

    /FAST [= Speed,Delay]
    ─────
        - На AT сбрасывает лампочку NumLock и устанавливает
        скорость повторения символов на клавиатуре.
        По умолчанию значение =0,0 что означает задержка 1/4 секунды
        и скорость 30 символов/секунду.
             Задержка может быть от 0 до 3 (0.250 с, 0.500 с, 0.750 с, 1.000 с)
             Скорость может быть от 0 до 31
                   0 = 30 с/сек,          10 = 10
                   1 = 26.7               13 = 9.2
                   2 = 24                 16 = 7.5
                   4 = 20                 20 = 5.0
                   8 = 15                 31 = 2.0
        (Операционная система при старте устанавливает значения
         10 сим/с и задержка 1/2 сек)

        ВНИМАНИЕ! этот ключ не запоминается через /save



    /RELEASE    - Этот ключ выгружает KeyRus из памяти, если он был загружен
    ────────      ранее.  Не рекомендуется использовать этот ключ, если вы
	используете программу RELEASE.

    /?          - Этот ключ выдает всю информацию о значении параметров
    ──            по умолчанию.



                     Программное управление драйвером
                     ────────────────────────────────
                MOV ax,'KR'
                MOV bl,< номер подфункции >
                INT 2Fh

 BL
  0         :   Проверка - загружен KEYRUS ?
                 Если KEYRUS загружен на выходе в AL будет 82h
		 bh - Старший номер версии (6)
                 bl - Младший номер версии (2)
		 Регистр es при этом портится.

  1         :   Проверка - какой режим клавиатуры активен ?
                 На выходе :  AL = 4   - Латинский режим
                              AL = FBh - Русский режим.

  90h ('Р') :   Включение русского режима клавиатуры.

  4сh ('L') :   Включение латинского режима клавиатуры.




			      ╔════════════╗
  			      ║	Примечания ║
			      ╚════════════╝
(1)        Что нужно сделать, чтобы программа Norton Commander
                      "понимала" русскую букву "р".
      ────────────────────────────────────────────────────────────────
Для Norton Commander ( вер. 2.0 ) -
  С помощью утилиты  NU или PCTools скорректируйте программу NC.EXE :
  по смещению  9CBD замените байт 0e0h('р') на 00

Для Norton Commander ( вер. 3.0 ) -
  С помощью утилиты NU или PCTools скорректируйте программу NCMAIN.EXE :
  по смещению  1E02 замените байт 0e0h('р') на 00.

   Если и после этого проблема не будет решена (что маловероятно),
   то параметром /keys укажите файл клавиатуры, в котором вместо русской
   буквы 'р' будет латинская буква 'p' ( для этого надо просто изменить
   один символ в файле KBDMAIN )


(2)                   Таблица скэнкодов клавиатуры.
	              ─────────────────────────────
    ┌─────────╥──────────╥────────────╥─────────────╥───────────────┐
    │ Dec Key ║ Dec Key  ║ Dec Key    ║ Dec Key     ║ Dec Key       │
    │─────────╫──────────╫────────────╫─────────────╫───────────────│
    │  1  Esc ║ 18  E    ║ 35  H      ║ 52  . >     ║ 69  NumLock   │
    │  2  1 ! ║ 19  R    ║ 36  J      ║ 53  / ?     ║ 70  ScrollLock│
    │  3  2 @ ║ 20  T    ║ 37  K      ║ 54  Shft(Rt)║ 71  Home [7]  │
    │  4  3 # ║ 21  Y    ║ 38  L      ║ 55  * PrtSc ║ 72  Up   [8]  │
    │  5  4 $ ║ 22  U    ║ 39  ; :    ║ 56  Alt     ║ 73  PgUp [9]  │
    │  6  5 % ║ 23  I    ║ 40  " '    ║ 57  spacebar║ 74  <циф> -   │
    │  7  6 ^ ║ 24  O    ║ 41  ~ `    ║ 58  CapsLock║ 75  Left [4]  │
    │  8  7 & ║ 25  P    ║ 42  Shft(L)║ 59  F1      ║ 76       [5]  │
    │  9  8 * ║ 26  [ {  ║ 43  \ |    ║ 60  F2      ║ 77  Right[6]  │
    │ 10  9 ( ║ 27  ] }  ║ 44  Z      ║ 61  F3      ║ 78  <циф> +   │
    │ 11  0 ) ║ 28  Enter║ 45  X      ║ 62  F4      ║ 79  End  [1]  │
    │ 12  - _ ║ 29  Ctrl ║ 46  C      ║ 63  F5      ║ 80  Down [2]  │
    │ 13  + = ║ 30  A    ║ 47  V      ║ 64  F6      ║ 81  PgDn [3]  │
    │ 14  bksp║ 31  S    ║ 48  B      ║ 65  F7      ║ 82  Ins  [0]  │
    │ 15  Tab ║ 32  D    ║ 49  N      ║ 66  F8      ║ 83  Del  [.]  │
    │ 16  Q   ║ 33  F    ║ 50  M      ║ 67  F9      ║               │
    │ 17  W   ║ 34  G    ║ 51  , <    ║ 68  F10     ║               │
    └─────────╨──────────╨────────────╨─────────────╨───────────────┘
                       Скэнкоды расширенной клавиатуры
    ╒═════════════════════════════════════╦═════════════════════════╕
    │ Клавиша                   Код       ║ Клавиша       Код       │
    ├─────────────────────────────────────╫─────────────────────────┤
    │ F11 ..................... 87        ║ Home ........ 71e       │
    │ F12 ..................... 88        ║ End ......... 79e       │
    │ Right-Alt ............... 56e       ║ Up .......... 72e       │
    │ Right-Ctrl .............. 29e       ║ Down ........ 80e       │
    │ Shft-PrintScreen (SysReq) 55e       ║ PgUp ........ 73e       │
    │ Ctrl-PrintScreen (SysReq) 55e       ║ Pgdn......... 81e       │
    │ Alt-PrintScreen ......... 84        ║ Right ....... 77e       │
    │ Insert .................. 82e       ║ <циф> Enter . 28e       │
    │ Delete .................. 83e       ║ <циф> / ..... 53e       │
    │ Left .................... 75e       ║ 		            │
    ╘═════════════════════════════════════╩═════════════════════════╛
