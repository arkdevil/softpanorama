
    ANTI-KOt Resident (ANTI-KOR).  Version 1.0.


    1. Введение
    2. Вызов программы
    3. Основные сообщения ANTI-KOR
    4. Особенности отдельных вирусов
       4.1. LETTERS
       4.2. SOFIA
    5. Особенности работы с некоторыми программами
       5.1. ANTI-KOR и FLU_SHOT
       5.2. ANTI-KOR и NETWARE
       5.3. ANTI-KOR и "поплавковые" программы
    6. Дополнительные детали



    1. Введение

    -   Данная   программа   является   дополнением  антивирусной
    программы ANTI-KOT  и создана  с целью  понижения вероятности
    проникновения  компьютерных  вирусов  в  операционную систему
    типа MS-DOS;

    - ANTI-KOR является  резидентной (TSR-programm) программой  и
    при  загрузке  в  систему  замимает  около  15 KB оперативной
    памяти;

    - ANTI-KOR обладает следующими особенностями:

         -  содержит  механизм  нейтрализации  в  памяти наиболее
         распостаненных  в  СССР   вирусов:    LETTERS,   ISRAEL,
         VACSINA,  MUSIC,  SOFIA,  PINGPONG  -  общим  числом  14
         модификаций данных  вирусов. При  наличии в  оперативной
         памяти   компьютера   ANTI-KOR   и   запуске  программы,
         зараженной  одним  из  данных  вирусов,  предупреждающее
         сообщение будет выдано раньше, чем вирус сможет заразить
         другую программу;
         -  строго  отслеживает  процедуры  записи  в .COM и .EXE
         файлы;
         - следит за размером системной памяти, за распределением
         памяти между программами;
         -  проверяет  цепочку   прерывания  DOS  21,   что  дает
         возможность выявлять  те программы,  которые отслеживают
         прерывание DOS  21 и  при этом  не "зарегистрированы"  в
         системе;
         - отслеживает изменения программами векторов прерываний;
         - отслеживает попытки  программ остаться резидентными  в
         памяти (TSR);

    - ANTI-KOR не  выдает предупреждающих сообщений  при создании
    .COM,  .EXE  и  .BAT  файлов,  что существенно снижает эффект
    присутствия  программы;  ANTI-KOR  создавался  как не слишком
    "болтливая" программа;

    - ANTI-KOR  1.0., обладая  далеко не  полным набором желаемых
    функций, пока не  может претендовать на  использование вместо
    таких известных программ,  как ANTI4US или  FLU_SHOT+, однако
    может быть незаменим на тех компьютерах, на которых  работают
    разные  пользователи   или  на   которых  проверяются   новые
    продукты,  короче   говоря  на   тех,  которые   подвергаются
    нападению популярных в СССР вирусов наиболее часто.


    В следующих версиях ANTI-KOR:

         - контроль записи информации на диски на уровне BIOS;
         - возможность  просмотра  векторов  прерываний  системы,
         просмотра распределения памяти между программами в любой
         момент времени;
         - выбор режима работы при помощи меню;
         - другие   новые   функции,   расширяющие  возможность
         мониторинга системы;


    2. Вызов программы.

    При наборе на клавиатуре имени программы "ANTI-KOR" и нажатии
    на клавишу <Enter> на  экран дисплея будет выведен  следующий
    текст:

    <----------------------------------------------------------->
     ANTI-KOt Resident (ANTI-KOR).  Version 1.0.
     by Oleg Kotik.

     usage:

     ANTI-KOR [options]

     options:
     /H   -  help (alternate russian code);
     /I+  -  turn ON  interrupts monitoring;
     /I-  -  turn OFF interrupts monitoring;
     /F+  -  turn ON  float mode;
     /F-  -  turn OFF float mode;
     /C+  -  turn ON  checking file creating;
     /C-  -  turn OFF checking file creating;
     /U   -  uninstall ANTI-KOR;

     default: ANTI-KOR /I- /F+ /C-
    <----------------------------------------------------------->

    Назначение ключей следующее:

    /H  - набрав на клавиатуре  "ANTI-KOR /H" и нажав на  клавишу
          <Enter>, можно получить краткую информацию о  программе
          ANTI-KOR;

    /I+ - загрузка   ANTI-KOR  в   режиме   выдачи  сообщений об
          изменяемых     программами     векторах     прерываний.
          Многочисленные программы, большей частью резидентные, в
          результате своего  исполнения включают  себя в  цепочки
          различных  прерываний  (для  работы  с  клавиатурой,  с
          монитором, с принтером, с файловой системой и  прочее).
          После исполнения таких  программ Вы можете  получать до
          десятка  и  более  сообщений  об  измененных   векторах
          прерываний.   Заподозрить   проникновение   вируса   на
          компьютер   можно   в   том   случае,  когда  сообщения
          появляются  после  исполнения  программ,  ранее  их  не
          дававших  или  не  дававших  по  типичным  для  вирусов
          прерываниям, к которым можно отнести следующие:  21h  -
          прерывание, дающее доступ практически ко всем  функциям
          DOS, 13h  - управление  работой с  дисками и дискетами,
          1Сh -  работа с  таймером, 9  - работа  с клавиатурой и
          некоторые другие. Если  Вы пока не  настолько понимаете
          то,  о  чем  идет  речь, чтобы самостоятельно оценивать
          изменения  прерываний  при  реальной  работе,  то лучше
          запускать   ANTI-KOT   с   ключом   /I-.   В    разделе
          "Дополнительные детали" сказано о том, что нажатием  на
          клавишу <Esc> можно прервать многочисленные сообщения о
          векторах прерываний;

    /I- - запуск ANTI-KOR  без слежения  за изменениями  векторов
          прерываний. В  некоторых случаях  использование данного
          ключа  позволит  выиграть  больше  от отсутствия лишних
          сигналов  тревоги  (хотя  сами  по  себе  сообщения  об
          измененных  векторах  прерываний  не являются сигналами
          тревоги),   нежели   потерять   от   снижения    уровня
          безопасности системы;

    /F+ - включить   "поплавковый"   механизм   (float).   Данный
          механизм описан в разделах 4.2, 5.2, 5.3, он  необходим
          при   совместной   работе   с  некоторыми  резидентными
          программами. В большинстве  случаев активизация его  не
          приводит к конфликтам с другими резидентами, поэтому по
          умолчанию  он  включен.  Однако  существует возможность
          отключать механизм, причем  в процессе работы  он может
          быть включен и отключен произвольное число раз;

    /F- - отключить "поплавковый" механизм;

    /C+ - включить  режим,  при котором  выдаются предупреждающие
          сообщения не только при изменении сущесвующих COM и EXE
          файлов, но и при их создании (create). Необходимо иметь
          в  виду,  что  при  активизации  данного  режима  будут
          выдаваться   многочисленные    сообщения   в    случаях
          копирования файлов, работы компиляторов и других;

    /C- - отключить  режим  слежения  за  созданием   программных
          файлов;

    /U  - удалить   ANTI-KOR  из  памяти  (uninstall).  Процедура
          деинсталяции может  быть проведена  вне зависимости  от
          того,  загружались  после  ANTI-KOR  другие резидентные
          программы или нет.

    Если Вас  устраивает работа  программы ANTI-KOR  и Вы  хотите
    загружать  ее  в  память  при  каждом  включении  машины,  то
    необходимо включить  в файл  AUTOEXEC.BAT строку  'ANTI-KOR',
    сопровождаемую хотя  бы одним  ключем, за  исключением ключей
    '/H' и '/U'.

    По умолчанию действуют ключи '/I- /F+ /C-'.

    Путем повторного вызова  ANTI-KOR с различными  ключами можно
    динамически изменять те или другие функции.

    Если  из  AUTOEXEC.BAT   загружаются  и  другие   резидентные
    программы, то желательно вставить данную строку после них  во
    избежание выдачи сообщений ANTI-KOR о загрузке этих  программ
    каждый раз при включении компьютера.

    3. Основные сообщения ANTI-KOR.

    Ниже приводятся основные сообщения ANTI-KOR, а также  таблица
    выдаваемых  сообщений  для   различных  типов  вирусов,   что
    позволяет  составить  представление  о  том,  в каких случаях
    стоит беспокоится о проникновении  вирусов на компьютер, а  в
    каких нет.

    При получении любого из сообщений необходимо либо ответить на
    вопрос Yes/No, либо просто нажать на произвольную клавишу.

    1)
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░╔═══════════════════════════════════════════════════════╗░░
    ░░║                     C:\COMMAND.COM                    ║░░
    ░░║               Writing to file 1701 bytes              ║░░
    ░░╚═══════════════════ ANTI-KOt Resident══════════════════╝░░
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

    Такого типа  сообщения выдаются  при попытках  записи в файлы
    типа .COM или .EXE.  Обратите внимание на то  обстоятельство,
    что  подавляющее  число  резидентных  антивирусных   программ
    выдает сообщение при открытии программных файлов на запись, а
    не при  самой записи  в файл.  Процедуры открытия программных
    файлов на запись встречаются  на порядок чаще, чем  процедуры
    записи  в  них.  Примером  может  служить  часто приводимое в
    западных журналах  обстоятельство, когда  авторы антивирусных
    программ  леняться  предпринять  небольшие  усилия, чтобы все
    проверяемые на  наличие вирусов  файлы открывать  не в  любом
    случае на запись, а  лишь при обнаружении и  удалении вируса,
    во всех же остальных случаях открывать файл только на чтение.

    2)
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░╔═══════════════════════════════════════════════════════╗░░
    ░░║     21 int was changed from 4E90:071B to 9F04:03C8    ║░░
    ░░║                                                       ║░░
    ░░╚══════════════════ ANTI-KOt Resident ══════════════════╝░░
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

    Такие сообшения выдаются  при изменении программами  векторов
    прерываний.  Сравнение  векторов  прерываний  производится до
    запуска программ на выполнение и после него.

    3)
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░╔═══════════════════════════════════════════════════════╗░░
    ░░║         Segment 9F04 not found in chain int 21        ║░░
    ░░║                                                       ║░░
    ░░╚══════════════════ ANTI-KOt Resident ══════════════════╝░░
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

    Это сообщение выдается  при обнаружении в  цепочке прерывания
    DOS 21 программного  сегмента, получающего управление,  но не
    принадлежащего ни одной из резидентных программ.

    4)
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░╔═══════════════════════════════════════════════════════╗░░
    ░░║  Attention! Memory allocation table was changed . . . ║░░
    ░░║                                                       ║░░
    ░░╚══════════════════ ANTI-KOt Resident ══════════════════╝░░
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

    Если  в  результате  выполнения  программы  изменилась  сумма
    блоков   распределения   памяти,   то   будет  выдано  данное
    сообщение. В случае, когда программы становятся  резидентными
    в памяти с использованием функции 31h прерывания DOS 21h  или
    с использованием прерывания 27h, то предупреждающее сообщение
    не  выдается.  Надо  иметь  в  виду,  что  при   деинсталяции
    (removing from memory) резидентных программ это сообщение как
    правило  выдается.  Кратко  пояснить  смысл данного сообщения
    можно  следующим  образом.  Перед  загрузкой  любой программы
    ANTI-KOR   запоминает   распределение   памяти   между   теми
    резидентными программами, которые были активизированы  раньше
    и  занимают  блоки  памяти  различных  размеров.  Загружаемой
    программе выделяется  некоторая память,  которая должна  быть
    полностью   возвращена   системе   после   окончания   данной
    программы.   Если   программа   закончилась,   а  системе  не
    возвращена  вся  память,  то  ANTI-KOR выдает предупреждающее
    сообщение.  В   случае  запуска   резидентной  программы,   в
    намерения которой не  входит проникнуть в  систему незаметно,
    за  программой  всегда  закрепляется  некоторая  память,   но
    сообщения ANTI-KOR не выдается, так как такие задания  всегда
    завершаются либо с использованием функции 31h прерывания  DOS
    21h, либо с использованием прерывания 27h.

    5)
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░╔═══════════════════════════════════════════════════════╗░░
    ░░║   Attention! Total system memory  was changed . . .   ║░░
    ░░║                                                       ║░░
    ░░╚══════════════════ ANTI-KOt Resident ══════════════════╝░░
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

    Если в  результате выполнения  программы изменилось  значение
    Total  system  memory  распределения  памяти, то будет выдано
    данное сообщение.

    6)
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░╔═══════════════════════════════════════════════════════╗░░
    ░░║                     RESIDENT.COM                      ║░░
    ░░║            Try to stay resident, function 31.         ║░░
    ░░╚══════════════════ ANTI-KOt Resident ══════════════════╝░░
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░╔═══════════════════════════════════════════════════════╗░░
    ░░║                     RESIDENT.COM                      ║░░
    ░░║            Try to stay resident, interrupt 27.        ║░░
    ░░╚══════════════════ ANTI-KOt Resident ══════════════════╝░░
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

    Попытка  некоторой  программы  остаться  резидентной в памяти
    путем использования прерывания  27 или функции  31 прерывания
    DOS 21 будет отмечена одним из этих сообщений.

    7)
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░╔═══════════════════════════════════════════════════════╗░░
    ░░║   The virus XXXXXX is found in memory, segment 3702   ║░░
    ░░║                 Neutralize it (Y/N) ?                 ║░░
    ░░╚══════════════════ ANTI-KOt Resident ══════════════════╝░░
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

    При  обнаружении  в  оперативной  памяти компьютера одного из
    вирусов:   LETTERS, ISRAEL,  VACSINA, MUSIC,  SOFIA, PINGPONG
    будет выдано данное сообщение с указанием реального  сегмента
    в  памяти,  в  который  загружено  тело  вируса, с вопросом о
    необходимости нейтрализовать вирус.

    Ниже  приводится   таблица  сообщений,   выдаваемых  ANTI-KOR
    при появлении в памяти различных вирусов:

    Virus                         1     2     3     4     5     6

    Falling Letters             Yes   Yes    No   Yes    No    No

    Micro88                     Yes    No    No    No    No    No

    Rebotter (or Vienna)        Yes    No    No    No    No    No

    Sofia (or Dark Avenger)     Yes   Yes   Yes    No    No    No

    Jerusalem (or Israel)       Yes   Yes    No    No    No   Yes

    Vacsina

                 1206 bytes     Yes   Yes   Yes   Yes    No    No

                 1212 bytes     Yes   Yes   Yes   Yes    No    No

                 1339 bytes     Yes   Yes   Yes   Yes    No    No

    Music (or Yankee Doodle)

                 1760 bytes     Yes   Yes   Yes   Yes    No    No

                 1805 bytes     Yes   Yes   Yes   Yes    No    No

                 2568 bytes     Yes   Yes   Yes    No    No    No

                 2680 bytes     Yes   Yes   Yes    No    No    No

                 2752 bytes     Yes   Yes   Yes    No    No    No

                 2885 bytes     Yes   Yes   Yes    No    No    No

                 2928 bytes     Yes   Yes   Yes    No    No    No


    4. Особенности отдельных вирусов

    4.1.  LETTERS

    Пpи запуске некоторой программы, зараженной вирусом  LETTERS,
    вирус получает управление в  первую очередь. Для того,  чтобы
    остаться  в  оперативной  памяти  и после выполнения основной
    программы,   вирус   предпринимает   следующие  действия.  Он
    сдвигает программу в памяти на 7Bh параграфов и  переписывает
    себя в освободившееся окно.  Затем он помечает этот  блок как
    занятый  для  того,  чтобы  на  место  вируса  в памяти после
    выполнения  основной  программы   не  могла  быть   загружена
    следующая программа. Так как каждый распределенный в  системе
    блок  должен  кому-либо  принадлежать,  то  вирус  не находит
    ничего   лучшего   как   пометить   собственный   блок    как
    принадлежащий текущему коммандному интерпретатору  (программе
    COMMAND.COM).

    Если Вы пользуетесь программой Norton Commander (NC.EXE), то,
    очевидно,  знаете,  что  эта  программа  при исполнении любой
    команды  из  своей  среды  сначала  загружает в память новую,
    буферную  копию  коммандного  интерпретатора,  а  лишь  затем
    исполняет   введенную   команду.   При   загрузке  программы,
    зараженной  LETTERS,  вирус  пытается  остаться  резидентным,
    образует блок размером 7Bh парагафов, а ссылает этот блок  на
    буферный командный  интепетатор. Далее  происходит следующее.
    После  выполнения  каждой  команды  Norton Commander просит у
    операционной  системы  свободную  память,  а система в случае
    недостаточного  количества  памяти  начинает  сканировать все
    блоки и в числе других просматривает и вирусный блок. Так как
    буферный  командный  интепетатор  уже  не работает, то данный
    блок не  принадлежит никому  и операционная  система помечает
    его как свободный. При загрузке следующей программы в  память
    скорее всего произойдет останов, так как велика  вероятность,
    что загружаемая программа затрет тело вируса в памяти,  через
    которое проходит исполнение одного из основных прерываний DOS
    - 21h.

    Из всего вышесказанного следует вывод, что возможна ситуация,
    при  которой  Вы  получите  сообщение  ANTI-KOR  о  наличии в
    оперативной  памяти  компьютера  вируса  LETTERS, дадите свое
    согласие на нейтрализацию вируса  и продолжение работы, а  на
    следующем шаге система зависнет.

    4.2.  SOFIA

    Вирус  SOFIA  использует  "поплавковый"  механизм при занятии
    прерывания  21h,  что  позволяет  вирусу  при  вызове данного
    прерывания  любой  программой  получать  управление  в первую
    очередь.  Любую  программу,  желающую  включится  в   цепочку
    прерывания 21h, вирус вставляет на второе место - между собой
    и  следующей  программой  в  цепочке.  "Поплавковый" механизм
    использует  и  ANTI-KOR,  поэтому,  если в оперативной памяти
    Вашего компьютера обнаружен вирус SOFIA, то не стоит отвечать
    отрицательно  на  вопрос   о  нейтрализации  вируса,   ибо  в
    противном случае произойдет зависание машины.

    Также необходимо иметь в  виду, что если после  нейтрализации
    SOFIA  в  памяти  будет  запущена  программа, зараженная этим
    вирусом, то  в память  будет загружена  новая копия  вируса и
    ANTI-KOR вторично выдаст сообщение о наличии SOFIA в памяти.

    5. Особенности работы с некоторыми программами.

    5.1.  ANTI-KOR и FLU_SHOT.

    Мною  была  опробована  совместная  работа  ANTI-KOR  1.0   и
    FLU_SHOT+  1.4.  Продукты  неплохо  уживаются  вместе, однако
    существуют ситуации,  которые приводят  к зависанию  системы.
    Опишу  ту,   с  которой   пришлось  встретиься   самому.  При
    загруженных  в  оперативную  память  ANTI-KOR  и  FLU_SHOT  я
    стартовал программу NC.EXE.  Затем попытка запуска  из Norton
    Commander любой  программы или  выполнения любой  команды DOS
    (например,  DIR)  приводит  к  загрузке  в память новой копии
    интерпретатора  COMMAND.COM.     FLU_SHOT  был  настроен   на
    проверку  контрольной  суммы  файла  COMMAND.COM,  а значение
    контрольной  суммы  для  COMMAND.COM  в  файле FLUSHOT.DAT не
    совпадало с  тем, которое  вычислил FLU_SHOT  перед загрузкой
    COMMAND.COM, и поэтому  FLU_SHOT выдал сообщение  с вопросом,
    выполнять программу или нет. В случае утвердительного  ответа
    работа  программы  не  нарушалась,  а в случае отрицательного
    происходил останов  системы. Дело  состояло в  следующем. При
    запуске  COMMAND.COM  (функция  4Bh  DOS)  первым  управление
    получает ANTI-KOR  и фиксирует  старт программы  COMMAND.COM,
    ожидая  завершения  данной  программы,  пусть  и  аварийного.
    FLU_SHOT же, получив управление после ANTI-KOR делает  запрос
    (в  связи  с  несовпадением  контрольной  суммы),   выполнять
    COMMAND.COM или нет. Если нет, то он не возвращает  ненулевой
    код завершения данной программы,  что, по моему мнению,  было
    бы логично,  а выполняет  функцию DOS  4Ch, которая выполняет
    завершение  текущего  задания,  а  текущим  заданием в данном
    случае  являлся  Norton  Commander,  из  которого была выдана
    команда   DIR.   В   результате,   ANTI-KOR  ждет  завершения
    COMMAND.COM,  а  на  самом  деле  принудительно заканчиваеися
    Norton Commander, что приводит к нарушению нормальной работы.
    Хотя  я  и  не  имею  никаких  сомнений в квалификации автора
    FLU_SHOT  Росса  Гринберга   и  других  программистов   фирмы
    Software Concepts Design, но как не пытался найти  объяснение
    таким  действиям,  не  понимаю,  почему  необходимо завершать
    работу Norton Commander при запросе на завершение работы лишь
    COMMAND.COM.

    Возможно,  существуют   и  другие   ситуации,  приводящие   к
    зависанию.

    5.2.  ANTI-KOR и NETWARE.

    Для  того,  чтобы  ANTI-KOR  нормально  работал в присутствии
    сетевой   операционной   системы   NETWARE,  необходимо  было
    предпринять определенные действия.

    Во-первых,   происходило   зависание   системы   при   вызове
    прерывания 21h с функцией E0h. Этой функцией пользуется вирус
    ISRAEL  для  того,  чтобы  определить,  присутствует  вирус в
    памяти или нет.  ANTI-KOR  делал вызов этой функции с  той же
    целью,  однако  оказалось,  что  функция  E0h  используется и
    NETWARE для собственных  нужд. Зависание системы  происходило
    как при вызове функции из ANTI-KOR, так и просто при  запуске
    в  среде  NETWARE  любой  программы,  зараженной  ISRAEL.   В
    результате пришлось отказаться от вызова данной функции,  что
    привело к незначительному замедлению работы программы.

    Во-вторых,  пришлось   включить  в   программу  "поплавковый"
    механизм  по  причине  того,  что  функцию 4Bh прерывания 21h
    (функция загрузки и исполнения программ) NETWARE "замыкает на
    себя"  -  никакая  программа,  расположенная  после NETWARE в
    цепочке  прерывания  21h  не  узнает  о вызове функции 4Bh. В
    результате  получалось   ситуация,  когда   ANTI-KOR,  будучи
    загруженой  на  рабочей  станции  до  NETWARE не мог получать
    информацию о тех программах, которые исполнялись в системе, и
    не   мог   следить   за   состоянием   системы.   Именно  это
    обстоятельство    привело    к    необходимости    добавления
    "поплавкового" механизма,  при котором  ANTI-KOR находится  в
    начале цепочки прерывания  21h, всегда получает  управление в
    первую очередь  и всегда  имеет информацию  о вызовах данного
    прерывания.

    5.3.  ANTI-KOR и "поплавковые" программы

    Некоторые   программы   применяют   механизм  "поплавка"  для
    прерывания 21h с целью  того, чтобы при любом  вызове данного
    прерывания  получать  управление  в  первую  очередь. Так как
    ANTI-KOR  использует  этот  механизм  (см.  раздел  5.2.), то
    возможны конфликты с другими программами, применяющими данный
    механизм. Я встречал только две такие программы - вирус SOFIA
    и киевская программа CHECK21.COM.

    Программа   RELEASE,   позволяющая   освобождать   память  от
    резидентных  программ,  используется  достаточно  широко,   и
    поэтому имеет смысл  сказать и о  ней в данном  разделе, хотя
    эта  программа  не  применяет  механизм  "поплавка".   Данная
    программа запоминает вектора прерываний системы при  загрузке
    резидентных  программ  с  той  целью, чтобы при необходимости
    удалить резидент  из памяти  полностью восстановить  значение
    векторов.  Если  при  загруженной  программе RELEASE в памяти
    присутствует  ANTI-KOR  и  включен  механизм  "поплавка",  то
    совместная  работа  двух  программ  возможна  только  до того
    момента,  пока  не  будет   удалены  из  памяти  все   другие
    резидентные  программы,  зафиксированные  RELEASE, после чего
    система зависнет. Поэтому для одновременной работы с  RELEASE
    ANTI-KOR желательно загружать с ключом '/F-'.

    6. Дополнительные детали.

    Если некоторая  программа осуществляет  интенсивную запись  в
    программные файлы или  Вы получаете многочисленные  сообщения
    об  измененных  векторах  прерывания  (например,  при  старте
    SideKick), то нажатие на клавишу <Esc> приведет к прекращению
    выдачи сообщений вплоть до окончания данной программы.


    ANTI-KOT версии 4.0 отключает работу ANTI-KOR на время своего
    выполнения, поэтому при лечении файлов .EXE и .COM с  помощью
    ANTI-KOT не будут выдаваться сообщения о процедурах записи  в
    эти файлы.


    *************************************************************


    Буду  благодарен  за  любые  замечания, предложения по работе
    программы.

    Сл. тел. 227-00-04 (доб. 25-20).

    Дом. адрес:  103062 Москва, ул. Жуковского, 19-5. Котик Олег.

    Автор   старался   сделать   достаточно  надежную  программу,
    способную помочь пользователю избегать проникновения  вирусов
    на  компьютеры,  и   при  этом  не   обременять  пользователя
    многочисленными сообщениями, необходимостью принятия  решений
    при каждом  сообщении, излишней  информацией. С  этим отчасти
    связан  и  тот  факт,  что  Вам предлагается не разрешать или
    запрещать те или иные действия (за исключением  нейтрализации
    обнаруженных в оперативной  памяти вирусов), а  просто нажать
    на  любую  клавишу.  Так  или  иначе,  но  многое в программе
    сделано не случайно, а по тем или иным соображениям,  поэтому
    если  Вы  считаете,  что  что-то  в программе можно изменить,
    добавить  или  же  убрать,  то  не  сочтите  за труд сообщить
    автору.  Это  позволит  сделать  программу  более  удобной  и
    универсальной.

    Предпочтительное время для звонков  - вторник или четверг,  с
    13 до 17 часов.

    Котик Олег. 13 марта 1990.
