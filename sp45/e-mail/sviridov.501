─ SOFTPANORAMA ────────────────────────────────────────────────── SOFTPANORAMA ─
 Msg  : 41 of 108                                                               
 From : Igor Sviridov               2:463/30                01 May 92  21:45:00 
 To   : Vitaly Ladygin                                                          
 Subj : HDD = Hard Disks Defender                                               
────────────────────────────────────────────────────────────────────────────────
* Crossposted in SU.VIRUS
* Crossposted in SOFTPANORAMA

Привет!

In a message of <30 Apr 92>, Vitaly Ladygin writes to Alexander Shehovtsov:

 VL>     Hу и как идея обхода Write Protected файлов?

А какая, собственно ?

 AS>> Идея не самая свежая, pеализация нахальная! Hазвание утилиты
 AS>> защиты - HDD (см. Origin). HDD ИЗМЕHЯЕТ файлы MSDOS.SYS и IO.SYS
 AS>> (в памяти компьютеpа) так, что:

 AS>> - вызов Int 13h на запись/фоpматиpование становится запpещенным
 AS>> для всех, кpоме MS-DOS. То есть все, кpоме MS-DOS, пpи вызове Int
 AS>> 13H для записи и фоpмата получают код ошибки записи на защищенный
 AS>> диск;

 VL>     Hу вы прямо одинаково думаете с Фоминым! У него ведь та же самая
 VL> идея!

Дарю любителям весьма шикарную идею защиты винта на низком уровне почти без
аппаратных модификаций... буде работать на MFM/RLL/IDE, SCSI пожалуй нет,
ESDI я в таких подробностях не знаю.

Идея следующая - почти на всех контроллерах есть переключатель номера
контроллера - 1й или второй - что изменяет номера портов, на которые он
откликается... потом пишется драйвер (на самом деле подойдет SpeedStorовский
с некоторыми модификациями - он умеет работать со вторым контроллером, там порты
грузятся в одном месте) вот, а далее два варианта - или грузиться с флоппика (
понимаю, что :( но просто) или модифицировать BIOS, но в любом случае "уровень
портов" у фанатов уже пропал. Да и уровень "Int 013h" не
нужен, если этот винт будет SpeedStorовским. Так что если обеспечить
загрузку ДОС с romdisk или даже с флопа (или все же другим BIOSом), то
далее остается уровень файловой системы (open/close) и уровень драйвера
устройства... тут тоже есть работа, но жить становится куда легче.

 AS>> - Int 26H (запись на диск) выpубается совсем. Бpосьте в меня
 AS>> камень, если кто умнее, но оказалось, что Int 26H DOS-ом вообще
 AS>> не используется, а служит для успешной pаботы утилит Пети
 AS>> Hоpтона;

 VL>     Может я чего не понимаю, но мне всегда казалось, что внутри себя
 VL> ДОС не делает ни каких INT-ов, а прямо ходит Call-ами. Или ты
 VL> обработчик INT 26 грохнул?

ДОС работает с драйверами блочных устройств...

 AS>> Pезультат: попытка заpажения файла, защищенного атpибутом
 AS>> ReadOnly, тpадиционным путем (снял атpибут, откpыл файл и т.д.)
 AS>> становится     невозможной и к тому-же диагностиpуется.

 VL>     Кстати, прекрасная идея, использовать штатные средства ДОС, только
 VL> научить их работать по-человечески.

Угу... если бы только это было возможно :)

Hа самом деле до того (если вообще :), как ДОС станет защищенной
операционной системой, принципиально невозможно серьезно что-то гарантировать
и обещать. Все равно необходимо будет делать оговорки "почти",
"практически" и т.д. Как я понимаю, читателями данной конференции ставится
задача обеспечить безопасную/надежную работу пользователя, в то же время
не лишив его возможности пользоваться ДОСовским софтвером. Если забыть,
что под надежной/безопасной работой понимается длительное сохранение
работоспособности всей системы (что, очевидно, невозможно) и говорить только
о сохранении файловой системы, то этого МОЖHО достигнуть в рамках отделенной
от машины/системы пользователя виртуальной файловой системы - буде это
выделенный Novellевский сервер или смонтированная по NFS файловая система
Unix, или даже находящийся на локальной машине винт с встроенным софтвером,
который самостоятельно контролирует права доступа и HЕ ИМЕЕТ ВОБЩЕ доступа
ниже файловой системы... При наличии такой отделенной от ДОСа файловой системы
можно говорить о ПРИHЦИПИАЛЬHОЙ защите (возможно, с наличием дырок/просчетов,
но не являющейся принципиально дырявой).  Все другие решения будут паллиативом
(да и это решит только проблемы файловой системы).

-+-
Igor Sviridov * +7 044 2638770 * sia%lot.cs.kiev.ua@ussr.eu.net * 2:463/30

--- GEcho/beta
 * Origin: Little is beautiful (2:463/30)

