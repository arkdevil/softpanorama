
                 ▓▓▒░░░░░▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒░░░░░▒▓▓
                 ▓                                            ▓ █
                 ▒      G a n d a l f   S o f t w a r e       ▒ █
                 ░                                            ░ █
                 ▒             P R E S E N T S                ▒ █
                 ▓                                            ▓ █
                 ▓▓▒░░░░░▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒░░░░░▒▓▓ █
                  ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄█

                           ┌───────────────────────╖
                           │  File Group Processor ║▐
                           │         for           ║▐
                           │   Norton Commander    ║▐
                           │       NCA 5.0         ║▐
                           ╘═══════════════════════╝▐
                             ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀



                        Лучшее - враг хорошего.
                                                Пословица.

                        Если вам не нравятся эти сборы, устроим  вам более
                        другие.
                                                Фольклор.


                           СОДЕРЖАНИЕ
                           ~~~~~~~~~~
          1. Что такое NCA и для чего оно нужно ?

          2. Способы вызова NCA.

          3. Синтаксис команд NCA.

          4. Некоторые адреса Norton Commander'а, использованные в NCA.

          5. Обращение Gandalf Software к пользователям.

 1. Что такое NCA и для чего оно нужно ?
-----------------------------------------

                        ...Кстати, что такое хоббит?
                        Пожалуй, стоит рассказать о хоббитах подробнее, так как
                        в наше время они стали редкостью и сторонятся Высокого
                        народца, как они называют нас, людей. Сами они низко-
                        рослый народец, примерно вполовину нашего роста, и
                        пониже бородатых гномов. Бороды у хоббитов нет.
                        Волшебного в них тоже, в общем-то, ничего нет, если не
                        считать волшебного умения быстро и бесшумно исчезать в
                        тех случаях, когда всякие бестолковые и неуклюжие
                        верзилы вроде нас с вами, с шумом и треском, ломят,
                        как слоны.
                                                Дж.Р.Р. Толкин. Хоббит.

                        Слон есть самое большое животное из всех живущих на
                        земле. У него на рыле есть большой кусок мяса, который
                        называется хоботом потому, что он пуст и протянут, как
                        труба. Он его вытягивает и сгибает всякими образами и
                        употребляет его вместо руки...
                                        А.Стругацкий, Б.Стругацкий.
                                        Понедельник начинается в субботу.

   NCA - программа, позволяющая выполнять практически любую операцию над
файлами, перечисленными в списке ( одним из вариантов которого является
список отмеченных в Norton Commander'е ( далее - NC ) файлов ), а также
подставлять в командную строку некоторые параметры из NC ( как то текущий
диск активной и неактивной панели и каталог неактивной панели ). Это может
понадобиться, например, для упаковки отмеченных файлов ( эту функцию вы-
полняет программа NCZ, которая была в одной из СОФТПАНОРАМ, но только для
упаковщика PKZIP ), для копирования списка файлов, полученного, например,
после GREP'а. Для читателей предыдущих СОФТПАНОРАМ: программа объединяет в
себе возможности программ NCZ, NCSFP и EXNCCLI, а также имеет массу других
возможностей.

 2. Способы вызова NCA.
------------------------

                        Все дороги через Отражения ведут в Амбер. Амбер везде и
                        нигде...
                                        Р.Желязны. Хроники Амбера.

                        - В этой стороне,- Кот помахал в воздухе правой лапой,
                        - живет некто Шляпа! Форменная Шляпа! А в этой сторо-
                        не,- и он помахал в воздухе левой лапой,- живет Очуме-
                        лый Заяц. Очумел в марте. Навести кого хочешь. Оба не-
                        нормальные.
                        - Зачем это я пойду к ненормальным?- пролепетала Али-
                        са.- Я их... Я лучше к ним не пойду...
                        - Видишь ли, этого все равно не избежать,- сказал Кот,
                        - ведь мы тут все ненормальные. Я ненормальный. Ты не-
                        нормальная.
                        - А почему вы знаете, что я ненормальная?- спросила
                        Алиса.
                        - Потому что ты тут,- просто сказал Кот.- Иначе бы ты
                        сюда не попала.
                                        Льюис Кэрролл. Алиса в Стране Чудес.

  NCA можно вызывать из меню NC ( как Pulldown, так и User ) и из командной
строки NC и DOS. В Pulldown меню используется 3 пункта: в меню Files пункт
Send file ( после запуска Install - Init group ), который используется для
задания команды, используемой часто ( глобальная команда ), в меню Command
пункты Send/Recieve Mail ( do Group command ), который вызывается для выпол-
нения глобальной команды, и commander maiL ( gRoup once ), используемый для
исполнения какой-либо команды однократно. Вызов NCA из меню User или ко-
мандной строки NC ( что в общем-то одно и то же ) без параметров работает
так же, как gRoup once, а с параметрами - выполняет команду так, как если бы
она была введена после запроса. Вызов не из NC работает также за исключением
того, что невозможно использовать макросимволы, обозначающие отмеченные файлы
в NC. Можно также использовать NCA в качестве командного процессора для NC
( как EXNCCLI ), для этого надо создать переменную среды ( INSTALL делает
SPECNCA ) с полным путем NCA и заменить в NCMAIN'е COMSPEC ( EXNCCLI ) на 
ee имя ( если вы использовали INSTALL, он сделал это за вас ). 
Однако при этом несколько замедлится работа ( примерно на 0.1 с) и это 
займет 816 байт памяти.
  Можно изменить путь, в котором будут создаваться рабочие файлы NCA, устано-
вив переменную TEMPNCA. Заметим, что файл NCA.INI все равно будет записываться
на ( и читаться с ) диск, с которого запущен NCA.
  При вызове могут выдаваться запросы на ввод по ~N ( печатается начало стро-
ки и знак '>' ) и на ввод команды ( Enter command ). При возникновении физи-
ческой ошибки при исполнении команды ( как-то : невозможность открыть/закрыть
/прочитать/записать файл и т.п. ) выдается сообщение, начинающееся с
"Congratulations!" ( без кавычек ).
  При вводе команды обычно кроме простого набора можно выбрать одну из 3-х
последних глобальных команд. Наберите 1 ( или просто <Enter> ) для выбора
текущей глобальной команды, 2 - для второй, 3 - для третьей. При введении
новой глобальной команды старые автоматически сдвигаются ( принцип стека ).
  Для установки NCA запустите INSTALL ( лучше из того же каталога, где на-
ходится NC ) или замените все mci на nca в NCMAIN'e и поставьте нравящиеся
вам названия меню. Ввиду того, что NCA не использует файл nca.att, можно
переименовать его в nul.att. 
  ВНИМАНИЕ: при использовании пункта Init group помните, что курсор должен
быть на файле или должен быть отмечен хотя бы один файл. 

 3. Синтаксис команд NCA.
--------------------------
                        Взвод! Спиной друг к другу в шахматном порядке по
                        диагонали становись!
                                        Фольклор.

                        - Когда я беру слово, оно означает только то, что я
                        хочу, не больше и не меньше,- сказал Шалтай презри-
                        тельно.
                        - Вопрос в том, подчинится ли оно вам,- сказала Алиса.
                        - Вопрос в том, кто из нас здесь хозяин,- сказал Шал-
                        тай-Болтай.- Вот в чем вопрос.
                                        Льюис Кэрролл. Алиса в Зазеркалье.

  Безусловно, синтаксис NCA не является образцом понятности и естественности,
однако он гораздо проще синтаксиса любого языка высокого уровня и потому
даже люди, никогда не работавшие ни с чем, кроме Turbo BASIC, скорее всего,
смогут без труда освоить его.
  Макрокоманды NCA начинаются с символа '~'. Команды с буквами набираются
большими буквами.

  ~} и ~) - обозначают список отмеченных файлов ( т.е. файл с этим списком ),
          '}' - с именем каталога и ')' - без него ( если ни один файл не
          отмечен, берется текущий ),
  ~N -    имя рабочего файла, вводится в диалоге каждый раз,
  ~M -    имя файла, введенное по последнему ~N,
  ~F -    текущий файл NC,
  ~X<ext> - замена расширения для всех отмеченных на <ext> ( если <ext> не 
	  указан, расширение убирается, но точка остается ).
  ~P -    каталог соседней панели NC с диском, но без ключа в конце,
  ~T -    каталог соседней панели NC с диском, и с ключом в конце,
  ~C -    текущий диск ( с двоеточием ),
  ~D -    диск соседней панели ( тоже с двоеточием ),
  ~S -    не снимать отметки с файлов,
  ~I -    обмен панелей ( например ~T после ~I - каталог с текущей панели ),
          можно использовать несколько раз,
  ~{ -    если после него стоит один из символов ' '( пробел ), '+' ,'/'
          или ';', а потом имя файла-списка, то обозначает вызов команды со
          всеми именами из файла через данный разделитель, а если сразу имя
          файла - вызов команды для каждого файла отдельно ( создается .BAT
          файл ). Кстати: в этом случае можно вместо '~}' и '~)' писать 
          просто '}' и ')',
  ~=<op><name> - отметить файлы из файла <name>, используя логическую опера-
          цию <op>. Логические операции :
          'S' - отметить файлы, указанные в <name>,
          'A' - отметить только те файлы, которые отмечены и указаны в <name>,
          'O' - отметить файлы, указанные в <name>, сохраняя старые отметки,
          'X' - отметить файлы, которые отмечены и не указаны в <name> или
                не отмечены и указаны в <name>,
          'U' - снять отметку с файлов, которые указаны в <name>,
          'N' - отметить файлы, которые не отмечены.
           Если в файле указан путь, то файл отмечается только если путь
           совпадает с текущим.
 Если после '~' стоит другой символ, то и '~', и символ считаются обычными.
 Для использования макросимвола как обычного символа поставьте перед ним
 символ ' ( одинарная кавычка ).
 Примеры:

 lha a ~N @~} - добавить в архив ( имя вводится в диалоге ) отмеченные файлы,
 arj a ~N !~} - то же,
 copy ~{+} ~P\~N - слить отмеченные файлы в файл, задаваемый в диалоге, и
                 поместить этот файл в каталог соседней панели NC.
 type ~{} - вывести на экран все отмеченные файлы.
 copy ~{list ~D - скопировать файлы, указанные в списке list, на диск соседней
                 панели NC.
 aidstest ~C - проверить текущий диск на предмет вирусов.
 exit - ничего не делать ( заметим - пустая строка запустит новую копию
        COMMAND'а ).
 copy ~) list - сохранить список отмеченных файлов ( с каталогами ) в файле
               list для дальнейшего использования,
 ~=Slist - отметить файлы из list,
 ~=N - инвертировать отметки файлов.
  
 4. Некоторые адреса Norton Commander'а, использованные в NCA.
---------------------------------------------------------------

                        Здесь вам не Англия, копайте глубже.
                                        Фольклор.
                        У нас секретов нет, не то что у иных прочих. Ан масс.
                                        А.Стругацкий, Б.Стругацкий.
                                        Понедельник начинается в субботу.

  Авторы выражают признательность создателю программы NCSFP.COM за невольную
помощь в деле откапывания нижеуказанных адресов ( отсчет от начала MCB ).
1) Как найти NC? - Сканировать блоки MCB и искать блок, у которого со смещения
   0x12B ( или 0x12D ) написано 'Socha' ( если таких много - берите последний ).
2) По адресу 0xD7E указана текущая панель ( 0 - 1-я, 1 - 2-я ).
3) По адресу 0xD80 ( 0xE38 ) - текущий диск 1-й ( 2-й ) панели ( 0-A: и т.д.).
4) По адресу 0xD82 ( 0xE3A ) - текущий каталог 1-й ( 2-й ) панели.
5) По адресу 0xDDA ( 0xE92 ) - количество отмеченных файлов на 1-й ( 2-й )
   панели.
6) Отмеченные файлы начинаются с адреса 0xFD6. Формат: db 1,'<имя>',0 .
   Сначала идут отмеченные файлы текущей панели, потом другой ( без всякого
   разделения, используйте 5) ).
7) Текущий файл 1-й ( 2-й ) панели - 0xDCC ( 0xE84 ).

Примечание: указанные адреса проверены только в NC 3.0. Будьте осторожны с
версией 2.0.

 5. Обращение Gandalf Software к пользователям.
------------------------------------------------

                        - Куда брякнуть-та? - спросил я.
                        - Брякнуть-та? А домой, куда же еще в Новый год-та.
                          Мораль должна быть, милый. Новый год дома встречать
                          надо. Так это выходит по нашему, нес па?
                        - Я знаю, что домой. По какому телефону?
                        - А ты эта, в книжку посмотри. Грамотный? Вот и по-
                          смотри, значить, в книжку.
                        - Хорошо, - сказал я.- Брякну.
                        - Брякни, мон шер, брякни...
                                        А.Стругацкий, Б.Стругацкий.
                                        Понедельник начинается в субботу.

                        - Это мы в конец поставим. Это будет мораль, свежая
                          и оригинальная.
                                        А.Стругацкий, Б.Стругацкий.
                                        Понедельник начинается в субботу.

  Любые конструктивные ( известен конечный алгоритм исполнения ) предложения
об улучшении программы и исправлении в ней не найденных авторами ошибок прини-
маются с благодарностью. Те, у кого есть интересные предложения, приглашаются
на чашку кофе ( кофе приносить с собой ).
  Если вам очень понравилась вышеописанная программа, можете передать авторам
любое вознаграждение. В силу перехода с 1 декабря к натуральному хозяйству,
с большим воодушевлением принимаются вознаграждение в виде кофе. Это поможет
созданию новых версий. 
  Звонить не позже 23.00. Просьба учитывать при этом, что авторы студенты и
в силу этого вынуждены иногда посещать университет.

                                                Gandalf Sowtware.

                                Телефоны (044): 266-69-70 ( Стас )
                                                513-54-85 ( Саша )
