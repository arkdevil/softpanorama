                        ╓─────────────────╖
           ╓────────────╢    LHA 2.05     ╟────────────╖
           ║            ╙─────────────────╜            ║
░░░░░░░░░░░║   CПРАВОЧНОЕ РУКОВОДСТВО ПО АРХИВАТОРУ    ║░░░░░░░░░░░░
           ║            ┌─────────────────┐            ║
           ╙────────────┤   22 мая 1991   ├────────────╜
                        └─────────────────┘


    ╔═════════════════════════╗
▓▓▓▓║ LHA205 - ЧТО ЭТО ТАКОЕ? ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚═════════════════════════╝

     LHA205 - это программа архивирования двойного применения:

    1) Первая цель применения - прием двоичных или текстовых  файлов и
    уменьшение их размеров путем сжатия. Это  сохраняет  большое коли-
    чество рабочего пространства (типичный результат сжатия -  от  1/4
    до 1/3 первоначального размера). Архиватор может  управлять файлом
    любого размера, размещенного на диске, с его  последующей компрес-
    сией. Файл размером в 1 Мб может быть запросто  использован,  даже
    если на диске имеется в наличии только  200  Кб  свободного прост-
    ранства.

    Это решает любую потенциальную проблему переноса информации от од-
    ного компьютера к другому.

    Архивирование выполняется с  помощью  специальных  "таблиц сжатия"
    ("compression tables"), которые автоматически строятся программами
    и включают в себя простые для вычислений математические процедуры.

    2) Вторая цель применения - прием более одного файла и  их включе-
    ние в один общий файл, с сохранением индивидуального имени каждого
    включенного файла для доступа к нему.

    Этот общий файл называется "архив" (аналогичен понятию "библиотеч-
    ный файл" в CP/М). Вначале развития MS-DOS эти файлы  имели расши-
    рение .ARC.

    Однако, с появлением других аналогичных программ,  различные "рас-
    ширения" стали своего рода  идентификаторами  программ архивирова-
    ния. Вот некоторые образцы расширений: .ARC, .DWC,  .LZH,  .PAK, .
    ZIP.


    ╔════════════════╗
▓▓▓▓║ АРХИВНЫЕ ФАЙЛЫ ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚════════════════╝

    LHA205 может разместить сотни файлов в  единственном  .LZH-архиве.
    Это позволяет сохранить до 50 и  более  процентов  рабочего прост-
    ранства жесткого диска.

    Один такой контрольный файл назывался "TEST.LZH." Он  содержал 200
    файлов сжатых до 41% от первоначального размера.

    Целью здесь является не только помещение в сжатом  виде  в  одном,
    единственном файле-хранилище двухсот других файлов. Это и так оче-
    видно. Есть и другой фактор - все файлы, ассоциированные  с  одной
    программой (программным пакетом), хранятся вместе, в одном архиве.


    ╔═════════════════════════════════════════╗
▓▓▓▓║         ПРОСТОЕ ПРИМЕНЕНИЕ LHA205       ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚═════════════════════════════════════════╝

    1) CЖАТИЕ ОДНОГО ФАЙЛА с именем ABC.TXT. (Может  быть  выполнен  с
    созданием либо изменением архивного файла ABC.LZH.)

'a'               LHA205 a ABC ABC.TXT
             или
'a'               LHA205 a ABC.LZH ABC.TXT
                         ^    ^       ^
                         a    b       c

                  a =  команда
                  b =  имя архивного файла
                  c =  файл или файлы для добавления/сжатия

    а) В этом случае, "а" - вызываемая команда. Это одна из двенадцати
    имеющихся в наличии команд (смотрите ниже). В конце  этого  текста
    продублирована подсказка по архиватору,  вызываемая  пользователем
    при инициализации для большей осведомленности.

    Напечатав LHA205 Вы можете вывести этот список на экран. Он содер-
    жит очень краткое изложение того, что команда может выполнить.


    2) ДОБАВЛЕНИЕ файла в существующий архивный файл:

'a'               LHA205 a ABC ABC.DOC
                            ^
                            имя архива


    3) ДОБАВЛЕНИЕ НЕСКОЛЬКИХ файлов одновременно:

'a'               LHA205 a ABC PGM1.EXT PGM2.EXT PGM3.EXT
                            ^
                            имя архива


    4) УДАЛЕНИЕ файла с именем PGM4.EXT:

'd'               LHA205 d ABC PGM4
                            ^
                            имя архива


    5) ИЗВЛЕЧЕНИЕ файла с именем PGM4.EXT:

'e'  (или 'x')     LHA205 e ABC PGM4
                            ^
                            имя архива


    6) ПРОСМОТР содержимого архива:

'l'  (или 'v')     LHA205 l ABC PGM4
                            ^
                            имя архива


    7) ПЕРЕСЫЛКА файла(ов) в архив с удалением его из каталога:

'm'               LHA205 m ABC PGM1 PGM2 PGM3
                            ^
                            имя архива


    8) ПОКАЗАТЬ текст (содержимое) файла находящегося в архиве:

'p'               LHA205 p ABC PGM4
                            ^
                            имя архива


    ╔══════════════════╗
▓▓▓▓║ ОБЩЕЕ ПРИМЕНЕНИЕ ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚══════════════════╝

                       Формат командной строки
                       -----------------------

    LHA <команда> [/<ключи> ARC [[DIR\] [FILE]...]...[-+012|WDIR]...]

    <команда>: одна из 12-ти команд описанных ниже.  Если  команда  не
    используется, Вы получите на экране краткую  справку  либо  список
    файлов архива.

    <ключи>: Вы можете применить один и более ключей уточняющих коман-
    ду (ставьте символ / или - впереди первого ключа)

    ARC:       имя архива.
    DIR:       имя базового каталога
    FILE:      имя или полный путь специфицируемого файла
    WDIR:      имя рабочего каталога.

    В командной строке может быть задана только одна команда,  но клю-
    чей может быть введено несколько (после разделителей '/' или '-').
    Вы можете задать ключ (ключи) в любом месте после команды.

    В командной строке ключи следуют за разделителями '/' или '-'. Ес-
    ли Вы хотите задать более одного ключа, набивайте  символы '/' или
    '-' и ключи без разделительных пробелов,  например, '/rx-we:\work'
    или '/cxwe:\work'.

    Каждый ключ может иметь до трех режимов исполнения,  которые опре-
    деляются цифрами 0,1,2. Если ключ имеет только  два  режима работы
    (0 либо 1), эти режимы можно задавать символами  '+'(включить) или
    '-' (выключить).

    Нажатием 'Ctrl-Break' или 'Ctrl-C' Вы можете прервать работу в лю-
    бом месте и вернуться в ДОС.


    ╔═════════╗
▓▓▓▓║ КОМАНДЫ ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚═════════╝

    Здесь приведены 12 команд архиватора (некоторые из  них  дублируют
    друг друга для большей совместимости с программами ранее известны-
    ми пользователю. Это, к примеру, команды просмотра  списка архиви-
    рованных файлов 'l' и 'v').

    Это список команд, который выводится при вызове архиватора по име-
    ни LHA без указания параметров:

    -----------------------------------------
                  <команды>
    -----------------------------------------
    01 a: добавить файл в архив
    02 f: обновить файл в архиве
    03 d: удалить файл из архива
    04 e: извлечь файл из архива
    05 l: список файлов в архиве
    06 t: проверка архива
    -----------------------------------------
    07 u: изменить файл в архиве
    08 m: переместить новый файл в архив
    09 p: показать содержимое файла из архива
    10 x: извлечь файл с его каталогом
    11 v: смотреть список с каталогом
    12 s: создать самоизвлекающийся архив
    -----------------------------------------


01▓▓▓▓ A (добавить)

    Cжимает и добавляет указанные файлы в архив. Если архив не создан,
    он будет создан с указанным именем. LHA переписывает любой  файл в
    архиве по указанному имени файла по команде 'A'. Для архивирования
    файлов с полными путями доступа используйте ключи '/r1x1'.

    Эта команда подобна команде 'U'.

    Команды 'A' и 'M' используются для создания архива.

    <пример 1> LHA EX *.EXE

    LHA создает архив EX.LZH, из всех файлов с расширением 'EXE', взя-
    тых из текущего каталога. Расширение .LZH принято по умолчанию.

    <пример 2> LHA /r1x1 EX *.EXE

    То же архивирование, но с просмотром текущего каталога и  всех его
    подкаталогов и занесение имен файлов с полными путями доступа.


02▓▓▓▓ F (обновить)

    Заменяет файлы в архиве более 'свежими', только тогда,  когда  они
    были ранее помещены в архив. (Kлюч /с отменяет сравнение по време-
    ни создания файлов). Если в списке 'свежих' файлов есть такие, ко-
    торых нет в архиве, они в список не заносятся.

     <пример 3> LHA F EX LHA.DOC

    Вы сжимаете файл LHA.DOC и помещаете его в архив EX.LZH,  если это
    более поздняя версия этого файла.


03▓▓▓▓ D (удалить)

     По этой команде LHA удаляет файл(ы) в архиве.

    Если удаляются все файлы архива, сам файл арихива тоже  будет уда-
    лен. Команда 'LHA d ARC' вызовет сообщение  'No  file  name'  ('Не
    указано имя файла').


04▓▓▓▓ E (извлечь)

    LHA извлекает файлы из архива с разархивированием.

    Если LHA находит в каталоге файл с таким же именем, разархивирова-
    ние выполняется с запросом на перезапись  файла.  Разархивирование
    выполняется без распознавания полного пути доступа к  файлу  (если
    не указан ключ /x), даже если файлы были сохранены ранее  с указа-
    нием подкаталогов.

    <пример 4> LHA E EX LHA

    Извлекает все файлы из архива 'EX.LZH'

    <пример 5> LHA E EX *.COM

    LHA извлекает все файлы с расширением .COM из архива 'EX.LZH'.


05▓▓▓▓ L (список)

    В LHA существуют два вида списка файлов: с  выделением  одной  или
    двух строк для представления описания каждого архивированного фай-
    ла.

    Команда 'L' без ключей выводит список имен файлов, имеющихся в ар-
    хиве, в одну строку. Файлы, сохраненные с полными  путями  доступа
    помечаются символом '+' в заглавной части строки.

    Команда 'LHA L /X ARC' показывает файл(ы) с полными путями доступа
    архива ARC, в две строки. Имя каталога в списке  отделяется симво-
    лом "/", а не "\".

    Если в командной строке не указана никакая крманда, подразумевает-
    ся выполнение команды "L". Строки 'LHA ARC' или 'LHA /x  ARC' ана-
    логичны 'LHA l ARC' или 'LHA l /x Arc'.

     <пример 6> LHA LHA205.exe

    LHA предполагает команду 'L' и  показывает  список  файлов  архива
    'LHA205.EXE' по одной строке на файл.

     <пример 7> LHA /X LHA205.EXE

    Этот вариант команды дает список с полными путями доступа  с выде-
    лением двух строк на каждый файл (аналогична команде 'v').


06▓▓▓▓ T (тест)

    Интегральный контроль архива, по CRC-коду.

    Проверяет целостность архива с помощью  CRC-контроля  для  каждого
    файла и сравнивает полученное значение CRC с имеющимся в архиве.

    LHA T LHA.EXE или LHA T LHA???.LZH

    Такая проверка даст Вам ответ на два вопроса:

    1) Не поврежден ли проверяемый архивный файл, сможет  ли архиватор
    выгрузить файлы?

    2) Является ли проверяемый файл архивом, понятным для LHA?

    Ответ на этот вопрос необходим при  тестировании  самовыгружаемого
    архива с расширением .EXE и исполняемого программного модуля, име-
    ющего такое же расширение.

    <пример 8> LHA T EX

    LHA выполняет интегральный контроль файлов в 'EX.LZH'.

    <пример 9> LHA T LHA.EXE

    LHA тестирует LHA.EXE для выяснения того, является  ли  этот  файл
    дистрибутивом LHA.

    Если тестируемый файл с расширением .EXE не  архивный  файл,  либо
    некорректно созданный SFX-архив, будет  выдано  сообщение  "Broken
    archive" ("Нарушен архив").

    SFX-файлы, обработанные EXE-упаковщиками LZEXE,  PRLITE,  DIET  не
    будут распознаваться как самоизвлекающиеся архивы.


07▓▓▓▓ U (изменить)

    Сжимает и добавляет файлы в архив как команда 'A'.

    LHA находит файл с указанным именем в архиве и выполняет его заме-
    ну, если время создания добавляемого файла более  позднее,  чем  у
    файла, имеющегося в архиве. Если указанного файла  нет  в  архиве,
    команда работает аналогично команде 'A'.

    <пример 10> LHA U EX *.C

    Все файлы с расширением '.C' архивируются EX.LZH.  Если  архив EX.
    LZH уже содержит файл с указанным именем, только один из них с бо-
    лее поздним временем создания будет положен в архив.


08▓▓▓▓ M (переместить)

    Сжимает и добавляет файл(ы) в архив как команда  'U'  с  контролем
    времени создания.

    Команда удаляет из каталогов все файлы, перемещенные в архив.

    <пример 11> LHA M EX *.C

    это тоже самое, что и последовательность команд

                LHA U EX *.C
                DEL *.C

    Ключ /c в LHA пресылает все файлы игнорирую время их  создания. Вы
    сможете записать файл со старым временем создания.


09▓▓▓▓ P (печать)

    LHA выводит разархивируемый файл на стандартное устройство вывода.

     <пример 12>  LHA  P EX LHA.DOC

    LHA извлекает 'LHA.DOC' из 'EX.LZH' и показывать его на Вашем тер-
    минале.

     <пример 13> LHA P EX LHA.DOC > PRN

    LHA извлекает 'LHA.DOC' из 'EX.LZH' и печатает его на  Вашем прин-
    тере.

    Если не указано имя файла(ов), на просмотр  выводятся  все  файлы,
    включенные в архив.


10▓▓▓▓ X (извлечь с полным путем доступа)

    Если LHA не находит любой путь  разархивируемого  файла,  делается
    попытка открыть каталог. Файл(ы) должен быть архивирован  с полным
    путем доступа.

    Эта команда аналогична команде 'LHA e /x1m1 ARC'.

    <пример 14> LHA X EX

    В предположении, что в архиве  'EX.LZH'  имеется  файл '\BIN\CG86.
    EXE', он будет разархивирован с созданием  каталога  '\BIN',  если
    такого каталога ранее не было.


11▓▓▓▓ V (смотреть)

     Команда 'LHA V ARC' аналогична 'LHA L /X ARC'.


12▓▓▓▓ S (самоизвлечение)

    Программа LHA может создавать самоизвлекающиеся архивы  (SFX), де-
    лающие передачу файлов очень простой, поскольку получателю нет не-
    обходимости иметь у себя программу разархивирования.

    LHA производит самоизвлекающийся архив с расширением  .EXE  из ар-
    хивного файла с расширением .LZH.

    Могут быть две модели SFX-архивов: 'малая'  и  'большая'.

    По умолчанию установлена 'малая' модель (ключ /x0) и самоизвлекаю-
    щийся архив создается в текущем каталоге  без  запоминания  полныx
    путей доступа к архивируемым файлам.

    'Большая' модель, создаваемая с ключем /x1 способна к автоматичес-
    кому воспроизводству структуры подкаталогов  архивированных файлов
    при разархивировании.

    Размер SFX-архива 'малой' модели  меньше  аналогичного  файла  для
    'большой' модели. Созданный архив  Вы  можете  активизировать  для
    выгрузки файлов либо в командной строке MS DOS либо  через некото-
    рую программную оболочку (например, Петр-Нортон-командир).

    <пример 15> LHA S EX

     В этом случае LHA производит 'малую' модель архива EX.EXE из EX.
     LZH.


    ╔═══════╗
▓▓▓▓║ КЛЮЧИ ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚═══════╝

    Это список 15-ти "переключателей",  уточняющих  способ  применения
    команд архиватора. Он включает:

    ----------------------------------------------------------------
                              <ключи>
    ----------------------------------------------------------------
    01 r: рекурсивный поиск файлов
    02 x: установить расширенные имена файлов
    03 p: различать полный путь в именах файлов
    04 a: позволить любые атрибуты файла
    05 t: изменить/сохранить время создания архива
    06 o: использовать старый метод совместимости
    07 i: совместимость с форматом архива в OS
    08 @: распознавание символов "@","-" в первой позиции имени файла
    ----------------------------------------------------------------
    09 w: установка рабочего каталога
    10 m: не выдавать сообщения для подтверждения перезаписи файла
    11 c: не осуществлять сравнение по дате создания файла
    12 z: ноль-сжатие (только запоминание в архиве)
    13 h: выбор уровня заголовка (умолчание = 1)
    14 n: показать\скрыть индикатор
    15 l: показать длинное имя при индикации
    ----------------------------------------------------------------


01▓▓▓▓ /r[0|1|2] (рекурсивный поиск)

    Программа LHA поддерживает три режима поиска файлов  для архивиро-
    вания:


    /r0: поиск в текущем каталоге заданных файлов (режим по умолчанию)

    LHA a /r0 ARC file.ext Добавляет в ARC  только  данный  файл file.
    ext.


    /r1: поиск указанных файлов по дереву каталогов, начиная от
     текущего либо базового.

    LHA a /r1 ARC *.c

    Добавляет в ARC все файлы с расширением .C с текущего дисковода из
    всех каталогов, начиная с текущего каталога.

     <пример 16> LHA  /r1x1 source.lzh \source\*.c \source\*.h

    LHA собирает файлы с расширением 'c' и 'h' из каталога  \source  и
    его подкаталогов.

    /r2: заданный каталог (каталоги)

    LHA a /r2x1 ARC \doc

    Добавляет в ARC все файлы из заданного каталога \doc и  его подка-
    талогов.

    ПРИМЕЧАНИЕ: В отличии от версии LHarc 1.13 ключ /r (/r1) не уста-
    навливает автоматически ключ /x.

    Два интересных применения:

     (1) Как полностью сохранить дискету A: ?

                        LHA a /r1x1 ARC.lzh a:\

     (2) Каким образом восстановить все каталоги и файлы на B: ?

                        LHA x ARC.lzh b:\


02▓▓▓▓ /x[0|1] (расширить имена)

    LHA использует расширенные имена файлов с указанием  полного  пути
    доступа к файлам.

    Например, Вы находитесь в корневом каталоге и хотите  занести файл
    '\TC\INCLUDE\SYS\STAT.H' в архив 'ARC.LZH'.  Напечатайте командную
    строку 'LHA a /x1 ARC.LZH  \tc\include\sys\stat.h'  для  включения
    указанного файла с полным именем. Проверить включение  Вы  сможете
    по команде 'L' (смотреть список).


03▓▓▓▓ /p[0|1|2] (полное совпадение)

    Поиск имени файла по полному совпадению.

    Например, архив 'TC.LZH' содержит два файла 'STAT.H'  и 'SYS\STAT.
    H'. Применение команды 'LHA e TC  stat.h'  приведет  к  извлечению
    обеих файлов в текущем каталоге и перезаписи одного  файла другим.
    Для разрешения такой ситуации, Вы можете напечатать 'LHA e  -p  TC
    stat.h' для извлечения только файла  'STAT.h'.  Напечатав  команду
    'LHA e -p TC sys\stat.h', Вы извлечете файл 'SYS\STAT.h'.


04▓▓▓▓ /a[0|1] (любые атрибуты)

    По умолчанию LHA не архивирует файлы с  атрибутом  'только чтение'
    (READONLY). Этот ключ разрешает архивирование  таких  файлов.  При
    извлечении файлов, они сохраняют управляющие биты по умолчанию.

    Включение /a1 позволяет архивировать файлы с любыми атрибутами.


05▓▓▓▓ /t[0|1] (дата создания)

    Опция /t1 в командах a,u,m,f,d переопределяет дату создания архива
    по наиболее поздней дате создания архивируемых файлов.  По умолча-
    нию (/t0), дата создания равна дате открытия архивного  файла ARC.
    lzh.


06▓▓▓▓ /o[0|1] (совместимость по сжатию)

    Опция совместимости с  форматом  архива,  полученного  архиватором
    LHarc, версии 1.13c.

    Даже в этом случае (/o1) LHA выполняет  сжатие  более  эффективно,
    чем LH113c версий 1xx. Опция заголовка 'h'  автоматически устанав-
    ливается в -h1.


07▓▓▓▓ /i[0|1] (совместимость с OS)

    Управление совместимостью c OS.

    Архивы, созданные LHA в OS, имеют другой формат заголовка. Для ра-
    боты в DOS Вы можете указать ключ /i, для низкоуровневого DOS-ар-
    хивирования (/i0) или высокоуровневого OS-архивирования (/i1).


08▓▓▓▓ /@[0|1]

    Опция управляет возможностью распознавания символов  '-'  и '@'  в
    первой позиции имени файла. По умолчанию любой  файл, начинающийся
    с '@', подобно '@xxx' будет распознан как файл с именем 'xxx'. Вы-
    ход из этой ситуации - ключ '/@0'. Нельзя  использовать выражение
    '-@0' в этом частном случае.


09▓▓▓▓ /w[0|1|<имя каталога>] (рабочий каталог)

    Специфицирует каталог в котором LHA создает временные файлы.

                        LHA  /wd:\  ARC.lzh FILE

    LHA использует два временных файла:

    LHTMP)1(.LZH :  Переименованный старый архив.
    LHTMP)2(.LZH : Рабочий файл, который будет переименован  как архив
    при нормальном завершении архивирования.

    По умолчанию LHA создает временные файлы  в  каталоге,  где  будет
    создан архив ARC.lzh. При нормальном завершении временный файл бу-
    дет переименован в ARC.lzh.

    LHA создает временные файлы в текущем каталоге, если  ключ  указан
    без имени в виде '/w+'либо '/w1'.

    Если в оперативной памяти задана переменная окружения  'TMP', этот
    ключ автоматически устанавливается в "1".

    Данный ключ полезен, когда у Вас не хватает пространства на рабо-
    чем диске, а также когда у Вас установлен виртуальный диск.


10▓▓▓▓ /m[0|1|2]  (нет сообщений)

    Перезаписывает файлы не выдавая запрос на перезапись.

    Команда 'LHA e /m2 ARC.lzh FILE' разархивирует каждый файл в теку-
    щий каталог с именем 'FILE' с использованием  пронумерованных рас-
    ширений (номер между 000-999) для файлов с совпадающими именами.


11▓▓▓▓ /c[0|1|2]  (игнорировать время создания)

    В командах 'u', 'f', 'e', 'x',  LHA  игнорирует  контроль  времени
    создания файла. В этих командах, LHA  будет  выбирать  обновленные
    файлы с одинаковыми путями доступа не проверяя время  создания  по
    умолчанию. Включить проверку можно по ключу /c1.


12▓▓▓▓ /z[0|1|2] (управление сжатием)

    /z0: поместить файлы без сжатия.
    /z1: (умолчание) поместить файлы с сжатием.
    /z2: поместить файлы с сжатием, исключая архивные файлы с расшире-
    ниями: .ARC, .DWC, .LZH, .LZS, .PAK, .ZIP, .ZOO.


13▓▓▓▓ /h[0|1|2] (уровень заголовка)

     Выбор уровня заголовка, по умолчание -h1.


14▓▓▓▓ /n[0|1] (не индицировать)

    В этой версии,  LHA  индицирует  процесс  архивирования  символами
    "ooo.....". Опция /n управляет включением\выключением индикатора.

     /n0: включить индикатор процесса архивирования\разархивирования
          (по умолчанию)

     /n1: запретить вывод индикатора "ooo....."

     /n2: запретить вывод имен архивируемых файлов.


15▓▓▓▓ /l[0|1|2] (длинное отображение).

    Опция управляет форматом вывода имен файлов  при архивировании/ра-
    зархивировании.

      /l0 : только имя файла.
      /l1 : полный путь доступа к файлу, занесенный в архив в
            две строки.
      /l2 : полный путь файлов для поиска в двух строках.

     <пример 17> LHA  /r1x1l2 link.lzh c:\link.*

    LHA собирает файлы link.* с полным путем доступа из каталогов, на-
    ходящихся ниже c:\, информируя о том, где архиватор нашел эти фай-
    лы.


    ╔═════════════════╗
▓▓▓▓║ Базовый каталог ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚═════════════════╝

    Базовый каталог не является ни текущим ни корневым. Это каталог, с
    которым работает LHA по указанию из командной  строки.  Вы  можете
    задавать этот каталог (или каталоги) в командной строке и  LHA бу-
    дет последовательно обрабатывать их.

  <пример 18> LHA x PROGRAM c:\bin\ *.exe *.com c:\temp\ *.man *.doc

    Допустим, что Вы находитесь в текущем каталоге d:\. По этой коман-
    де LHA разархивирует в текущий каталог файлы с расширением  .COM и
    .EXE находящиеся в подкаталоге c:\bin, и файлы с  расширением .MAN
    и .DOC из каталога c:\temp. Эта строка равнозначна  следующей пос-
    ледовательности команд:

             D>C:
             C>CD \BIN
             C>LHA X D:\PROGRAM *.COM *.EXE
             C>CD \TEMP
             C>LHA X D:\PROGRAM *.MAN *.DOC


    ╔══════════════════╗
▓▓▓▓║ Файл подстановок ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚══════════════════╝

    Вам может понадобиться очень длинная командная строка для работы с
    LHA, т.к. архиватор может обработать сразу очень большое количест-
    во файлов. MS DOS не пропустит такую длинную строку.

    Имеется возможность все эти имена записать в  отдельном  текстовом
    файле (например с именем FILES) в несколько строк, используя в ка-
    честве разделителя имен  пробел.  Обращение  к  такому  файлу осу-
    ществляется с указанием символа '@' перед именем  файла подстанов-
    ки.

     <пример 19> LHA a MAINPRG @FILES

    LHA архивирует в MAINPRG файлы, имена которых содержатся в файле
    FILES.


    ╔════════════════════════════════════════════╗
▓▓▓▓║ Переназначение вывода и программные каналы ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚════════════════════════════════════════════╝

    Поток вывода LHA может быть довольно просто перенаправлен на любое
    системное устройство (символ перенаправления ">")  определенное  в
    Вашей системе либо в файл.

     <пример 20> LHA l /n1 Part > FILES
                 LHA a NewPart @FILES.
                 LHA l /n0 NewPart > prn

    В этом примере список файлов архива 'PART.LZH' записывается в файл
    FILES и используется во второй строке в качестве файла подстановки
    для создания нового архива 'NEWPARTS.LZH'. В  третьей  строке  LHA
    выводит список файлов в полном формате на принтер.

     Используя переназначение можно выполнить слияние файлов в один
     выходной файл:

     <пример 21> LHA p MAINDOC *.txt > All.txt

    В этом примере LHA выводит все файлы с расширением .TXT  из архива
    MAINDOC в общий файл All.txt. Содержимое  каждого  файла  в  файле
    All.txt будет начинаться строкой "<<имя_файла>>"  и  заканчиваться
    символом с кодом 1Ah (стрелка вправо). Файл All.txt некоторыми ре-
    дакторами (например Pe2) будет читаться только до первой  метки  с
    кодом 1Ah. Полностью читает такой файл редактор MultiEdit.

    LHA допускает использование программных каналов (pipes), позволяю-
    щих задать в командной строке MS DOS цепочку программ  с передачей
    данных между ними слева направо. Объединение осуществляется симво-
    лом "|".

  <пример 22> LHA l /n1 Part | LHA a NewPart | LHA l /n0 NewPart > prn

    В этом примере будет получен результат как в примере  20,  но  без
    создания промежуточного файла подстановок с именем FILES.


    ╔═══════════════╗
▓▓▓▓║ Коды возврата ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚═══════════════╝

    При использовании LHA в командном файле, архиватор  может сигнали-
    зировать о результатах своей работы с помощью управления системной
    переменной ERRORLEVEL, которая в свою очередь может быть проанали-
    зирована в этом же командном файле.

     Коды возврата:

        0. Нормальный.

        1. Ошибка контрольного кода CRC,  при  выполнении  команд 'e',
    'x','t'.

        2. Фатальная ошибка. Процесс прерван.

        3. Ошибка преобразования временного файла в архив.  Вы  можете
    найти временный файл LHTEMP)2(.LZH в рабочем каталоге  и преимено-
    вать его в новый файл с расширением LZH.


    ╔═══════════════════════════════╗
▓▓▓▓║ SFX - самоизвлекающийся архив ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚═══════════════════════════════╝

ОБЩЕЕ ПРИМЕНЕНИЕ
================

          SFX.exe [/x] [/!] [/eDIR] [DIR]

          /x: открыть новый каталог (если его нет);
          /!: разрешить автовыполнение командного файла !.bat;
          [/eDIR],[DIR] специфицировать каталог и извлечь файлы.

    SFX.EXE - это исполняемый  программный  модуль  c  архивированными
    файлами, которые автоматически выгружаются из архива после запуска
    этого программного модуля.

    LHA преобразует архив с расширением .LZH в самовыгружаемый архив с
    расширением .EXE с помощью команды "s"  (см.выше). Самовыгружаемый
    архив может быть создан и для архивов более ранних версий (LH113c.
    1.xx) архиватора.


"БОЛЬШАЯ" и "МАЛАЯ" модель
==========================

    Могут быть созданы "большая" или "малая"  (принята  по  умолчанию)
    модель самовыгружаемого архива, путем задания ключа 'x' соответст-
    венно как /x1 или /x0.

     Создание "малой" модели:

    <пример 23> LHA s /x0 Sfx.lzh или LHA s Sfx.lzh

    В "малой" модели LHA игнорирует структуры каталога даже если архи-
    вирование  файлов  было  выполнено  с  применением  ключа  /x  или
    /r[1|2]. Выгрузка файлов из такого архива производится  в  текущем
    каталоге. В отличии от LH113c ограничение на размер "малого" архи-
    ва отсутствует.


    Создание "большой" модели: LHA s /x1 Sfx.lzh

    Используя "большую" модель Вы можете запустить  командный  файл  в
    указанном каталоге для извлечения файлов, можете восстановить пер-
    воначальную структуру каталогов с необходимостью  создания катало-
    гов по ключу /x.


КОМАНДНЫЕ ФАЙЛЫ И АВТОИСПОЛНЕНИЕ
================================

Применение файла-заставки "!"
-----------------------------

    При инициализации SFX-архива, LHA может показать  содержимое файла
    с именем '!', найденным в архиве и выдать запрос на выполнение ра-
    зархивирования. При ответе "Y"  выполняется  разархивирование, при
    "N" - выход.

    Cодержимым файла "!" чаще всего являеться  некоторый текст-застав-
    ка, например:

    В этом архиве помещены  рабочие  файлы  компьютерной  рекламы  АРМ
    "Метролог". Выполнить разархивирование в этом каталоге ?

    Перед началом разархивирования LHA выведет этот текст и  в  первой
    позиции следующей строки выдаст запрос на подтверждение разархиви-
    рования в виде '[Y/N]'.


Командный файл "!.bat"
----------------------

    Автовыполнение SFX-архива возможно только для "большой"  модели, и
    осуществляется путем выгрузки и  запуска  специального  командного
    файла "!.bat", включенного в SFX-архив.

    LHA извлекает файл "!.bat" в текущем каталоге, затирая  ранее выг-
    руженный файл с таким же именем (если имеется такой)  без  запроса
    на подтверждение. Активизировать файл "!.bat" на выполнение Вы мо-
    жете путем задания ключа "/!" в командной строке  SFX-архива (нап-
    ример "LHA205 /!") и только тогда, когда этот командный  файл  там
    присутствует в архиве.

    Например, после выгрузки файлов на диск Вы можете сразу начать вы-
    полнение некоторой демонстрационной программы DEMO.EXE,  записав в
    "!.bat" следующие две строки:

    @echo off
    demo


СПЕЦИФИКАЦИЯ КАТАЛОГА
=====================

    Возможна только для "большой" модели SFX-архива.

    Вы можете указать имя каталога, в котором будет выполнено разархи-
    вирование SFX-архива.

     <пример 24> lha205.exe /xec:\work

    По этой команде извлекаются файлы из SFX-архива LHA205.EXE в ката-
    лог c:\work. Используя LHA это же действие можно выполнить так:

                LHA e /x0 lha205.exe c:\work


    ╔════════════════════════╗
▓▓▓▓║ Практика архивирования ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚════════════════════════╝

    В этом блоке приведен ряд практических рекомендаций  по применению
    архиватора LHA 2.05, которые могут быть распространены и на приме-
    нение других архиваторов (например PKZIP).

    Допустим, что:

        1) архиватор LHA.EXE размещен на устр. C: в каталоге \lha205;

        2) имеется общий каталог командных файлов С:\bath, и этот путь
    доступа известен MS DOS через  переменную  окружения  "PATH".  При
    этом любой командный файл, помещенный в c:\bath может быть запущен
    из любого текущего каталога и устройства.

     Тогда:

        1. Для быстрой упаковки одного либо всех файлов текущего ката-
    лога с созданием файла-листинга архива сделайте  простой командный
    файл (IN.BAT) и поместите его в c:\bath

     @echo off
     cls
     c:\lha205\lha a /r2x1 %1 %2 %3
     cls
     echo Cписок в файл с расширением LST ?
     echo нажмите  Ctrl+Break, если список не нужен,
     echo иначе нажмите любую клавишу...
     pause > nul
     c:\lha205\lha l /x %1 > %1.lst
     :EOF

     Командная строка архивирования:

                      IN <архив> [<файл1> [<файл2>]]
                                   либо
                 IN <архив> [<базовый_каталог> [<файл1>]]

      Параметры:

      <архив>           - имя архива (без расширения!)
      <базовый_каталог> - каталог, отличный от текущего
      <файл1>,<файл2>   - имя файла (может иметь символы "*" и "?")

    Параметр <файл1> может быть файлом подстановки. Тогда  имени этого
    файла должен предшествовать символ "@". При этом  параметр <файл2>
    не обрабатывается.


        2. Для распаковки одного либо всех  файлов  текущего  каталога
    сделайте командный файл (UN.BAT) и поместите его в c:\bath

     @echo off
     c:\lha205\lha x /r2x1 %1 %2 %3
     :EOF

     Командная строка разархивирования:

                      UN <архив> [<файл1> [<файл2>]]
                                   либо
                 UN <архив> [<базовый_каталог> [<файл1>]]

      Параметры аналогичны предыдущему пункту.


        3. Если Вы работаете с Norton Commander:

        a) включите в File extention (вызовите верхнее меню по F9, вы-
    берите "Commands", выберите строку "eXtension file  edit") следую-
    щую строку:

      lzh: c:\lha205\lha l /x !.!

    если Вы хотите инициализировать просмотр списка  в  полной  форме,
    либо строку

      lzh: c:\lha205\lha l !.!

    для инициализации списка в короткой форме.

    Теперь при установке маркера на файл с расширением .LZH  и нажатию
    клавиши Enter будет выведен список файлов архива. Нажав Ctrl+E, Вы
    получите командную строку в строке с подсказкой ">", которую можно
    отредактировать по Вашему усмотрению.

        б) используйте ранее созданные командные  файлы  IN.BAT  и UN.
    BAT. При формировании строки параметров (если имена файлов имеются
    в каталоге) используйте Ctrl+J для переноса имени из  окна  Norton
    Commander в командную строку.


    ╔════════════╗
▓▓▓▓║ О переводе ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚════════════╝

    Справочное руководство подготовлено по текстам LHA205.DOC (англ.),
    LHA205.HLP (англ.), LHarc.doc (пер. с англ. А.Найдек).

    Некоторые замечания по переводу:

    - не совсем мне были понятны ключи /h и /i, поэтому  они  описаны,
    как мне кажется, слабо;

    - ряд примеров изменены и дополнены (все примеры я проверял на мо-
    дельной задаче);

    - очень скудно описаны в оригинале переменные  окружения (осталось
    непонятным имя переменной совместимости с LH113C, а также назначе-
    ние переменной TZ (Time Zone) - упомянуто, что эта переменная вли-
    яет на уровень архивирования -h2-).

    Буду рад любым контактам, которые помогли бы развеять мои сомнения
    (тел. 444-89-57 р.) и улучшить качество данного руководства.

    Перевод и редактирование - Михаил Власюк, 13.05.91.

    Сигнальный перевод выполнен с применением системы подстрочного пе-
    ревода  Fulcrum,  (C)   L.Obuchov &   V.Mironov   и   резидентного
    англо-русского словаря WordBox.


    ╔════════════════════════╗
▓▓▓▓║ Список инф. источников ║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ╚════════════════════════╝

     1. Архиватор LHarc 1.13c. Руководство пользователя, пер. с англ.
     А.В.Найдек, 1990 г.

     2. Manual for LHA Version 2.05.  Transl.  to Engl.  by Kenjirou
     Okubo, 1991 [LHA205.DOC]

     3. Hoff, I. LHA205.  Help Guide. [LHA205.HLP]

     4. Knuth, D.E., Dynamic Huffman Coding, J.Algorithms, 6:163-180.

     5. Kurita, T.  Harddisk Cook Book.  1987 Shoeisha,Tokyo.

     6. Kurita, T.  Tool Box of Coputing, Huffman Coding, bit
     70:100-101,1988.

     7. Okumura,K.,Masuyama,K.,Miki,K.  Practice and theory of Data
     Compression.  The Basic, 70(March):1-65,1989.

     8. Fiala,E.R., and Greene,D.H., Data Compression with Finite
     Windows, Comm.ACM, 32:490-595,1989.

     9. Okumura,H., and Yoshizaki,H.  Introduction to Compression
     Algorithm, C Magazine 3:1:44-68,1991.
