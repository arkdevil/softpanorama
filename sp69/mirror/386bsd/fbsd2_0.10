Newsgroups: comp.os.386bsd.bugs
From: kelly@woody.fsl.noaa.gov (Sean Kelly)
Subject: Install problem with FreeBSD-2.0R on P5/PCI/WD IDE
Message-ID: <KELLY.94Nov26202321@woody.fsl.noaa.gov>
Organization: Forecast Systems Lab, NOAA - Boulder CO, USA
Date: Sun, 27 Nov 1994 03:23:21 GMT

Is this a bug or is something wrong with my system?

I'm trying to install FreeBSD-2.0-Release on a Micron brand P5 machine
with a PCI/ISA bus.  There's a Western Digital Caviar AC31000 IDE
drive in it that I'd like FreeBSD to share with DOS (my wife's request
... she's a DOS disk hog).

The BIOS (Phoenix 1.03 M5Pi-05) reports the drive geometry just fine:
2100 cyl, 16 hd, 63 sect.

When booting from the boot floppy, during probing of the ISA bus, the
boot messages show detection of wd0 with the same geometry.  The
(F)disk util shows the following:

2100 Cyl * 16 Hd * 63 Sect = 1034 Mb = 2116800 Sect

which seems correct.  I set aside 602 Mb (the rest of the disk) in
slice 3 for FreeBSD and write this information as well as the
(B)ootcode.

In (D)isklabel, I make partition a 25 MB for /, b 64 MB for swap,
g 400 mb for /usr, and h 113 MB for /home.  The defaults for each prompt
were reasonable for the disk (nothing 0 or over 1034 MB showed up).  I
write this info and then (P)roceed.  Proceeding seems to work fine and
nothing unusual shows up on the debugging screeen.

I'm then told to reboot without the floppy. I'm presented with a menu:
F1 for dos, F3 for FreeBSD.  Pressing F3 just repeats the menu again,
but changes the prompt to F?.  F1, big surprise, goes to dos.  F2
crashes the system.  F4 repeats the menu like F3, but the prompt
appears as F4 instead of f?.

If I install one of the boot managers from the tools directory like
boot.bin or os-bs and then try to boot FreeBSD, I get a strange sound
out of the hard disk and then it spins down.  Rebooting will spin it
back up.

Any clues?  Need any more information?

