From: wpaul@panix.com (Bill Paul)
Newsgroups: comp.os.386bsd.questions
Subject: Re: FreeBSD-2.0 Release and netstat
Date: 27 Nov 1994 17:58:48 -0500
Organization: PANIX Public Access Internet and Unix, NYC
Message-ID: <3bb2v8$l5d@panix3.panix.com>

Daring to challenge the will of the almighty Leviam00se, Steve Froeschke
(steve@cg57.esnet.com) had the courage to say:

: I just obtained and installed FreeBSD 2.0 (Release) and have run across
: a problem in netstat.  Everything seems to be working, routing, named,
: etc., but, when issuing a netstat  (or netstat with any switches), I
: get the following error:

: netstat: kvm_read kvm_read: Bad address

: This is with the IPFIREWALL kernel running.  The only changes in the
: kernel I made were to delete hardware/controllers not in the system.
: (i.e. SCSI, PCI, etc).

: We're using a NE2000 board (ed1).
: I tried recompiling the libkvm library, no change.
: Again, everything is running fine, except for netstat.  (which would
: be nice to have!) :-)
: Any ideas?
: Steve

Try this:

0) Become root.

1) Make sure /proc is mounted. If it isn't then either you took it out of
   /etc/fstab or you didn't define 'options PROCFS' when you configured
   your new kernel.

2) type: dev_mkdb

3) type: kvm_mkdb
   If kvm_mkdb exits quickly, then it didn't work: remove /var/db/kvm_kernel.db
   and run kvm_mkdb again. Don't be alarmed if it takes a little while: it
   takes about 20 seconds to complete on my machine.

Now try netstat again. If it still doesn't work, then clearly the phase of
the moon is wrong.

-Bill

--
 _      /\      _            Join the
/ \_/\_/  \_/\_/ \  .----.   M00se Illuminati   Bill Paul 
\_____/ () \_____/ (bl00p!)  Face it: wouldn't  <Big City M00se>
     /      \       `----'   you feel much      wpaul@panix.com   -or-
    /  \__/  \    --'        safer?             ghod@drycas.club.cc.cmu.edu
   /__________\

