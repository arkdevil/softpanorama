From: pearce@malcolm.wdgarl.wes.mot.com (Mike Pearce)
Newsgroups: comp.os.386bsd.bugs
Subject: Re: Install problem with FreeBSD-2.0R on P5/PCI/WD IDE
Date: 30 Nov 1994 08:00:35 -0600
Organization: Motorola - WDG Applied Research Lab
Message-ID: <3bi0i3$bpt@malcolm.wdgarl.wes.mot.com>

In <D00n7s.A6o@tfs.com> Poul-Henning Kamp <phk@freebsd.org> writes:

>kelly@woody.fsl.noaa.gov (Sean Kelly) wrote:
>>
>> In <JKH.94Nov27134122@whisker.hubbard.ie>, Jordan K. Hubbard wrote:
>> 
>>    If I don't miss my guess, you've got FreeBSD trying to install at a
>>    cylinder >1024.  As I noted in the TROUBLESHOOTING guide on the
>>    first boot floppy (uh, are people reading that? :-)
>> 
>> I noticed that bit.  But (F)disk says my FreeBSD slice starts at
>> cylinder 876 and extends all the way to cylinder 2100.  That should be
>> OK, right?

>Almost:  The / filesystem must >END< before or at cylinder 1023, other
>wise you might not be able to load /kernel from the bootblock

Actually, only the 'a' partition of the slice needs to end before or
at cylinder 1023, so long as you explicitly specify the starting
coordinates for the slice in cyl/head/sector units. Most fdisk
programs put (1023, 255, 63) for both the starting and ending
specifications of a partition if _any_ cylinder in that partition is
above 1023. Since the kernel is loaded via BIOS, we need to have the
3D coordinates of the partition beginning available. Since the 'a'
partition is at or below 1023, we know BIOS will never be given an
invalid c/h/s address when loading the kernel.

My 1.8G disk has a BDS slice starting at cylinder 701 and ending at
cylinder 1200. Since the 'a' partition is only 32M, I know the kernel
will be on the disk somewhere below cylinder 1023. Until I manually
specified the c/h/s coordinates for the beginning of that partition,
it definitely wouldn't boot from that partition. Afterwards, though,
it works great.

Mike
--
Mike Pearce, Staff Engineer, Motorola, Inc.
Wireless Data Group Applied Research Laboratory, Schaumburg, IL
email: pearce@hook.wdgarl.wes.mot.com
'WARNING: Do not taunt Happy Fun Ball'

