From: jkh@whisker.hubbard.ie (Jordan K. Hubbard)
Newsgroups: comp.os.386bsd.bugs
Subject: Re: FreeBSD-2.0 Install...
Date: 28 Nov 1994 13:20:56 GMT
Organization: Jordan Hubbard
Message-ID: <JKH.94Nov28132056@whisker.hubbard.ie>

In article <3bcfib$moc@wup-gate.wup.de> andreas@wup.de (Andreas Klemm) writes:

   Via ftp ... doesn't work. Router was a Solaris 2.4 machine with a
   pppconnection to my Internet provider. ping ftp.freebsd.org worked from
   both: freebsd machine and Solaris machine ...

I installed at least 10 machines this way, using both the parallel
port (lp0 "laplink" network interface) and ethernet. I strongly suspect
that there's something else wrong, like a failure to configure a proper
gateway.

   There was a message I can't remember now ... no passwd entry (8) or
   such ?!

That's just a warning, and has nothing to do with your problems.  BELIEVE
me, we install almost ALL of our 2.0R boxes over the net, so if any of
the installation methods definitely works, it's this one.

   My tape won't be recognized ... nothing is being extracted. I had to
   do it manually after making a shell escape with 'ESC ESC'.

Let me look into this.  This doesn't sound right at all! :-(

   I extracted it manually and tried then installation from local disk ...
   then I made the experience, that I had to fiddle around with symlinks,
   to make a package tree suitable for the install programm

This has been cleaned up a bit.  UFS installation was added at the last
minute.

   NFS - INSTALLATION
   ==================

   The same strangeness with paths again in NFS installation ....

Nothing more need be said about NFS installation since I actually
*broke* it at the last minute! :-( :-( I feel really stupid about this
one.

Let me summarize which methods work and which don't:

	1. ftp - works.
	2. NFS - not.  You can ESC/ESC out and ed the instdist.sh script
	   so that the NFS section looks like this:

                if ! input \
"Please specify a machine and directory mount point for the
distribution you wish to load.  This must be in machine:dir
format (e.g. zooey:/a/FreeBSD/${DISTNAME}).  The remote
directory *must* be be exported to your machine (or globally)
for this to work!\n"; then continue; fi
                nfs_path=$answer
		^^^^^^^^^^^^^^^^

That line needs to be added.  Once you've done that, NFS installation
will work.

	3. floppies - not.  Completely broken.  Sorry.
	4. CD - works (if you have one from Walnut Creek).
	5. Tape - *should work*.  This I don't get!  Did you make sure and
	   select a SCSI tape, and not Mitsumi or something?

   BTW: a note would be nice ... What about asking the user for name and
   IP Adress of the installation server, if nameserver IP-Addr. shell
   variable is "" ?! Might be easier for the ordinary user ...  The
   example hostname:/path doesn't match an installation without DNS
   services.

I can't quite parse this.. :-(

   Then the NFS mount fails ...  mount seems to expect mount_nfs in
   /usr/sbin. If you make a symlink /usr/sbin/mount_nfs -> /stand/mount_nfs,
   then mount complains about NFS support not compiled in.

No, that's the NFS problem listed above.  Sorry about that, really.
I added the NFS options dialog at the last minute after very little
sleep and I broke it! :-(

   a) /tmp doesn't have proper permissions, so editing files as normal
      user fails. Solution: chmod 1777 /tmp

Fixed for 2.1.

   b) /etc/hostname.interface name is missing, in my case
      /etc/hostname.ed0 was missing ... So networking isn't setup 
      properly since ifconfig fails because of the missing file
      /etc/hostname.ed0

This actually happens if you do a network install, but for the others not.
This will be fixed in 2.1.

   c) The symbolic link /sys -> /usr/src/sys is missing. 
      Would be nice to find it again there ;-)

Fixed in 2.1..  :-)

   d) When exporting filesystems and mounting via NFS there is an
      error message, that /var/tmp/...db is missing

??  We haven't seen this??

   e) maybe I'm wrong, but I think /etc/hosts is missing the
      hostname without domain appended and the alias 'loghost' ?!

Bug, fixed in 2.1! :(

   f) /sys/i386/conf/LINT is missing the option DUMMY_NOPS and
      TUNE_1542 for reference. I use these options without any problems
      ...

I don't think they do anything anymore.

   Would be nice if you could correct all or some of it before
   distributing the release on CD Rom !!! I think many people might have
   severe problems to install the release ...

Actually, the CD doesn't suffer from a lot of these problems since the user
is going to install using the obvious methods.

But this was our first release of 2.0, and we do realize that there
were some pretty ugly bugs in the installation.  We definitely plan to
do some SERIOUS work on 2.1, and test it a whole lot more than we had
time to test 2.0.  2.0 was very very late, and we simply ran out of time
in our schedule! :-(

I hope that most of the problems people encounter are confined to the
installation.  Most people seem to have no problems once they're actually
up and installed.

					Jordan
--
Jordan K. Hubbard	FreeBSD core team	Clams are your friends

