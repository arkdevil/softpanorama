
                         В Ь Ю Э Р  Ш Р И Ф Т О В  "HPVIEWER"
                                     версия 1.6х
                        Руководство пользователя от 03.05.1992 г.

         HPVIEWER - утилита (вьюэр) для быстрого просмотра bit-map шрифтов в
                   формате HP LaserJet+,II и их моментального редактирования.

         HPVIEWER - это одна из программ пакета LASERUSS, разработанного
              для управления шрифтами в настольных издательских системах.

         Пакет программ LASERUSS предназначен для редактирования/модификации
         шрифтов в наиболее распространенных форматах:  HP Laser Jet+,
         ChiWriter, Epson GQ и других.  Основная концепция AFE состоит в том,
         что описание шрифта в формате HP LJ+,II (HP PCL) является самым общим
         и потому целесообразно принять его в качестве базового.  Все
         подлежащие редактированию шрифты в иных форматах преобразуются
         (конвертируются) к базовому типу, а после обработки возвращаются в
         первоначальный формат.  С точки зрения разработчика - это самый
         простой и эффективный путь.

         (На сегодня известны пакеты, использующие шрифты, конвертированные из
         HP LJ+,II формата:  Paint Brush IV+ (Microsoft), ChiWriter, Xerox
         Ventura Publisher и др.)

         Весьма эффективным является использование лазерных шрифтов в пакетах
         презентативной графики - например Colonel Scientific Grafics,
         известного как EGA Tools.

         Ядром пакета является процессор шрифтов AFE, который обеспечивает
         практически все функции дизайнера шрифта (аналоги - FG5 фирмы VS Soft
         и SCFE фирмы Soft Craft Inc.  ) и отличается от них тем, что в нем
         учтены специфические потребности "советских" пользователей НИС.  В
         первую очередь это касается возможности автоматической
         перегруппировки шрифта для работы с разными кодовыми таблицами.
         Наряду с этим обеспечиваются также загрузка принтера, печать тестов,
         полный доступ к заголовку шрифта.  Немаловажной особенностью AFE
         является и то, что он находит и при возможности исправляет ошибки в
         шрифтах некоторых разработчиков.  Кроме того, документация к пакету
         содержит техническую информацию, малодоступную большинству
         пользователей.

              Итак, Вы можете работать в AFE на трех уровнях детализации:

         УРОВЕНЬ 1 - работа с заголовком шрифта, групповые (перестановка,
                     наклонение, удаление, масштабирование и т.п.)
                     файловые операции и загрузка принтера.
         УРОВЕНЬ 2 - работа с образами букв и раскладкой шрифта;
         УРОВЕНЬ 3 - работа с образами отдельных символов на уровне пикселов.

         Каждому из перечисленных уровней соответствует свой экран и меню.

         Работа с ВЬЮЭРОМ полностью идентична работе с процессором AFE на
         УРОВНЕ 2 и 3.

         HPVIEWER - это сокращенная версия процессора шрифтов AFE, которая
         используется в качестве утилиты для быстрого просмотра bit-map
         шрифтов в формате HP LaserJet+,II и их моментального редактирования.


         Настоящая версия вьюэра распространяется бесплатно, хотя
         использование ее в составе издательской системы экономит массу
         времени верстальщика и художника - а значит она приносит доход!
         (Поскольку разработчика все-таки "давит жаба", функция сохранения
         на диске действует только для шрифтов размером меньше 12 кегля.-
         Примечание разработчика)

              Разработчик тешит себя мыслью, что найдется один из ста
              пользователей вьюэра, который сообразит, что приобретение пакета
              LASERUSS - это прекрасное вложение денег, так как уровень
              шрифтового оформления его печатной продукции поднимется и значит
              усилит его позиции на рынке печатной продукции.

         Требования к ПЭВМ на которой предполагается использовать HPVIEWER

              1. EGA/VGA монитор и соответствующая карта,
              2. 180 Кбайт доступной памяти,
              3. DOS 3.0 или старше,
                 мышь и русификатор экрана/клавиатуры желательны, но не
                 необходимы.

              Поддерживаемый формат : шрифты HP LaserJet+,serie II типа
              0 - 32-127;
              1 - 32-127, 160-255;
              2 - 0-255 (только SerieII и старше).

              Максимальный размер матрицы образа символа ограничен
              следующим соотношением: Высота*Ширина < 65400 и Высота < 340.

              В графическом режиме подсказки и меню на русском или английском -
              по выбору пользователя.

         Запуск:
         >HPVIEWER [/options,...] имя_файла_шрифта [имя_нового_файла_шрифта]<CR>.

         Допустимы следующие опции командной строки:

          /R(ussian) - работать на русском языке (по умолчанию - английский)
          /Q(uiet)   - не показывать заголовок шрифта
          /A(lternative) - сразу показать содержимое шрифта начиная со 128 кода
          /V(entura)     - сразу показать содержимое шрифта начиная со 160 кода

         имя_нового_файла_шрифта - имя файла, где будет сохранен шрифт при
         выполнении команды SAVE.  Проверка на существование не производится,
         т.е.  перезапись произойдет автоматически (если файл ранее
         существовал).

         Целесообразно подключить вьюэр через МЕНЮ РАСШИРЕНИЙ Norton
         Commander'a.  Включите в файл NC.EXT строку вида:

         SFP:  D:\LASERUSS\HPVIEWER /VQ !.!

         После этого любой .SFP шрифт вы немедленно увидите, указав на него
         курсором Norton'а и нажав <CR>.

         Т.о.  в комплект поставки пакета LASERUSS входит процессор AFE и
         несколько утилит-конверторов (по дополнительному заказу) и
         сокращенная версия HPVIEWER, которая используется в качестве вьюэра
         для быстрого просмотра шрифтов.

         В принципе, система спроектирована так, что изучение документации
         можно опустить, однако последнее предполагает, что пользователь
         хорошо знает устройство шрифтов в формате HP PCL.  В противном случае
         рекомендуется все же просмотреть раздел, касающийся структуры
         заголовка шрифта (в конце этого файла).

         Все управляющие клавиши имеют обычный смысл, все операции, влекущие
         трудноисправимые последствия (например удаление символа), проводятся
         лишь после дополнительного подтверждения со стороны пользователя.

      УРОВЕНЬ 2.

         Экран УРОВНЯ 2 предоставляет пользователю возможность просмотра
         загруженного шрифта.  Образы символов и соответствующие им ASCII коды
         выводятся на экран в масштабе 1:1, т.е.  1 точке на печати
         соответствует 1 пиксел.  При этом физический размер букв на экране
         разумеется во много раз больше, чем на бумаге.

         Экран УРОВНЯ 2 появляется сразу при использовании программы HPVIEWER,
         которая предназначена для быстрого просмотра шрифта и внесения в него
         мелких исправлений, не затрагивающих заголовок шрифта.

         Просмотр в режиме "листания" обеспечивается стандартными клавишами
         управления курсором.

         Специальная панель позволяет управлять просмотром с помощью мыши.
         ВНИМАНИЕ!  Если панель на экране не отображена - значит в текущей
         версии AFE функции работы с мышью на УРОВНЕ 2 не установлены.

         Выбор образа символа для редактировая производится простым нажатием
         на соответствующую клавишу или вводом ALT-кода.  При наличии мыши
         достаточно указать на символ и нажать левую клавишу мыши.

         При редактировании шрифта типа 2 образы символов с кодами от 0 до 31
         доступны только с помощью мыши.

         На УРОВНЕ 2 поддерживается также целый ряд функций по просмотру,
         редактированию и модификации раскладки образов символов, которые
         перечислены в меню.

         Выбор функций меню осуществляется как нажатием соответствующих
         клавиш, так и с помощью мыши.

                  Схема расположения элементов на экране УРОВНЯ 2
     ╔═══════════════════════════════════════════════════════════════════════╗
     ║       Копировать Из "А"   в   "В"                                     ║
     ║        Вы уверены?  Yes No                                            ║
     ║  ┌──────────┐  ┌──────────┐  ┌──────────┐       ┌──┐                  ║
     ║  │   ┌───┐  │  │   ┌────  │  │   ┌──┐   │       │░░│                  ║
     ║  │   ├───┤  │  │   ├───┐  │  │   ├──┴┐  │       ├──┤  Все коды    Tab ║
     ║  │   │   │  │  │   └───┘  │  │   └───┘  │       │^ │  Схема        F1 ║
     ║  └──────────┘_ └──────────┘  └──────────┘       ├──┤  Сохранить    F2 ║
     ║    А #161    ^V  Б #162   |<>| В #163           │  │  Смотреть     F3 ║
     ║              vD            VDX                  │  │  РедактороватьF4 ║
     ║  ┌──────────┐-Y                                 │  │ >Копировать   F5<║
     ║  │   ┌───┐  │                                   │  │  Перенести    F6 ║
     ║  │   │      │                                   │  │  Обменять     F7 ║
     ║  │   │      │                                   │  │  Удалить      F8 ║
     ║  └──────────┘                                   │  │  Повторить    F9 ║
     ║    Г #164                                       ├──┤  Выход        F10║
     ║                                                 │v │  Отменить     Esc║
     ║                                                 ├──┤                  ║
     ║                                                 │░░│                  ║
     ║                                                 └──┘                  ║
     ╚═══════════════════════════════════════════════════════════════════════╝

         Функции, описанные ниже, могут вступать в диалог с пользователем.
         Если запрашивается код символа, это означает, что необходимо либо
         нажать соответствующую клавишу либо ввести ALT-код либо указать на
         образ символа курсором и нажать левую клавишу мыши.

         Предварительно шрифт можно "пролистать".  При запросе подтверждения
         на выполнение ("Are You Sure ?  (Y/N)") следует ответить "Y" или
         указать курсором на "Yes" и/или нажать левую клавишу мыши в противном
         случае нажать любую иную клавишу или правую клавишу мыши.

         Параметр VDX определяет расстояние в пикселах между изображениями
         символов по горизонтали, а VDY - по вертикали.  Величины их задаются
         в меню \Конфигурация\Графика\.

              Использование "лифта" с помощью мыши:

               ┌──┐
               │░░│  Экран назад
               ├──┤
               │^ │  Строка назад
               ├──┤
               │  │  Вперед/назад пропорционально высоте лифта
               ├──┤
               │v │  Строка вперед
               ├──┤
               │░░│  Экран вперед
               └──┘

         Начиная с версии 1.60, лифт сопровождает пара чисел, указываю- щих
         диапазон кодов, которые появятся на экране, если нажать клавишу мыши.
         (Это действует, когда курсор мыши находится в области лифта.)

         Все привычные клавиши управления курсором действуют как это принято.

         Для выбора функции меню поместите курсор в область списка.  Вокруг
         ближайшего пункта возникнет светящаяся рамка - она перемещается вслед
         за курсором.  Нажатие левой клавиши мыши активизирует функцию.

         Обзор функций меню:

         (На экране    Ctrl-W Открыть/Закрыть протокол перегруппировки.
          не отражено)        Открытие сопровождается высоким звуком,
                              закрытие - низким.

         Все коды      Tab  - показать/скрыть все неиспользуемые коды.
       (Symbol Set)           для шрифта типа
                                         0 - 32-127 (7-bit)
                                         1 - 32-127, 160-255;
                                         2 - 0- 255.

           Схема         F1 - показать/скрыть положение образа символа в
       (Show/Hide Box)        матрице.
                              Положение  символа  в  рамке  позволяет судить о
                              его   положении   относительно   базовой   линии
                              (обозначена горизонтальной линией) и его  ширине
                              (вертикальная линия).


         Сохранить       F2 - сохранение шрифта на диске во временном
          (Save)              файле ( используется для сохранения
                              промежуточных результатов работы).

         Смотреть        F3 - переход к просмотру шрифта в пропорциональном
          (View)              режиме.

         Редактировать   F4 - редактировать образ, переход на УРОВЕНЬ 3.
          (Edit)              Команда   в           явном   виде  в   основном
                              используется      тогда,      когда       образа
                              требующегося   символа   вообще   не  существует
                              в    шрифте.    В    неявном    виде     команда
                              Редактировать    вызывается    нажатием    любой
                              алфавитно-цифровой   клавиши    или    введением
                              ALT-кода  или   указанием  курсором   на   образ
                              символа на экране.

         Копировать      F5 - копировать образ из одного символа в
         (Copy)               другой.   Команда запрашивает  сод символа,
                              образ  которого  будет  копироваться  в   другое
                              место,   замещая   (создавая)   образ   символа,
                              который запрашивается вторым.

       Передвинуть       F6 - перенести образ первого введенного символа
         (Move)               во второй.

          Обменять       F7 - поменять образы местами.
         (Exchange)

          Удалить        F8 - уничтожить образ символа по запросу.
         (Delete)

         Повторить       F9 - повторить редактирование. Используется для
         (Repeat)             возврата на УРОВЕНЬ 3 при работе с одним и
                              тем же образом.

         Выход          F10 - возврат на УРОВЕНЬ 1 в основное меню.
         (Exit)

         Отменить       Esc - отменить операцию, отказаться от запроса
         (Escape)             на копирование удаление, вернуться на УРОВЕНЬ 1
                              и т.д.  Аналогичную функцию выполняет правая
                              клавиша мышки.

         УРОВЕНЬ 3.

         УРОВЕНЬ 3 редактора AFE предназначен для редактирования образов
         символов на уровне точек.  Кроме того здесь же устанавливаются
         индивидуальные аттрибуты образов символов, такие как ширина, левый
         отступ и др.

         Экран УРОВНЯ 3 состоит из четырех элементов:

         1) Окно редактора(OP), в котором проводится работа по редактированию.

         Окно редактора представляет собой координатную сетку, ячейки в
         которой заполняются согласно образу символа.  Курсор передвигается по
         окну в четырех режимах, перечисленных ниже.  Редактирование сводится
         к инвертированию отдельных ячеек или преобразованию образа в целом
         (сдвиг, реверсирование, скалирование и т.п.).  Сетка может быть
         скрыта.

         Вызов функций редактирования проводится с помощью функциональных
         клавиш или комбинаций ALT-<алфавитная клавиша>.  Список функций
         приведен ниже так, как он появляется в окне HELP'а.

         Условные обозначения в окне редактирования:  зеленая горизонтальная
         линия - положение базовой линии, желтая вертикальная - ширина образа
         символа, белая рамка вокруг образа очерчивает область непосредственно
         сохраняемую в виде последовательности байтов, лиловая сплошная
         вертикальная линия показывает, что образ выступает за левую границу
         матрицы (обычно наблюдается в италических шрифтах).

         2) Окно контрольного индикатора(КО), в котором отображается текущий
         образ в масштабе 1 точка:1 пиксел.


         Окно индикатора автоматически выключается, если размер точки в окне
         редактирования меньше 3 пикселов.  Его можно также выключить из меню
         УРОВНЯ 1 Конфигурация.


         3) Текстовое окно с информацией о режиме редактирования и текущем
         положении курсора:

                 ┌───────────────────────────┐
                 │ Курcoр     :(  1,  8)     │
                 │ Режим      : Скoльжение   │
                 │ Симв.: "j"  Кoд :106      │
                 └───────────────────────────┘

                 ┌───────────────────────────────────────────────────────┐
                 │  Cursor     :(  1,  6)   координаты курсора           │
                 │  Cursor Mode:            режим курсора                │
                 │               Floating      плавающий                 │
                 │               Filling       непрерывное заполнение    │
                 │               Multy-toggle  непрерывное инвертирование│
                 │               Erasing       непрерывное очищение      │
                 │                                                       │
                 │  Char : "8"  Cod : 56    символ, образ которого       │
                 │                             редактируется, и его      │
                 │                             ASCII код                 │
                 └───────────────────────────────────────────────────────┘

         4) Текстовое окно с HELP'ами по командам или с памяткой пользователя.

   ┌───────────────────────────┐      HELP 1 - <F1>
   │        H E L P  1         │
   │ HELP              F1      │ вызов HELP'а по управлению курсором
   │ HELP редaктoрa  s-F1      │ подсказка по командам редактирования
   │ MEMO            a-F1      │ вызов памятки со схемой конструктора
   │ HELP функц.     c-F1      │
   │ Пoкaзaть cетку    F4      │ скрыть/показать разметочную сетку
   │ Вкл./Выкл HELP    F5      │ выключить подсказку
   │ Вкл./Выкл КО      F6      │ выключить контрольное окно
   │ HELPs in English  F8      │ переключение языка подсказки
   │ Рaзмер  грз ув. a-F8      │ увеличить размер окна редактора горизонтальный
   │ Рaзмер  грз ум. c-F8      │ уменьшить размер окна редактора горизонтальный
   │ Рaзмер  врт ув. a-F9      │ увеличить размер окна редактора вертикальный
   │ Рaзмер  врт ум. c-F9      │ уменьшить размер окна редактора вертикальный
   │ Oбнoвить экрaн    F9      │ перерисовать экран
   │ Вoзврaт           F10,BkSp│ возврат на УРОВЕНЬ 2
   │        MЫШКА:             │
   │ Левaя Кл. - Инвертирoвaть │ левая клавиша инвертировать точку
   │ Прaв. Кл. - Индикaтoр     │ правая клавиша обновить индикатор
   │ Прaв.Кл   - Возврат       │ правая клавиша + левая выход на УРОВЕНЬ 2
   │                           │
   └───────────────────────────┘

   ┌───────────────────────────┐   HELP 2 - <Shift-F1>
   │        H E L P  2         │
   │ Зaпoлнение      a-F       │заполнять все элементы растра под курсором
   │ Инвертирoвaние  a-T       │инвертировать все элементы растра под курсором
   │ Стирaние        a-E       │очищать все элементы растра под курсором
   │ Toчкa/Сбрoc     SpBar     │инвертировать элемент растра под курсором
   │                           │
   │                           │В следующих командах:
   │                           │* при вставке копировать левый столбец или
   │                           │  верхний ряд
   │ Вcт/Убр ряд     a-R *+/-  │  вставить(+)/убрать(-) ряд
   │ Вcт/Убр кoлoнку a-C *+/-  │  вставить(+)/убрать(-) столбец
   │ Редaкт. ряд     Ins/Del   │редактировать ряд как строку
   │ Скaлирoвaть     a-S       │промасштабировать(проскалировать образ)
   │ Oтрaз. Up>Dwn   a-H       │отразить часть образа над курсором вниз
   │ Oтрaз. Lft>Rt   a-V       │отразить слева направо относительно курсора
   │ Oбрaтить врт    a-O       │реверсировать относительно гориз. оси
   │ Oбрaтить грз    a-P       │реверсировать относительно верт. оси
   │ Пoвернуть       a-Q       │повернуть на 90 градусов
   │ Инвертирoвaть   a-I       │инвертировать черное с белым
   │ Изменить ширину a-W       │запрос на изменение ширины символа
   │ Уcтaнoв. ширину  ^W       │установить ширину по положению курсора
   │                           │
   │                           │
   └───────────────────────────┘

                                   HELP 3 - <Ctrl-F1>
   ┌───────────────────────────┐
   │     H E L P  3            │
   │ ^home            ^PgUp    │  перейти в левый/правый верхний угол матрицы
   │  home      ^      PgUp    │  \
   │   <      КУРСOР     >     │   |курсор подвижен в восьми направлениях
   │  end       v      PgDn    │  /
   │ ^end             ^PgDn    │  перейти в левый/правый нижний угол матрицы
   │ Сдвиг врx         a--     │  сдвинуть образ вверх в матрице
   │ Сдвиг внз         a-+     │  сдвинуть образ вниз в матрице
   │ Сдвиг впрв        a-2     │  сдвинуть образ влево в матрице
   │ Сдвиг влвo        a-3     │  сдвинуть образ вправо в матрице
   │ Принять           Enter   │  обновить индикатор
   │ Вoccтaнoвить      Esc     │  восстановить образ символа
   │ Вoзврaт       F10,BkSp    │  возврат на УРОВЕНЬ 2
   │                           │
   └───────────────────────────┘


   ┌───────────────────────────┐ MEMO - <Alt-F1>
   │       M E M O             │
   │┌───────────┬─             │
   ││           │^             │
   ││╔═════╤╗───┼─TopOfs:  33  │высота символа над базовой линией
   ││║     │║ ^ │              │
   ││║      ║ │ │              │
   ││║     │║ v │              │
   ││║──────╫───┼─BaseLn:  40  │базовая линия
   ││║─ ── │╫───┼─UndrLn:  35  │подчеркивание (справочно)
   ││╚═════╪╝   │V             │
   │└──────┼────┼─CellHt:  50  │высота матрицы
   │       │    └─CellWd:  47  │ширина матрицы
   │       └──SimbWd    :  16  │ширина символа в точках
   │    Simbol Width    :  24  │ширина символа фактическая
   │ Part of LftOfs     :   0  │поправка к Left Offset
   │ Part of TopOfs     :   0  │поправка к Top Offset
   └───────────────────────────┘

                         Редактирование образов символов.

         Техника редактирования образов символов крайне проста:  подведите
         курсор к точке которую Вы хотите поставить/убрать и нажмите SpaceBar
         (Пробел) или левую клавишу мыши.  Злемент под курсором инвертируется.

         Если необходимо провести линию (или ломаную) точек введите команду
         Alt-F (Fill - заполнить) т.е.  включите режим заполнения.  Теперь при
         движении курсора все элементы под ним независимо от того были они
         заполнены или нет заполняются.

         Обратная операция очистки выполняется по команде Alt-E (Erase -
         удалить).

         Команда Alt-T (Toggle - отметить) инвертирует все элменты через
         которые проходит.

         Отмена последних двух операций - нажатие SpaceBar'а.

         Enter (Ввод) - обновляет контрольное окно.

         Esc- отмена  всех изменений  внесенных в  образ символа  и возврат на
              УРОВЕНЬ 2.

         Клавишами Ins/Del Вы можете редактировать ряд элементов, как строку
         текста с тем отличием, что по Ins в ряд вставляется на месте курсора
         пустой элемент.

         Команды вставки и удаления столбца (Column) устроены так:

              Alt-C а затем : + если Вы хотите вставить пустой столбец
              Alt-C а затем : * если Вы хотите вставить столбец такой же
                                как слева от курсора
              Alt-C а затем : - если Вы хотите удалить столбец

         Команды вставки и удаления ряда (Row) устроены так:

              Alt-R а затем : + если Вы хотите вставить пустой ряд
              Alt-R а затем : * если Вы хотите вставить ряд такой же
                                как сверху от курсора
              Alt-R а затем : - если Вы хотите удалить ряд

         Операции отражения:

         Alt-H часть образа символа находящаяся над рядом, в котором находится
         курсор, отражается относительно нижележащего ряда вниз.

         Alt-V часть образа символа находящаяся слева от столбца, в котором
         находится курсор, отражается относительно соседнего столбца вправо.

         Если необходимо, происходит обрезание образа в отраженной части.

         Операции обращения:

         Oбрaтить образ вертикально (т.е.  поменять местами верх и низ) можно
         командой Alt-O (реверсировать относительно горизонтальной оси).

         Oбрaтить образ горизонтально (т.е.  поменять местами право и лево)
         можно командой Alt-P (реверсировать относительно вертикальной оси).

         Операция поворота по Alt-Q возможна лишь при квадратной матрице.

         Операция инвертирования образа по Alt-I позволяет получить т.н.
         "выворотку" при печати на принтерах, не позволяющих это делать на
         программном уровне.  Ширина области инвертирования выбирается
         автоматически по максимальному значению либо ширины образов, либо
         ширины области свертки.

         Установка новой ширины символов осуществляется двумя путями:  либо
         прямой командой Ctrl-W (^W), которая фиксирует положение курсора,
         либо по команде Alt-W которая запрашивает численное значение.

         Сдвиг образов вверх-вниз и вправо-влево осуществляется командами:
         Alt--, Alt-+ и Alt-2, Alt-3 соответственно.

         Операция скалирования позволяет изменить размер образа
         (промасштабировать его).  По команде Alt-S пользователь получает
         запрос на ввод параметров скалирования в следующем порядке:

              Горизонтальный числитель   X1
              Горизонтальный знаменатель X2
              Вертикальный числитель     Y1
              Вертикальный знаменатель   Y2

         Отказаться от скалирования можно в любой момент диалога нажав Esc.
         Параметры сканирования задаются только в меню УРОВНЯ 1.  Результат
         скалирования виден тут же в окне редактора, если они Вас не
         устраивает - нажмите Esc и повторите операцию с новыми параметрами.

         Отрепетировав скалирование на одном-двух символах на УРОВНЕ 3,
         возвращайтесь на УРОВЕНЬ 1 и скалируйте весь шрифт автоматически.

         Возврат на УРОВЕНЬ 2 с сохранением изменений - BackSpace, F10, правая
         клавиша мыши.  Без изменений - Escape.

         _____________________________________________________________________


         _____________________________________________________________________

                          Краткое описание устройства шрифта в
                             формате HP LaserJet+.

              Для  целей   дальнейшего  изложения   введем  понятие   текущего
              указателя (Current Pointer  (CP)) печати.   CP по своему  смыслу
              эквивалентен курсору на экране дисплея - он указывает на позицию
              на   листе   бумаге,   где   будет   производится   печать.   CP
              позиционируется с точностью до 1 точки.

              1 точка (dot) имеет размер 1/300 дюйма.
              Размер шрифтов в полиграфии определяется в пунктах:
              1 пункт - 1/72 дюйма. 24-й кегль означает высоту шрифта в
              24 пункта, т.е. ориентировочная высота литер измеренная в точках
              будет 300/72*24=100 точек.


                     Схема расположения образа символа в матрице
                  0              (портретная ориентация)
                  │/ Начало отсчета
                0─o─────────────────────────────────────────────┼─
                  │..^.....................................^....│
                  │..│.....................................│....│
          ────────│..B..╔═══════════════════════════╗......C....│
        ^    ^    │..a..║....█████████....██........║......e....│
        │    │    │..s..║..███.......███..█.........║......l....│
        │    │    │..e..║.██...........██.█.........║......l....│
        │C   │T   │..l..║██.............███.........║...... ....│
        │h   │o   │..i..║██..............██.........║......H....│
        │a   │p   │..n..║██..............██.........║......e....│
        │r   │    │..e..║██..............██.........║......i....│
        │a   │O   │..│..║.██............███.........║......g....│
        │c   │f   │..│..║..██..........██.█.........║......h....│
        │t   │f   │..│..║....██.......██..█.........║......t....│
        │t   │s   │..│..║......████████..██.........║......│....│
        │e   │e   │..│..║................██.........║......│....│
        │r   │t   │..│..║................██.........║......│....│
        │    │    │..│..║................██.........║......│....│
        │H   v    │..v..║................██.........║......│....│
        │e ───────P─────╬═══════════════════════════╬═══E══│════│───────────────
        │i        │.....║................██.........║......│....│
        │g        │.....║.██............██..........║......│....│
        │h        │.....║.███.........███...........║......│....│
        vt        │.....║...███████████.............║......│....│
        ──────────│.....╚═══════════════════════════╝......│....│
                  │........................................│....│
                  │<──────Cell Width───────────────────────│───>│
                  │........................................v....│
                 ─┼─────────────────────────────────────────────┼─
                  │<───>│<─Left Offset      │           │       │
                  │     │                   │           │
                  │     │Character width    │           │
                  │     │<─────────────────>│           │
                  │    Delta X                          │
                  │<───────────────────────────────────>│

              Образ символа  располагается в  матрице с  вертикальным размером
              (Cell Height) и горизонтальным размером (Cell Width).  Положение
              базовой линии (BaseLine)  отсчитывается от левого  верхнего угла
              матрицы.   Базовая  линия  -  это  линия,  вдоль  и относительно
              которой принтер размещает символы при печати (вне зависимости от
              размера шрифта).   Эти три  параметра являются  глобальными  для
              всего шрифта и содержатся в его заголовке.


              В языке  управления печатью  PCL, используемом  в принтерах типа
              Hewlett  Packard  Laser  Jet,  для  кодирования  образа  символа
              используется   минимально   возможное   число   байтов,  которое
              определяется  следующим  образом.    Образ  символа   окружается
              прямоугольной  рамкой  (на  схеме  обозначена  двойной  линией),
              высота которой (Character  Height) определяется самым  верхним и
              самым   нижним   рядом   точек,   составляющих   образ  символа.
              Аналогично  левая  вертикальная  сторона  рамки  проходит  через
              крайний левый столбец точек, а правая сторона определяется  так,
              чтобы и весь образ символа  оказался внутри рамки и чтобы  число
              точек в ряду по горизонтали (Character Width) внутри рамки  было
              кратно восьми.  (Что легко объяснить тем, что кодирование образа
              проводится  путем  сопоставления  заполненных  элементов матрицы
              единице,  пустых  -  нулю  и свертывания последовательных восьми
              битов в байт.)

              Внимание! В  редакторе AFE  v.1.42 пользователь  может влиять на
              процесс   свертки,   устанавливая    его   параметры   в    меню
              \Преобразования\Уст.компрессию.

              Положение самой  рамки внутри  матрицы определяется  параметрами
              Top Offset  (смещение вершины)  и Left  Offset (левое смещение).
              Точка P на рисунке показывает положение так называемой Character
              Reference  Point.   Это  точка  от  которой  ведется  отсчет при
              вычислении  положения  рамки  в   матрице  и  одновременно   это
              начальное  положение  CP  до  начала  печати символа.  Положение
              текущего  указателя   CP  после   печати  символа   определяется
              параметром Delta X (точка  E на схеме), численно  равного ширине
              образа символа  умноженной на  4 (при  печати в пропорциональном
              режиме).  (При печати  в режиме фиксированной ширины  расстояние
              между   символами   определяется   величиной   параметра  PITCH,
              указываемого в заголовке шрифта.)

              Приведем для справки основные соотношения между параметрами:
             (для HP Laser Jet+)

             1   <  Cell Width    <= 255
             1   <  Cell Height   <= 255
             0   <  BaseLine      <= Cell Height -1

            -127 <  Left Offset   <= 127
            -128 <  Top  Offset   <= 127

               0 <  Character Width <= 128

              Если Вы меняете Cell Height, то меняется пространство
              под базовой линией.
              Изменение положения базовой линии приводит к смещению литеры.
              Совместное изменение Base Line и Cell Height позволяет менять
              пространство над базовой линией.
              Общее правило таково: если надо увеличить высоту матрицы,
              увеличте сначала высоту, а потом положение базовой линии,
              при уменьшении действуйте в обратном порядке.
              Следите, чтобы высота ячейки не стала меньше, чем высота самого
              высокого символа. Последнее относится и к изменению ширины
              ячейки.

                     Структура загружаемых шрифтов.

            Перед заголовком шрифта может стоять команда присвоения
            идентификационного кода ID (Esc *c#D,  0 <#< 32767).

            Заголовок шрифта описывает глобальные характеристики шрифта.
            Сигнатура заголовка: Esc )s#W

            Font Type     тип расширения кодовой таблицы
                             печатаемые коды
              0               32-127;
              1               32-127, 160-255;
              2               0-255 (только SerieII и старше).

            BaseLine      положение базовой линии
                          0 < BaseLine <= Cell Height -1

            Cell Width    высота матрицы
                           1<Cell Width <= 255

            Cell Height   ширина матрицы
                           1<Cell Height<= 255

            Orientation   ориентация шрифта
                          0 - книжная (портретная)
                          1 - альбомная (пейзажная)

            Spacing       0 - моноширинный
                          1 - пропорциональный

            Symbol Set    тип набора символов в шрифте

              Название       тип      численное
                                      значение, хранимое
                                      в заголовке
              ROMAN 8         8U       277
              MATH 8          8M       269
              LINE DRAW       0B         2

            Pitch         плотность шрифта в символах на дюйм(cpi)
                          в заголовке хранится величина равная
                          горизонтальному разрешению принтера (300 точек
                          на дюйм) деленному на число символов на дюйм и
                          умноженное на 4.
                          2 < Pitch < 1260
                          Символов на    Расчет      Pitch-
                          дюйм                       хранимая
                                                     величина
                          8             (300/8)*4    150
                          10            (300/10)*4   120
                          12            (300/12)*4   100

            Height        высота шрифта в 1/4 долях точки.
                          Сумма максимальных высоты и глубины символов
                          над и под базовой линией умноженная на 4 дает
                          Height.  Переведите это значение в пункты
                          если Вам нужно вызвать шрифт этого кегля по
                          характеристике (см. ниже).

            Style         0 - прямой
                          1 - наклонный

            Thickness     жирность начертания
                          от  -7    до   +7
                             тонкий     толстый

            Type Face     тип гарнитуры (очертание)

              Значение     Название
                0           LINE PRINTER
                1           PICA
                2           ELITE
                4           HELVETICA
                5           TIMES ROMAN
                21          PALATINO и т.д.


              После заголовка может следовать поле комментариев, а затем идет
              описание образов символов, каждый из которых состоит из
              команды загрузки образа символа (Esc ( s ## W),
              затем заголовка образа символа длиной 16 байт и
              тела образа символа переменной длины.

             После определений всех символов стоит команда присвоения статуса
             хранения (сигнатура: Esc *c#F), где # может принимать такие
             значения:

              Значение #        управлющая функция
                 0            уничтожить все шрифты(временные и постоянные)
                 1            уничтожить все временные шрифты
                 2            уничтожить шрифты последний специфицированный ID
                 3            уничтожить символ (спец. ранее)
                 4            сделать шрифт временным
                 5            сделать шрифт постоянным
                 6            копировать/присвоить текущий шрифт


              В конце рассмотрим правила идентификации шрифта по
              характеристикам:

              1. Ориентация                 Esc&l0O  портретный
              2. Symbol Set                 Esc(8U   ROMAN 8
                                            Esc(s
              3. Spacing (ширинность)            0p   fixed
              4. Плотность печати (cpi)         10h   10 cpi
              5. Высота                         12v   12 пунктов!
              6. Стиль (прямота)                 0s   прямой
              7. Жирность                        0b   средней жирности
              8. Гарнитура (начертание)          3T   гарнитура курьер

              Или, если шрифту присвоен ID номер он становится активным по
              команде Esc(#X.

              Для принтеров HP Laser Jet II, III многие ограничения,
              приведенные выше снимаются, однако это отдельный разговор.

              Все подробности содержатся в книге
               HP LaserJet II Technical Reference Manual.
              В ней подробно описана вся система команд принтера,
              управление шрифтами и графикой. 280 страниц.

              Ксерокопию этой книги Вы можете заказать у разработчика AFE.

              Русский перевод также скоро можно будет заказать.
              ________________________________________________
              Автор - Серебрянный Владимир Янсенович
                      310103 г.Харьков-103, а/я 4993

                       тел: (0572) 33-84-53 дом
                                   30-79-81 раб (10.00-20.00)

