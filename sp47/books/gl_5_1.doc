              5.ВЗАИМОДЕЙСТВИЕ С ФАЙЛАМИ И УСТРОЙСТВАМИ

                  5.1.Организация файловых структур

         Файлы представляют собой особым образом организованные наборы
    данных, размещаемые на внешних устройствах и допускающие либо од-
    носторонний, либо двусторонний обмен с об'ектами программы, нахо-
    дящимися в оперативной памяти.
         Файлы, расположенные на дисковых запоминающих усторйствах,
    играют роль постоянных или временных хранилищ, к которым могут
    иметь доступ одна или несколько программ. Для их идентификации ис-
    пользуются полные или сокращенные файловые спецификации, принятые
    в операционной системе :

               d:\basic\gwbasic\date1.xxx
               gwbasic\date1.xxx
               gwbasic\date1
               date1

         Полная спецификация файла, включающая имя дисковода, иденти-
    фикаторы корневого и присоединенных оглавлений и собственно имя
    файла используются в том случае, когда файл хранится не в текущем
    оглавлении. Идентификация файлов текущей директории осуществляется
    по восьмисимвольному имени с возможной добавкой трехсимвольного
    расширения. В отличие от идентификаторов других об'ектов имена
    файлов не могут содержать точек (точка воспринимается как раздели-
    тель имени и расширения), зато допускают использование следующих
    символов :

                    ()  []  @  #  ^  %  &  _  /  '  -

         Файлы, располагаемые на других внешних устройствах, обычно
    идентифицируют по общепринятым системным именам - LPT1:, LPT2:,
    LPT3:, COM1:, COM2:, KYBD:, SCRN:.
         Использование длинных файловых спецификаций в операторах об-
    мена достаточно неудобно. Поэтому вместо внешних идентификаторов
    в этих процедурах используются условные целочисленные номера, при-
    писываемые файлам в момент их инициализации. В зависимости от си-
    туации программные номера файлов иногда выделяются предшествующим
    символом #.
         Характерной особенностью любой файловой структуры является
    разбиение файла на записи - регулярные порции данных, выступающие
    в процедурах обмена как нечто цельное. При этом различают записи
    физические и записи логические. Размеры физических записей регу-
    лируются операционной системой и выбираются из соображений эффек-
    тивного функционирования соответствующего внешнего устройства.
    Размеры логических записей диктуются нуждами программы. Согласова-
    ние размеров логических и физических записей берет на себя опера-
    ционная система, используя для этой цели различные буфера и управ-
    ляющие блоки.
         Достаточно наглядное представление о записи дает строка с
    числовыми и символьными данными, отображаемая на экране дисплея
    в результате выполнения операторов PRINT или WRITE. Количество
    данных в пределах одной записи, форматы их представления и спосо-
    бы разделения соседних компонент зависят от типа файла и использу-
    емых процедур обмена.
         С точки зрения технологии доступа к содержимому файла раз-
    личают файлы с последовательной организацией и файлы с прямой
    идентификацией записей. В первом случае в операции обмена участ-
    вует очередная доступная запись подобно тому, как это происходит
    при считывании из внутреннего блока данных.
         В файлах прямого доступа каждая запись снабжается номером,
    который в сочетании с длиной записи однозначно определяет ее мес-
    тоположение в файле. Такие файлы могут быть расположены либо на
    гибком диске, либо на винчестере.
         В двоичных (BINARY) файлах имеется возможность адресовать
    каждый байт, что позволяет формировать записи из данных в машин-
    ном формате. Такой способ повышает эффективность использования
    дискового пространства и ускоряет процесс передачи данных.


                    5.2.Инициализация файлов данных

         Процедура приведения файла в состояние готовности к обмену
    носит название инициализации или открытия файла. В процессе ее вы-
    полнения устанавливается связь между спецификацией файла и програм-
    мным номером, под которым он будет выступать в последующих процеду-
    рах обмена, закрепляется системный или программный буфер, использу-
    емый для реализации операторов ввода/вывода, формируются начальные
    значения параметров, расположенных в так называемом блоке управле-
    ния файлом.
         Открывается файл с помощью одной из двух разновидностей опе-
    ратора OPEN :

       OPEN  s_f [ FOR m1] [ ACCESS a] [ p] AS [#]n [ LEN = rl]
       OPEN  m2, [#]n, s_f [,rl]

    Здесь  s_f - полная или укороченная спецификация файла;
           m1  - служебное слово, задающее режим работы файла и прини-
                 мающее одно из следующих значений - APPEND, BINARY,
                 INPUT, OUTPUT или RANDOM;
           m2  - односимвольный признак режима работы, задаваемый бук-
                 вами A (от APPEND), B (от BINARY), I (от INPUT), O
                 (от OUTPUT) и R (от RANDOM);
           a   - служебное слово или сочетание слов, определяющее на-
                 правление обмена (возможные варианты - READ, WRITE
                 или READ WRITE);
           p   - признак защиты файла от других пользователей (возмож-
                 ные значения - SHARED, LOCK READ, LOCK WRITE или LOCK
                 READ WRITE);
           n   - целое число из диапазона [1,255], воспринимаемое как
                 номер файла во всех последующих процедурах обмена;
           rl  - длина записи, целое число из диапазона [1,32767].
         Для файлов с последовательным доступом может быть указан один
    из трех режимов - вводной (INPUT), выводной (OUTPUT) или с дозапи-
    сью (APPEND). Из вводного файла данные можно только читать и, если
    речь идет о дисковом наборе данных, то он должен быть создан зара-
    нее.Точно также должен существовать и файл, прежнее содержимое ко-
    торого предполагается пополнять новыми записями (APPEND). Если вы-
    водной файл на диске к моменту открытия существует, то его прежнее
    содержимое будет потеряно. Если такого файла нет, то его создадут.
         Файлы прямого доступа открываются с атрибутами RANDOM или BI-
    NARY. В первом случае содержимым записи могут быть как текстовые,
    так и числовые значения, преобразованнные из машинного представле-
    ния в символьный формат. Атрибут BINARY, введенный в версиях Turbo
    и Quick BASIC, означает, что числовые данные хранятся в записях в
    машинном формате.
         Параметр, сопровождающий служебное слово ACCESS, характеризует
    направление обмена - READ (разрешено только чтение), WRITE (разре-
    шена только запись), READ WRITE (разрешены и чтение, и запись). Он
    используется в языках GW и Quick BASIC.
         Признак защиты файлов появился в связи с подключением персо-
    нальных ЭВМ к вычислительным сетям. В сети пользователь одной ЭВМ
    имеет возможность доступа к файлам, хранящимся в других ЭВМ. Атри-
    бут SHARED применяется для открытия файлов коллективного пользова-
    ния. С помощью атрибута LOCK READ можно предусмотреть защиту файла
    от чтения его содержимого другими пользователями. Атрибут LOCK
    WRITE запрещает пользователям других ЭВМ модифицировать записи от-
    крываемого файла. Запрет любого обращения извне производится пара-
    метром LOCK READ WRITE. Кроме перечисленных средств защиты, рас-
    пространяемых на все записи файла, в GW и Quick BASIC'е имеется
    возможность установить (LOCK) или отменить (UNLOCK) защиту на кон-
    кретную запись с номером N или группу последовательных записей :

                   LOCK   [#]n, N
                   LOCK   [#]n, [N1] TO N2
                   LOCK   [#]n, [N1] TO END
                   UNLOCK [#]n, N
                   UNLOCK [#]n, [N1] TO N2
                   UNLOCK [#]n, [N1] TO END

         Для файлов типа BINARY указанные выше границы защиты воспри-
    нимаются как номера байтов.
         Инициализация файлов прямого доступа (RANDOM) помимо открытия
    файла сопровождается выделением буфера, используемого для времен-
    ного хранения записи в оперативной памяти. Структура этого буфера
    описывается с помощью оператора FIELD :

                 FIELD  [#]n, l1 AS V1$, l2 AS V2$, ...

         Буфер представляет собой линейный участок оперативной памяти,
    разделенный на последовательные поля символьного типа. Каждое та-
    кое поле имеет фиксированную длину (l1, l2,...), измеряемую в бай-
    тах, индивидуальное имя (V1$, V2$,..) и предназначено для временно-
    го хранения соответствующей компоненты записи. Суммарная длина по-
    лей должна совпадать с длиной записи, об'явленной в операторе от-
    крытия файла или установленной по умолчанию.
         Quick BASIC позволяет наряду с буфером, выделяемым по опера-
    тору FIELD, использовать переменные типа "запись" (см. операторы
    TYPE - END TYPE). Последние по существу своему являются обобщением
    линейной структуры буфера, так как наряду с символьными полями до-
    пускают числовые поля любого типа и даже более сложные поля, кото-
    рые могут быть представлены древовидными структурами.
         Для прекращения доступа к файлу и освобождения связанных с
    ним ресурсов файл закрывают :

                     CLOSE  [#]n1, [,[#]n2, ...]

    Одним оператором CLOSE можно закрыть несколько файлов с номерами
    n1, n2,... . После этого освободившиеся номера могут быть исполь-
    зованы для инициализации других файлов.
         Все открытые файлы можно закрыть и по оператору (директиве)
    RESET. При закрытии выводных файлов содержимое обслуживающих их
    буферов записывается на соответствующий внешний носитель.
         Автоматическое закрытие всех файлов происходит и при выполне-
    нии операторов (директив) CLEAR, END, RUN, SYSTEM.


                 5.3.Процедуры обмена с файлами данных

                5.3.1.Обмен с последовательными файлами

         При создании файлов с последовательным доступом они открыва-
    ются как выводные (OUTPUT). Вывод данных осуществляется по одному
    из следующих операторов :

               PRINT   #n, e1 {;|,| } e2 {;|,| }...
               PRINT  [#]n USING f$; e1, e2, ...
               WRITE   #n, e1, e2, ...

         Выводной список оператора PRINT может включать выражения
    числового и символьного типов, редактирующие функции SPC(n) и
    TAB(n). Структура записи, формируемой оператором PRINT #, очень
    напоминает то, что бы мы увидели на экране дисплея при выполнении
    оператора PRINT. С целью экономии дискового пространства в форми-
    руемую выводную строку-запись не заносятся лишние пробелы. Поэто-
    му употребление функций типа SPC и TAB в операторе PRINT # особо-
    го смысла не имеет. По этой же причине все разделители элементов
    выводного списка действуют одинаково.
         Оператор PRINT #n USING формирует содержимое записи точно в
    таком же виде, как это осуществляется при форматном выводе на эк-
    ран дисплея.
         При выполнении оператора WRITE # числовые элементы выводного
    списка преобразуются в символьный формат так же, как и в результа-
    те действия оператора PRINT, а текстовые элементы переносятся в
    запись с добавлением окаймляющих кавычек. Дополнительно к этому
    два смежных значения в записи разделяются запятыми.
         Для перечисленных выше операторов характерны следующие обсто-
    ятельства :
      - содержание формируемой записи составляет последовательность
        значений элементов выводного списка;
      - числовые данные в записи представлены в символьном формате;
      - два смежные значения разделяются в записи пробелами или запя-
        тыми.
         Считывание данных из файлов с последовательной организацией
    осуществляется операторами INPUT, LINE INPUT и функцией INPUT$ :

                     INPUT  #n, V1, V2, ...
                     LINE INPUT #n, V$
                     A$ = INPUT$ (k, [#]n)

         Количество переменных в списке оператора INPUT, их тип и по-
    рядок следования должны соответствовать количеству и последователь-
    ности типов данных, хранящихся в текущей записи. Вовсе необязатель-
    но, чтобы структуры всех записей файла были идентичны. Действует
    вполне естественный принцип - читай так, как записывал.
         Оператор LINE INPUT # считывает содержимое текущей записи це-
    ликом, рассматривает его как строку символов и заносит в перемен-
    ную V$. Функция INPUT$ позволяет прочитать k символов из текущей
    записи.
         Контроль за исчерпанием данных можно осуществить по значению
    функции EOF(n), которая принимает нулевое значение ("ложь"), если
    в файле еще имеются невостребованные записи, и -1 ("истина"), если
    из файла была прочитана последняя запись.

                  5.3.2.Обмен с файлами прямого доступа

         Файлы прямого доступа, открываемые с атрибутом RANDOM, рас-
    полагаются на диске. Каждая запись такого файла имеет номер и ее
    содержимое на диске формируется в два этапа.
         На первом этапе с помощью операторов LSET и RSET заполняются
    поля буфера, об'явленного по оператору FIELD :

              FIELD  #n, 12 AS A$, 4 AS B$, ...
              .................................
              LSET   A$ = "Кетков Ю.Л."
              RSET   B$ = MKI$ (1935)

         Оператор LSET переносит присваиваемое значение на поле буфера
    с прижимом к левой границе поля, а оператор RSET - с прижимом к
    правой границе. Числовая информация при этом "преобразуется" в
    символьный формат с помощью функций MKD$, MKI$, MKL$ или MKS$. На
    самом деле эти функции никакого преобразования не совершают. Про-
    сто они позволяют 2-х, 4-х или 8-байтовый числовой аргумент соот-
    ветствующего типа рассматривать как цепочку символов, что дает
    возможность присвоить такое значение символьной переменной, вы-
    полняющей роль поля буфера.
         Операторы LSET и RSET отличаются от обычного оператора при-
    сваивания LET тем, что они не изменяют длину присваиваемой пере-
    менной. Если длина заполняемого поля превышает длину присваиваемо-
    го значения, то недостающие позиции справа (LSET) или слева (RSET)
    заполняются пробелами.
         Указатели полей буфера файла прямого доступа нельзя использо-
    вать в левой части операторов LET, т.к. они тогда превращаются в
    обычные символьные переменные. При этом они будут перенесены в сег-
    мент символьных данных ("кучу") и потеряют связь с буфером файла.
         После заполнения буфера его содержимое можно переписать на
    диск с помощью оператора PUT :

                          PUT  [#]n [,r]

    В качестве второго параметра выступает номер формируемой записи.
         Извлечение информации из файла прямого доступа также осуще-
    ствляется в два приема. Сначала содержимое дисковой записи пере-
    носится в буфер :

                          GET  [#]n [,r]

         Затем можно начать обработку каждого поля буфера, рассматривая
    его как символьное представление числового или текстового значения.
    Числовая величина извлекается из поля буфера с помощью функции "пре-
    образования" аргумента соответствующего типа CVD, CVI, CVL или CVS :

                          G2 = CVI ( LTRIM$ (B$))

         Для извлечения из поля буфера тестовой информации, освобожден-
    ной от лидирующих или концевых пробелов, можно воспользоваться фун-
    кциями LTRIM$ и RTRIM$.
         Когда в операторах GET или PUT отсутствует номер записи r, то
    обмен осуществляется по текущему значению указателя файла. При от-
    крытии файла прямого доступа в блоке управления файлом формируется
    указатель, который "смотрит" на запись с номером 1. После заверше-
    ния обмена с k-той записью в указатель заносится "адрес" следующей
    записи. Используя в операторах GET/PUT режим обмена только по ука-
    зателю, мы превращаем файл прямого доступа в файл с последователь-
    ной организацией.
         Версия Quick BASIC предусматривает расширенный вариант опе-
    раторов GET и PUT :

                       GET   #n, r, V
                       PUT   #n, r, V

    Здесь V - идентификатор переменной типа "запись" (см. операторы
    TYPE - END TYPE), заменяющей функции описанного выше буфера. Пере-
    менная типа запись обладает тем преимуществом, что может включать
    в качестве своих составляющих числовые поля любого типа. Поэтому
    при таких обменах отпадает нужда в "преобразовании" числовых выра-
    жений и их значения хранятся в записи непосредственно в машинном
    формате.
         Операторами GET # и PUT # можно пользоваться и для обмена с
    файлами прямого доступа, открытыми с атрибутом BINARY. Параметр
    r в этом случае задает не номер записи, а относительный адрес
    байта в файле (их отсчет ведется от нуля).
         Для обмена символьными данными с двоичными файлами в версии
    Turbo BASIC можно использовать еще и операторы GET$, PUT$ :

                        GET$  [#]n, l, V$
                        PUT$  [#]n, e$

    Здесь l - количество байтов, считываемых в переменную V$, начиная
    с текущего положения указателя. С помощью оператора SEEK указатель
    двоичного файла можно установить на любой байт с заданным номером
    k (0 <= k <= 2^31-1) :

                         SEEK  [#]n, k

         Оператором SEEK можно воспользоваться для позиционирования
    указателей последовательных файлов (k - номер байта) или файлов
    типа RANDOM (k - номер записи).
         Опрос положения указателя файла осуществляется с помощью
    функции SEEK(n). Ее значением является относительный адрес теку-
    щего байта для файлов типа APPEND, BINARY, INPUT, OUTPUT и номер
    текущей записи для файлов типа RANDOM.

               5.4.Взаимодействие с экраном дисплея

             5.4.1.Технические характеристики дисплеев

         Персональные ЭВМ, совместимые с IBM PC/XT и AT, комплектуют-
    ся монохромными (MD - Monochrome Display) или цветными (CD - Co-
    lor Display, ECD - Enhanced Color Display и т.п.) дисплеями. Сре-
    ди цветных дисплеев различают композитные и RGB-мониторы.
         Связь ЭВМ с дисплеем осуществляет специальная управляющая
    плата, которую в технической литературе принято называть картой.
    Карта представляет собой довольно сложное техническое изделие,
    включающее специализированный видеопроцессор с набором управляющих
    регистров, собственную оперативную память (видеоЗУ), каналы связи
    с центральным процессором (адресная шина, шина данных) и выходную
    шину, по которой видеосигнал передается на монитор.
         Общение между центральным процессором и дисплейной картой
    осуществляется через порты ввода/вывода с помощью машинных команд
    IN и OUT (в BASIC'е аналогичную роль выполняют процедуры INP и
    OUT). Обмен с нужным портом позволяет выбрать тот или иной ре-
    гистр видеопроцессора, записать в него соответствующую информацию
    или опросить его состояние. Имеется возможность и прямого доступа
    к ячейкам видеоЗУ. Однако управление дисплеем на таком уровне очень
    трудоемко и требует достаточно высоких профессиональных знаний.
         Для обслуживания дисплеев в состав BASIC'а включено довольно
    много операторов и функций. Если какая-то дисплейная процедура не-
    достижима средствами алгоритмического языка, то ее можно выполнить
    с помощью подпрограмм, входящих в состав базовой системы управле-
    ния вводом/выводом (BIOS - Basic Input/Output System) и "зашитых"
    в постоянной памяти ЭВМ. Более подробно дисплейные функции BIOS
    рассматриваются в разделе 5.4.5.
         Управление черно-белым (монохромным) монитором осуществляется
    по трем каналам, передающим сигналы горизонтальной и вертикальной
    синхронизации, а также уровень интенсивности луча.
         В RGB-мониторах сигнал цветности передается по трем раздельным
    входам, управляющим соответственно лучами красной (R - red), зеле-
    ной (G - green) и синей (B - blue) пушек. В наиболее дешевых мони-
    торах это управление носит бинарный характер (1 - пушка соответству-
    ющего цвета включена, 0 - отключена). В таких мониторах отображают-
    ся 8 основных цветов, нумеруемых в диапазоне от 0 до 7. Зачастую к
    этому добавляется также бинарный сигнал управления яркостью (интен-
    сивностью) луча (0 - обычная яркость, 1 - повышенная), что позволя-
    ет довести цветовую гамму до 16 оттенков, приведенных в табл.12.
    К обозначению таких мониторов иногда добавляют еще одну букву -
    RGBI (I - Intensity).

                                                     Таблица 12
      ┌───────────────────────────╥──────────────────────────────────┐
      │ Нормальная яркость (I=0)  ║    Повышенная яркость (I=1)      │
      ├───────────────────────────╫──────────────────────────────────┤
      │ Код  I R G B    Цвет      ║    Код  I R G B    Цвет          │
      ├───────────────────────────╫──────────────────────────────────┤
      │  0   0 0 0 0   черный     ║     8   1 0 0 0   серый          │
      │  1   0 0 0 1   синий      ║     9   1 0 0 1   голубой        │
      │  2   0 0 1 0   зеленый    ║    10   1 0 1 0   ярко-зеленый   │
      │  3   0 0 1 1   бирюзовый  ║    11   1 0 1 1   ярко-бирюзовый │
      │  4   0 1 0 0   красный    ║    12   1 1 0 0   розовый        │
      │  5   0 1 0 1   фиолетовый ║    13   1 1 0 1   ярко-фиолетовый│
      │  6   0 1 1 0   коричневый ║    14   1 1 1 0   желтый         │
      │  7   0 1 1 1   сероватый  ║    15   1 1 1 1   ярко-белый     │
      └───────────────────────────╨──────────────────────────────────┘

         В профессиональных мониторах используются более сложные сис-
    темы управления цветностью, обеспечивающие раздельную регулировку
    интенсивности каждого луча. Например, в дисплеях типа ECD яркость
    каждой цветовой компоненты имеет 4 уровня, что позволяет расширить
    цветовую гамму до 64 оттенков. В лучших дисплеях, управляемых кар-
    тами MCGA или VGA, используется 64 градации по каждому цвету, таким
    образом общее количество доступных цветов превышает 256000.
         В композитных мониторах вместо раздельного управления цвето-
    выми пушками из контроллера выдается интегральный видеосигнал,
    в котором интенсивности цветовых компонент тем или иным способом
    суммируются.
         К числу наиболее известных управляющих карт относятся следую-
    щие :

       MDPA (Monochrom Display and Printer Adapter) - карта, обслужи-
            вающая монохромный дисплей (MD) и принтер, обеспечивающая
            вывод только текстовой информации (25 строк по 80 симво-
            лов, разрешение 720х350 точек);

       CGA  (Color Graphic Adapter) - наиболее дешевая плата управле-
            ния цветным дисплеем с невысоким качеством отображения тек-
            стовой и графической информации (максимальное разрешение
            640х200 точек);

       Hercules - не очень распространенная карта управления одноимен-
            ным дисплеем с достаточно высокой разрешающей способностью
            (720х348 точек), но со сравнительно бедной цветовой гаммой
            (4 цвета).

       EGA  (Enhanced Color Adapter) - довольно распространенная карта
            управления монохромными и цветными дисплеями со средним
            качеством изображения. Комплектуется видеопамятью емко-
            стью в 64К, 128К или 256К и работает в конфигурации с
            MD, CD или ECD. Путем установки переключателей может ими-
            тировать карту CGA;

       MCGA (MultiColor Graphic Array) - карта управления цветными
            дисплями с высокой разрешающей способностью (720х350 то-
            чек) и многослойной видеопамятью;

       VGA  (Video Graphic Array) - одна из наиболее современных карт
            управления профессиональными монохромными и цветными ана-
            логовыми дисплеями с достаточно высоким качеством отображе-
            ния (640х480 точек). Путем программного переключения обе-
            спечивает моделирование режимов работы карт CGA и EGA.

    В настоящее время можно встретить и различные улучшенные варианты
    перечисленнных карт (EGA+, Hercules plus, Super VGA и т.п.), раз-
    решающие способности которых приближаются к заветной цифре 1000х
    1000 точек.
         При выводе текстовых сообщений или графических об'ектов из
    допустимой цветовой гаммы выделяют два или три фиксируемых цвета -
    цвет переднего плана, цвет фона и цвет рамки. Цветом переднего
    плана воспроизводятся контуры букв, точки или линии графического
    об'екта, если в соответствующих операторах не задан альтернативный
    код цветности. Все остальные точки рабочей области экрана окраши-
    ваются цветом фона. В дисплеях под управлением карты CGA имеется
    возможность выделить рабочую область экрана, обведя ее цветной рам-
    кой.
         В некоторых графических режимах работы монитора из-за ограни-
    чений на количество разрядов, предназначенных для кодировки цвето-
    вых атрибутов каждого элемента изображения (пикселя), разрешается
    использовать не всю цветовую гамму, а только ограниченное ее под-
    множество, образующее так называемую палитру. Способы формирования
    палитры могут быть разными. Так, в карте CGA пользователю предлага-
    ются две фиксированные палитры с номерами 0 и 1, каждая из которых
    содержит по 4 допустимых цвета (табл.13).

                                                  Таблица 13
        ┌─────────────────┬────────────────┬───────────────────┐
        │  Атрибут цвета  │  Палитра 0     │  Палитра 1        │
        │ (номер регистра)│   ( G=0 )      │   ( G=1 )         │
        ├─────────────────┼────────────────┼───────────────────┤
        │      0 (00)     │  цвет фона     │  цвет фона        │
        │      1 (01)     │  красный (R)   │  бирюзовый  (G+B) │
        │      2 (10)     │  зеленый (G)   │  фиолетовый (R+B) │
        │      3 (11)     │  желтый (G+R)  │  белый    (R+G+B) │
        └─────────────────┴────────────────┴───────────────────┘

         Из таблицы видно, что оттенки нулевой палитры образованы пу-
    тем задания битов красной и зеленой компонент и исключения компо-
    ненты синего цвета. В палитре 1 разряды красного и зеленого цветов
    переставлены местами. Для хранения информации о каждом пикселе в
    таком режиме достаточно двух битов, что при разрешении экрана в
    320х200 точек требует видеоЗУ об'емом не менее 16 Кб.
         Усовершенствованные карты CGA позволяют использовать еще две
    палитры с номерами 2 (ярко-бирюзовый, ярко-фиолетовый,ярко-белый)
    и 3 (бирюзовый, фиолетовый, серый).
         Атрибут цвета, используемый в графических операторах вместо
    указания физического кода цвета, определяет номер регистра текущей
    палитры. Содержимое этого регистра участвует в формировании видео-
    сигнала.
         Карта EGA в большинстве графических режимов обеспечивает вос-
    произведение 16 цветов из возможных 64 цветовых оттенков. Для зада-
    ния физического номера цвета в EGA требуется уже 6 двоичных разря-
    дов (по 2 бита на интенсивность каждой RGB-компоненты), однако ви-
    деоЗУ состоит всего из четырех однобитных матриц (плоскостей), од-
    ноименные разряды которых обеспечивают отображение одного пикселя.
    В эти четыре разряда в процессе графических построений заносится
    цветовой атрибут пикселя, определяющий номер регистра палитры, где
    хранится настоящий код цветности.
         Карта VGA тоже построена на базе четырехслойного видеоЗУ. Одна-
    ко формирование истинного кода цветности реализуется здесь по гораз-
    до более сложному алгоритму. Четырехбитный код пикселя определяет
    один из 16 регистров палитры, из которого извлекается  шестибитный
    код, расширяемый до 8 разрядов путем добавления из регистра выбо-
    ра цвета. Полученное значение рассматривается как адрес одного из
    256 восемнадцатиразрядных регистров DAC (Digital-to-Analog Conver-
    ter). В этих регистрах программным образом могут быть сформированы
    шестибитные значения интенсивностей каждой RGB-компоненты. Описан-
    ная схема позволяет закодировать до 256К цветовых оттенков и исполь-
    зовать из них одновременно любую из 256 комбинаций. Выбранный 18-
    разрядный код цветности преобразуется в аналоговый сигнал и пере-
    дается в монитор.
         Адреса байтов видеопамяти, расположенные в диапазоне от A0000
    до BFFFF, находятся за пределами верхней границы ячеек оперативной
    памяти (640 Кб), доступных задачам в рамках MS DOS. Однако 20-раз-
    рядный адрес, формируемый в IBM PC путем сдвига влево на 4 разряда
    содержимого базового регистра и прибавления 16-разрядного смещения
    позволяет "дотянуться" и до ячеек видеоЗУ. Учитывая, что структура
    видеоЗУ и форматы хранения информации о пикселе в разных картах
    имеют свою специфику, обмен с видеопамятью лучше проводить через
    дисплейные функции BIOS (см. раздел 5.4.5).
         В текстовом режиме экран дисплея представляет собой прямо-
    угольную таблицу из n строк и m столбцов. Каждая клеточка такой та-
    блицы предназначена для отображения одного символа и носит название
    знакоместа. Заполняется знакоместо двухцветными точками в соответ-
    ствии с прямоугольной двоичной матрицей - минирастром. Единичные
    точки минирастра окрашиваются цветом переднего плана, образуя кон-
    тур отображаемого знака, а нулевые точки окрашиваются фоновым цве-
    том.
         Для хранения информации в текстовом режиме на каждое знакоме-
    сто в видеоЗУ цветного монитора любого типа отводится два байта,
    первый из которых занят кодом ASCII отображаемого символа, а второй
    хранит цветовые атрибуты в следующем формате :

                   7   6   5   4   3   2   1   0
                 ┌───────────────────────────────┐
                 │ M   R   G   B   I   R   G   B │
                 └─┬───────────────┬─────────────┘
                   │   цвет фона   │   цвет символа
                   │               │
                признак         яркость
                мерцания

         В монохромном режиме отображения текстовой информации сведе-
    ния о символе также занимают два байта. Атрибут цветности для мо-
    ниторов, управляемых картами CGA и Hercules, имеет следующий фор-
    мат :

                   7   6   5   4   3   2   1   0
                 ┌───────────────────────────────┐
                 │ M               I             │
                 └─┬───────────────┬─────────────┘
                   │  "цвет" фона  │  "цвет" символа
                   │       000     │      000 - не отображается
                признак    000   яркость  001 - подчеркивание
                мерцания   000            111 - обычное отображение
                           111            000 - инверсное отображение

         По коду ASCII контроллер дисплея извлекает из таблицы шрифтов,
    формируемой в памяти с помощью программ BIOS, минирастр требуемого
    символа, и используя цветовые атрибуты производит отображение сим-
    вола на экране дисплея. В зависимости от разрешающей способности
    дисплея по горизонтали и вертикали минирастр символа имеет размеры
    8х8, 8х14, 8х16, 9х14 или 9х16 точек.
         Информация о содержимом всех знакомест экрана занимает область
    видеопамяти, называемую страницей. Если видеоЗУ имеет достаточно
    большие размеры, то там отводится место под несколько текстовых
    страниц, обычно от одной до восьми. Одна из таких страниц, содержи-
    мое которой отображается на экране, называется видимой. Среди ос-
    тальных страниц выделяется еще одна - активная, в память которой
    заносится информация в результате выполнения операторов вывода.
    Смена номеров видимой и активной страниц позволяет мгновенно изме-
    нять содержимое экрана, что бывает полезно при отображении динами-
    ческих заставок.
         Информация о местоположении курсора для каждой из страниц ви-
    деопамяти хранится в фиксированной области MS DOS, начиная с адре-
    са 0040:0050h. Справка о курсоре занимает два байта, в младшем из
    которых находится номер столбца, а в старшем - номер строки. В обо-
    их случаях отсчет ведется от нуля.
         В текстовом режиме можно варьировать количество строк и столб-
    цов за счет укрупнения пикселей путем об'единения двух соседних то-
    чек или изменения размеров растра. Так, например, об'единяя две
    смежные точки растра по горизонтали, мы можем уменьшить число сим-
    волов в строке с 80 до 40. При этом буквы на экране будут выглядеть
    более жирными. Изменяя размеры растра и минирастра по вертикали
    можно варьировать количество строк (EGA -25 или 43, VGA - 25, 30,
    43, 50 или 60).
         В графических режимах программа получает доступ к каждому
    пикселю экрана, который может быть представлен как одной (графика
    высокого разрешения), так и двумя смежными по горизонтали и/или
    по вертикали (графика среднего разрешения) точками растра. Адреса-
    ция пикселей на экране начинается с левого верхнего угла (x=0,y=0).
    В пределах строки растра координата x увеличивается до максималь-
    ного значения. Перемещение по строкам вниз соответствует увеличению
    вертикальной координаты y.
         Информация о каждом пикселе изображения состоит из трех цело-
    численных положительных значений - координат (x,y) и кода цветности
    (номера регистра текущей палитры). Координаты пикселя однозначно
    определяют адрес информации о цветности в видеопамяти, для задания
    которой выделяется 1, 2 или 4 бита. Фоновый цвет является общим для
    всех точек экрана.
         Любой графический режим наряду с воспроизведением геометриче-
    ских об'ектов позволяет выдавать текстовую информацию.
         Установка режима работы монитора производится программным пу-
    тем с помощью видеосервиса BIOS, вызываемого по прерыванию INT 10h.
    Предварительно в региcтр AH должен быть занесен нулевой код, а в ре-
    гистр AL - числовой код режима. В BASIC-программах аналогичная про-
    цедура может быть выполнена путем вызова системной программы, моде-
    лирующей прерывание (INT86OLD, INT86XOLD,INTERRUPT,INERRUPTX).
         Основные режимы работы наиболее распространенных дисплеев при-
    ведены в табл.14.  Некоторые из них могут быть установлены по опе-
    ратору SCREEN.

                                                       Таблица 14
    ┌─────┬────────┬────────────┬─────────┬───────┬────────┬───────────┐
    │ Код │  Режим │  Параметры │  Размер │ Число │ Число  │ Адресация │
    │     │        │   текста   │  растра │ цветов│ страниц│  страниц  │
    ├─────┴────────┴────────────┴─────────┴───────┴────────┴───────────┤
    │                            C G A                                 │
    ├──────────────────────────────────────────────────────────────────┤
    │ 0,1  Текстовый  40х25,8х8    320х200    16       8     B8000,    │
    │                                                       B8800,...  │
    │ 2,3  Текстовый  80x25,8х8    640x200    16       4     B8000,    │
    │                                                       B9000,...  │
    │ 4,5  Графич.    40х25,8х8    320x200     4       1     B8000     │
    │   6  Графич.    80x25,8х8    640x200     2       1     B8000     │
    ├──────────────────────────────────────────────────────────────────┤
    │                     E G A                                        │
    ├──────────────────────────────────────────────────────────────────┤
    │ 0,1  Текстовый  40х25,8х14   320х350    16/64    8     B8000,    │
    │                                                       B8800,...  │
    │ 2,3  Текстовй   80х25,8х14   640х350    16/64    8     B8000,    │
    │                                                       B9000,...  │
    │ 4,5  Графич.    40х25,8х8    320х200     4/64    1     B8000     │
    │   6  Графич.    80х25,8х8    640х200     2/64    1     B8000     │
    │   7  Текстовый  80х25,9х14   720х350     4       8     B1000,    │
    │                                                       B2000,...  │
    │   D  Графич.    40х25,8х8    320х200    16/64    8     A0000,    │
    │                                                       A2000,...  │
    │   E  Графич.    80х25,8х8    640х200    16/64    4     A0000,    │
    │                                                       A4000,...  │
    │   F  Графич.    80х25,8х14   640х350     4       2     A0000,    │
    │                                                       A8000      │
    │  10  Графич.    80х25,8х14   640х350    16/64    2     A0000,    │
    │                                                       A8000      │
    ├──────────────────────────────────────────────────────────────────┤
    │                            V G A                                 │
    ├──────────────────────────────────────────────────────────────────┤
    │ 0,1  Текстовый  40х25,9х16   360х400    16/256К  8     B8000,    │
    │                                                       B8800,...  │
    │ 2,3  Текстовый  80х25,9х16   720х400    16/256К  8     B8000,    │
    │                                                       B9000,...  │
    │ 4,5  Графич.    40х25,8х8    320х200     4/256К  1     B8000     │
    │   6  Графич.    80х25,8х8    640х200     2/256К  1     B8000,    │
    │   7  Текстовый  80х25,9х16   720х400     4       8     B0000,    │
    │                                                       B1000,...  │
    │   D  Графич.    40х25,8х8    320х200    16/256К  8     A0000,    │
    │                                                       A2000,...  │
    │   E  Графич.    80х25,8х8    640х200    16/256К  4     A0000,    │
    │                                                       A4000,...  │
    │   F  Графич.    80х25,8х8    640х200     4       2     A0000,    │
    │                                                       A8000      │
    │  10  Графич.    80х25,8х14   640х350    16/256К  2     A0000,    │
    │                                                       A8000      │
    │  11  Графич.    80х30,8х16   640х480     2/256К  1     A0000     │
    │  12  Графич.    80х30,8х16   640х480    16/256К  1     A0000     │
    │  13  Графич.    40х25,8х8    320х200   256/256К  1     A0000     │
    └──────────────────────────────────────────────────────────────────┘




                   5.4.2.Установочные процедуры

         Режим работы монитора устанавливается оператором SCREEN :

                     SCREEN   [r] [,c[, [ap] [,vp]]]

    Здесь  r - числовой индекс режима (см. табл.15), определяющий
               характеристики отображения текстовой и графической ин-
               формации, но не совпадающий по величине с аналогичным
               кодом режима в BIOS (табл.14);
           c - признак цветности (0 - для цветного и любое ненулевое
               значение - для монохромного режима отображения);
          ap - номер активной страницы;
          vp - номер видимой страницы.

                                                      Таблица 15
    ┌────────┬──────────────────────────────────────────────────────────
    │ Индекс │                Характеристика
    │ режима │                    режима
    ├────────┼──────────────────────────────────────────────────────
    │   0    │ Текстовый; емкость экрана 40х25,80x25,40x43,40x50,
    │        │ 80x43,80x50; размер символов 8х8 (для EGA и VGA -
    │        │ 8х14,9х14,9х16); 2 атрибута из 16 цветов или 16
    │        │ атрибутов из 16 цветов для EGA
    │        │
    │   1    │ Графический с разрешением 320х200 пикселей; емкость
    │        │ текстового экрана 40х25; 4 цветовых атрибута из 16
    │        │ цветов с EGA. Поддерживается картами CGA, EGA, VGA
    │        │ и MCGA
    │        │
    │   2    │ Графический c разрешением 640х200 пикселей; емкость
    │        │ текстового экрана 80х25; черно-белый или 2 цветовых
    │        │ атрибута из 16 цветов с EGA или VGA. Поддерживается
    │        │ картами CGA, EGA, VGA и MCGA
    │        │
    │   7    │ Графический с разрешением 320х200 пикселей; емкость
    │        │ текстового экрана 40х25; несколько экранных страниц;
    │        │ 16 цветовых атрибутов из 16 цветов. Поддерживается
    │        │ картами EGA и VGA
    │        │
    │   8    │ Графический c разрешением 640х200 пикселей; емкость
    │        │ текстового экрана 80х25; остальные параметры те же,
    │        │ что и в режиме 7
    │        │
    │   9    │ Графический с разрешением 640х350 пикселей; емкость
    │        │ текстового экрана 80х25 или 80х43; размер символов
    │        │ 8х8 или 8х14; несколько экранных страниц; 4 атрибу-
    │        │ та из 16 цветов или 16 атрибутов из 64 цветов в за-
    │        │ висимости от об'ема видеоЗУ. Поддерживается картами
    │        │ EGA и VGA
    │        │
    │   10   │ Графический, монохромный с параметрами, эквивалент-
    │        │ ными режиму 9. Доступны 4 атрибута из 9 псевдоцветов.
    │        │ Поддерживается картами EGA и VGA в конфигурации с MD
    │        │
    │   11   │ Графический с разрешением 640х480 пикселей; емкость
    │        │ текстового экрана 80х30 или 80х60; размер символов
    │        │ 8х8; 2 атрибута из 256К цветов. Поддерживается кар-
    │        │ тами VGA и MCGA
    │        │
    │   12   │ Графический, отличающийся от режима 11 только тем, что
    │        │ доступны 256 атрибутов из 256К цветов. Поддерживается
    │        │ картами VGA и MCGA
    │        │
    │   13   │ Графический с разрешением 320х200 пикселей; емкость
    │        │ текстового экрана 40х25; 256 атрибутов из 256К цветов.
    │        │ Поддерживается картами VGA и MCGA
    └────────┴───────────────────────────────────────────────────────

         В связи с тем, что пользователю BASIC-системы, работающему с
    конкретной конфигурацией (карта + дисплей) довольно сложно извлечь
    необходимую информацию из табл.14 и 15, приведем данные для опе-
    ратора SCREEN в разрезе по оборудованию (табл.16).

                                                    Таблица 16
    ┌───────────────────────────────────────────────────────────────┐
    │                           C G A                               │
    ├───────────────────────────────────────────────────────────────┤
    │ Режим   Текст       Цвета     Разрешение     Число стр.       │
    ├───────────────────────────────────────────────────────────────┤
    │    0     40х25         16       320х200           8           │
    │          80х25         16       640х200           4           │
    │    1     40х25          4       320х200           1           │
    │    2     80х25          2       640х200                       │
    ├───────────────────────────────────────────────────────────────┤
    │                            E G A                              │
    ├───────────────────────────────────────────────────────────────┤
    │ Режим  Дисплей  Текст  Атриб./Цвета  Разрешение  Страниц/Об'ем│
    ├───────────────────────────────────────────────────────────────┤
    │   0      MD     80x25      16/3       720x350        8        │
    │          MD     80x43      16/3       720x350        4        │
    │          CD     40x25      16/16      320x200        8        │
    │          CD     80x25      16/16      640x200        8        │
    │         ECD     40x25      16/64      320x350        8        │
    │         ECD     40x43      16/64      320x350        8        │
    │         ECD     80x25      16/64      640x350        8        │
    │         ECD     80x43      16/64      640x350        8        │
    │   1             40x25       4/16      320x200        1/16K    │
    │   2             80x25       2/16      640x200        1/16K    │
    │   7             40x25      16/16      320x200        1/32K    │
    │   8             80x25      16/16      640x200        1/64K    │
    │   9     ECD     80x25       4/64      640x350        1/64K    │
    │         ECD     80x43       4/64      640x350        1/64K    │
    │         ECD     80x25      16/64      640x350        1/128K   │
    │         ECD     80x43      16/64      640x350        1/128K   │
    │  10      MD     80x25       4/9       640x350        1/64K    │
    │          MD     80x43       4/9       640x350        1/64K    │
    ├───────────────────────────────────────────────────────────────┤
    │                          M C G A                              │
    ├───────────────────────────────────────────────────────────────┤
    │ Режим          Текст   Атриб./Цвета  Разрешение  Страниц/Об'ем│
    ├───────────────────────────────────────────────────────────────┤
    │   0            40x25       16/ -     320x400         8        │
    │                80x25       16/ -     640x400         8        │
    │   1            40x25        4/ -     320x200         1/16K    │
    │   2            80x25        2/ -     640x200         1/16K    │
    │   11           80x30        2/256K   640x480         1/64K    │
    │                80x60        2/256K   640x480         1/64K    │
    │   13           40x25      256/256K   320x200         1/64K    │
    ├───────────────────────────────────────────────────────────────┤
    │                             V G A                             │
    ├───────────────────────────────────────────────────────────────┤
    │ Режим          Текст  Атриб./Цвета  Разрешение  Страниц/Об'ем │
    ├───────────────────────────────────────────────────────────────┤
    │   0            40x25       16/64     360x400         8        │
    │                40x43       16/64     320x350         8        │
    │                40x50       16/64     320x400         4        │
    │                80x25       16/64     720x400         8        │
    │                80x43       16/64     640x350         4        │
    │                80x43       16/3      720x350         4        │
    │                80x50       16/64     640x400         4        │
    │                80x50       16/3      720x400         4        │
    │   1            40x25        4/16     320x200         1/16K    │
    │   2            80x25        2/16     640x200         1/16K    │
    │   7            40x25       16/16     320x200         1/32K    │
    │   8            80x25       16/16     640x350         1/64K    │
    │   9            80x25       16/64     640x350         1/128K   │
    │                80x43       16/64     640x350         1/128K   │
    │  10 (MD)       80x25        4/9      640x350         1/64K    │
    │                80x43        4/9      640x350         1/64K    │
    │  11            80x30        2/256K   640x480         1/64K    │
    │                80x60        2/256K   640x480         1/64K    │
    │  12            80x30       16/256K   640x480         1/256K   │
    │                80x60       16/256K   640x480         1/256K   │
    │  13            40x25      256/256K   320x200         1/64K    │
    └───────────────────────────────────────────────────────────────┘

         Управление цветностью осуществляется оператором COLOR, кото-
    рый в зависимости от установленного режима работы монитора имеет
    один из четырех следующих форматов :

           COLOR  [fg] [,[bg] [,bord]]     для r=0 ;
           COLOR  [bg] [,pal]              для r=1 ;
           COLOR  [fg] [,bg]               для r=7,8,9,10 ;
           COLOR  [fg]                     для r=11,12,13 .

    Здесь   fg - целое число,определяющее цвет переднего плана (цвет
                 символов или линий);
            bg - целое число,определяющее цвет фона;
          bord - целое число,определяющее цвет рамки (бордюра), окайм-
                 ляющего рабочее поле дисплея;
           pal - целое число из диапазона [0,255], влияющее на выбор
                 нулевой (pal - четное) или первой (pal - нечетное)
                 цветовой палитры.
         Диапазоны допустимых значений цветовых атрибутов fg и bg за-
    висят от установленного режима r и их границы приведены в табл.17.
    При выводе текстовой информации цвета символов fg в диапазоне от
    0 до 15 соответствуют обычным номерам цветовой гаммы, начиная с 16
    и до 31 цвета символов повторяются с добавлением признака мерцания.
         Понятие палитры, появившееся в версиях Microsoft BASIC, пред-
    шествовавших GW-системе, связано с ограничением на количество цве-
    тов, воспроизводимых в тех или иных режимах работы монитора. Сна-
    чала BASIC обеспечивал в графическом режиме среднего разрешения ра-
    боту с двумя фиксированными по составу палитрами с номерами 0 и 1.
    Внутри каждой из них допустимые цвета имеют свою относительную
    нумерацию - 0,1,2,3. Именно эти номера выступают в качестве атри-
    бутов цветности в последующих графических операторах.
         С появлением дисплеев типа MCGA, EGA и VGA, обладающих го-
    раздо более развитым управлением, появилась возможность опериро-
    вать с палитрами, состав и последовательность цветов в которых
    задает пользователь.
         Формирование палитры сводится к установлению сответствия меж-
    ду номером регистра палитры (rp) и физическим номером цвета (c) в
    операторах PALETTE и PALETTE USING :

                      PALETTE  [rp,c]
                      PALETTE USING  A%(i)

    Первый оператор засылает код цветности в единственный регистр па-
    литры, тогда как второй - изменяет всю палитру целиком. Происходит
    это следующим образом. В первый регитр палитры заносится значение
    первого или i-того элемента целочисленного массива A%, во второй -
    следующий элемент массива A% и т.д. Если значение очередного эле-
    мента A%(j) равно -1, то содержимое соответствующего регистра па-
    литры не изменяется. Любое другое отрицательное значение элемента
    A%(j) фиксируется как ошибка периода выполнения программы.Индексы
    в массиве A% отсчитываются от нуля.
         Задание оператора PALETTE без параметров приводит к восста-
    новлению в регистрах палитры их первоначальных значений, устанав-
    ливаемых системой по умолчанию.

                                                  Таблица 17
    ┌──────────┬────────────────────────────────────────────────────┐
    │ Индекс   │    Диапазон изменения цветовых атрибутов           │
    │ режима   ├────────────────────────────────────────────────────┤
    │          │    fg        bg          bord            pal       │
    ├──────────┼────────────────────────────────────────────────────┤
    │   0      │   [0,31]    [0,7]       [0,15]            -        │
    │   1      │             [0,15]                      [0,1]      │
    │   7,8    │   [1,15]    [0,15]                                 │
    │   9      │             [0,63]                                 │
    │   10     │                                                    │
    │   11     │                                                    │
    │   12     │                                                    │
    │   13     │                                                    │
    └──────────┴────────────────────────────────────────────────────┘

         К установочным операторам следует отнести процедуры разделе-
    ния экрана на прямоугольные области, в которые осуществляется вы-
    вод текстовой (VIEW PRINT) и графической (VIEW SCREEN и WINDOW
    SCREEN) информации :

               VIEW PRINT  r1  TO  r2
               VIEW  [[SCREEN] (x1,y1)-(x2,y2) [,cf [,cb]]]
               WINDOW  [[SCREEN] (Xmin,Ymin)-(Xmax,Ymax)

         Оператор VIEW PRINT, входящий в состав GW и Quick BASIC, от-
    водит под текстовое окно строки экрана, начиная с r1 и кончая стро-
    кой r2.
         Оператор VIEW SCREEN устанавливает на экране прямоугольную
    область, в которой будет отображаться графическая информация. Мес-
    тоположение графического окна определяется координатами левого
    верхнего (x1,y1) и правого нижнего (x2,y2) углов прямоугольника.
    Задаются они в пикселях и измеряются либо в абсолютной системе
    координат (в теле оператора VIEW присутствует служебное слово
    SCREEN), либо в приращениях относительно координат текущей точки.
    Параметром cf задается цвет заливки области графического окна.
    Если он отсутствует, то окно сохраняет ранее установленный цвет
    фона. Параметр сb определяет цвет рамки, которым может быть об-
    ведена граница графического окна. Если параметр сb не задан, то
    рамка не обводится.
         Оператор WINDOW используется для задания области вывода гра-
    фической информации в так называемых математических кооординатах.
    В сочетании с физическими габаритами графического окна (VIEW
    SCREEN) пределы изменения математических (программных) координат
    обеспечивают проектирование геометрических фигур на экран дисплея.
    Включение служебного слова SCREEN в текст оператора WINDOW означа-
    ет, что ось y направлена вниз. В противном случае ось y направлена
    вверх.
         В некотором смысле к группе установочных процедур можно отне-
    сти и оператор очистки экрана CLS. Будучи употреблен без парамет-
    ров, он позволяет очистить содержимое видимой страницы или активно-
    го графического окна. В GW и Quick BASIC'е оператор CLS может со-
    провождаться числовым аргументом n, принимающим значения 0,1 или
    2. При n=0 экран дисплея очищается от отображенной на нем тексто-
    вой и графической информации. При n=1 производится очистка тексто-
    вого окна, если оператору CLS предшествовало назначение VIEW PRINT.
    Если область вывода текстовой информации совпадает со всем экраном,
    то пробелами заполняются 25 строк. При n=2 чистится весь экран за
    исключением 25-ой (служебной) строки.






