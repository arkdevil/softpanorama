




       Инструкцию смотрите в файле RATING.HLP

                            ДАВАЙТЕ ВЫРАСТИМ ДЕРЕВО
                                      ИЛИ
                           САМАЯ ПОПУЛЯРНАЯ ПРОГРАММА

                                   О чем это

          Что касается  дерева -  о нем  немного позже. А как вы думаете,
       какая  программа   для  IBM  PC  действительно  самая  популярная?
       Возможно, вы  назовете Turbo-Pascal  или  Norton  Commander    или
       Aidstest. Но  что такое  самая популярная?  Давайте условимся, что
       популярность программы  измеряется числом  компьютеров, на которых
       она используются  (записана на винчестере). В этом случае я должен
       добавить к  списку  COMMAND.COM,  но  вообще-то  самой  популярной
       программой для IBM PC является... моя программа RATING !
          "Ну и  наглец! Мы и слыхом не слышали об этом твоем шедевре", -
       воскликните вы и будете правы. Придется объясниться.

                                    Что это

          Для измерения  популярности компьютерных  программ  естественно
       использовать программу  же. Такой  программой и является RATING. А
       поскольку при  своем запуске  на  каждом  компьютере,  на  котором
       ведется подсчет,  сама программа располагается на одном из  дисков
       этого же  компьютера, она  зафиксирует себя  в списке популярности
       столько раз  сколько раз  будет запущена.  Поэтому ни  одна другая
       программа не  может получить  рейтинг выше  программы  RATING.EXE!
       (Напоминаю, что  рейтинг  программы  есть  число  компьютеров,  на
       которых эта программа записана на диске).
          Итак, вы,  наверное, уже  поняли, что  я хочу предложить сообща
       провести  эсперимент  по  определению  популярности  программ  для
       IBM PC (  строго говоря,  речь идет  лишь о  распределении мест со
       второго и  дальше ).  Принцип этого  опыта в  общих чертах, думаю,
       тоже  понятен.   Теперь  следует  сказать  о  деталях.  Детали  же
       оказываются сплошь деревянными.

                               Откуда это взялось

          Однажды после  знакомства с очередным выпуском Софтпанорамы* я,
       чертыхаясь,  удалял  его  с  винчестера,  пользуясь  возможностями
       Norton  Commander.   Занятие  это,   как  вы  может  быть  знаете,
       противное. Возникло желание написать программу, которая делает это
       автоматически,  то   есть  обходит  ДЕРЕВО  каталогов,  начиная  с
       текущего, и  удаляет все  подкаталоги вместе  с их содержимым. (Не
       очень оригинальная,  надо сказать,  идея). Получилась маленькая и,
       как мне  кажется,  изящная  (благодаря  рекурсии)  программа    на
       Паскале**. Дальше  - больше.  Деревянно-рекурсивная тематика стала
       развиваться: вывод  дерева каталогов на экран с обходом его сверху
       вниз и  прорисовкой его  ветвей  псевдографикой;  подсчет  объемов

       ____________________

       *  Софтпанорама   -  компьютерный   журнал,  издаваемый   в  Киеве
       Н.Н.Безруковым  и   распространяемый  на  дискетах.  Отличительной
       чертой Софтпанорамы  является то,  что при  ее разархивировании на
       винчестере создается очень ветвистое ДЕРЕВО каталогов.


       ** Как  только программа была готова, обнаружилось сразу несколько
       других средств удаления каталогов.



                                     - 2 -

       дисковой памяти, занимаемой каждым каталогом и его подкаталогами с
       обходом дерева снизу вверх ( при выводе на экран или в файл дерево
       в этом  случае растет  как положено  - корень внизу, ветви тянутся
       вверх, а на каждой веточке написано сколько байт освободится, если
       ее отломить - очень удобно при поиске на диске свободного места ).
       Ну и  наконец RATING - определение частоты использования различных
       программ (  EXE и  COM файлов  ) на  множестве компьютеров. В этой
       задаче оказалось очень много деревьев, а с ними и рекурсий.

                            Что из этого получилось

          Программа   RATING    работает   следующим   образом.   Вначале
       последовательно  выполняется  нисходящий  обход  ДЕРЕВА  КАТАЛОГОВ
       каждого из  имеющихся на  компьютере  дисков.  В  процессе  обхода
       дерева каталогов  в памяти  формируется  двоичное  ДЕРЕВО  ПОИСКА,
       каждая вершина  которого содержит  название  ЕХЕ  или  СОМ  файла,
       которое  является   ключем  поиска,   и  поле   счетчика,  которое
       устанавливается в единицу.
          Таким образом,  каждая  из  имеющихся  на  компьютере  программ
       представляется  одной   вершиной  дерева   с  единичным  значением
       счетчика независимо  от числа  экзампляров этой программы на вашей
       машине.
          Затем в  текущем  каталоге  диска  отыскивается  файл  рейтинга
       программ RATING.LST  и, если  он обнаруживается,  выполняется  его
       обработка. RATING.LST  - это  обычный текстовый  ( ASCII  )  файл,
       каждая строка  которого кроме  нескольких первых содержит название
       программы и  ее  рейтинг  -  при  скольких  пусках  эта  программа
       обнаружена на диске.
          Данные из  файла рейтинга  включаются в  созданное ранее дерево
       поиска. При  этом  значения  рейтинга  суммируются  со  значениями
       счетчика  в   соответствующей     вершине  дерева,   если  таковая
       обнаруживается  или   просто  записываются  во  вновь  создаваемую
       вершину.
          После такого слияния дерево поиска содержит по одной вершине на
       каждую  из   программ,  а   значения  счетчиков  становятся  равны
       рейтингу, набранному программой на всех обследованных компьютерах,
       включая тот,  в чьей  памяти  все  это  происходит.  Обычных  640К
       достаточно для дерева с примерно 15000 вершинами.
          После  построения  дерева  начинается  сортировка  программ  по
       величине рейтинга. Для этого выполняется обход построенного дерева
       снизу вверх  и в  памяти строится новое двоичное ДЕРЕВО СОРТИРОВКИ
       ( из тех же самых вершин без захвата дополнительной памяти! ).
          Теперь остается  лишь обойти  полученное дерево справа налево и
       записать данные  о каждой  вершине (читай  программе) в новый файл
       рейтинга.
          Я долго  не мог  решить каким  образом ограничивать  рост файла
       рейтинга. Ведь,  как уже  сказано, в память помещаются сведения не
       более чем  о 15000  файлов, да  и  вряд  ли  имеет  смысл  хранить
       сведения о  таком большом  количестве различных  программ. Поэтому
       решено,  что   как  только  количество  программ  достигает  15000
       последние в  списке отбрасываются и остается 5000 лучших. За время
       пока файл  рейтинга увеличивается с 5 до 15 тысяч каждая программа
       имеет шанс  закрепиться в  группе сильнейших.  Правда последние из
       попавших  в   список  программ  оказываются  в  худшем  положении.
       Справедливее,  конечно,  было  бы  учитывать  и  время  пребывания
       программы  в   файле  рейтинга,  но  решил  не  загромождать  этим
       программу.



                                     - 3 -

                                 Причем тут вы

          "Это все  хорошо", -  скажете вы:  "Но какое  же дерево  нам-то
       выращивать?". Вот  тут вы  действительно попали  в точку. Ведь для
       того, чтобы  из всей  этой затеи с рейтингом получился толк, нужно
       чтобы программа  RATING была  выполнена на  возможно большем числе
       компьютеров. "Ну так, нет проблем! Программы у нас гуляют свободно
       и многие  быстро становятся  доступны всем.  Отпусти свой RATING в
       свободное плавание, может чего и выйдет". Выйдет то может и выйдет
       но,  во-первых,   как  собрать   результаты?  Во-вторых,   как  их
       объединить, ведь  нужно чтобы  программа была  не просто выполнена
       много раз  в разных  местах, а чтобы она выполнялась многократно с
       одним и тем же обновляющимся файлом рейтинга или же файлы рейтинга
       должны соответствовать непересекающимся множествам компьютеров. Их
       тогда можно объединить.

                                Что будем делать

          Как  результат   осмысления  всех   этих  тяжких  проблем  могу
       предложить несколько вариантов*** проведения опыта:
          А) Просто  выпускаю программу  и каждый,  прогоняя ее  на своем
       компьютере, получает  результат  обследования  своей  и  какого-то
       количества (видимо,  не слишком  большого)  предшествующих  машин,
       начиная с  того компьютера,  на котором я пишу эти строки. Никаких
       специальных правил  обращения программы  при  этом  не  устанавли-
       вается. Какое-либо централизованное обобщение результатов не пред-
       полагается. Срок эксперимента не ограничивается.
          В) Программа  выпускается  для  свободного  копирования  как  в
       варианте  А,  но  предлагается  к  определенной  дате  переправить
       сформировавшиеся к  этому моменту  файлы рейтинга мне. Эта просьба
       адресуется в  первую очередь  тем, кто  к этому сроку еще не успел
       никому передать  программу. Я  объединяю файлы  рейтинга, публикую
       результаты и  возвращаю дискеты. В этом случае рекомендуется также
       не запускать программу у себя дважды на одном компьютере даже если
       она пришла  к вам  повторно с другой стороны. Посмотрите рейтинг и
       скопируйте   программу    и   файл   рейтинга   товарищам.   После
       установленной даты возврата программа циркулирует по варианту А.
           Вариант  B представляется  вполне реалистичным, но не является
       корректным, так как не исключает двойной счет.
          С) Выполняю  программу один  раз с  ДИСКЕТЫ  на  доступных  мне
       машинах и  передаю ЭТУ  ДИСКЕТУ  одному  из  знакомых  с  просьбой
       поступать так  же (  здесь  рекурсия!  ).  На  дискете  содержится
       просьба вернуть  ее мне  к определенному сроку или после заданного
       числа запусков. В этом случае количество опытов, видимо, останется
       сравнительно небольшим,  но обеспечивается  некоторая гарантия  их
       корректности благодаря  использованию одного физического носителя.
       Конечно не  возбраняется и  свободное копирование программы с этой
       дискеты и дальнейшее обращение копий по варианту А.
          D) Выполняю  программу с  дискеты  на  всех  встретившихся  мне
       компьютерах. Но об этом вы могли бы и не знать.
          Е) Вот  он вариант  с совместным  выращиванием дерева  -  самый
       правильный, но, возможно, не самый реальный! Состоит он в том, что
       предпринимается    попытка     организованного    обхода    ДЕРЕВА
       ПОЛЬЗОВАТЕЛЕЙ.
          Итак, вначале  я передаю  программу (может  быть даже без файла
       рейтинга)  с   необходимыми  инструкциями   некоторому  количеству
       ____________________

       *** Инструкция  к  конкретному  варианту  использования  программы
       RATING, помещена в файле RATING.HLP



                                     - 4 -

       знакомых.  Они   становятся  вершинами   первого   уровня   дерева
       пользователей и действуют аналогичным образом.
          Таким образом  строится дерево  пользователей, а  вы только что
       прочли  рекурсивное  описание  этого  процесса.  Никаких  запусков
       программы   на этом  этапе может  не выполняться,  хотя не возбра-
       няется использовать ее по варианту А.
          Второй этап  - обход  полученного дерева снизу вверх. Начиная с
       заранее условленной  даты, те, КТО К ЭТОМУ СРОКУ НИКОМУ НЕ ПЕРЕДАЛ
       ПРОГРАММУ (они  оказались на листьях дерева) запускают ее на своих
       компьютерах, формируя  тем самым  первичные файлы  рейтинга.  Файл
       рейтинга передается  тому, от  кого раньше была получена программа
       RATING. Участники  опыта, оказавшиеся  в нетерминальных  вершинах,
       получают  файлы  рейтинга  от  тех,  кому  они  раньше  передавали
       программу (  или хотя  бы от  большей их части ) и объединяют их с
       помощью специальной  программы MERGE.  После этого  они  запускают
       программу RATING  на своих  машинах, имея  в текущем каталоге файл
       рейтинга, полученный  с помощью  MERGE.  Тем  самым  в  этот  файл
       добавляются данные об используемых и на их компьютерах программах.
       Результат передается дальше.
          Наконец, находясь в корне гигантского дерева, я получаю большую
       и  корректную   статистику  (сомнительно   конечно)  и  предаю  ее
       гласности.
          Думаю, что  в  случае  хотя  бы  частичного  успеха  опыта  его
       результаты могут  оказаться полезными  для  многих.  Они  позволят
       объективно оценить  популярность большого  количества ( нескольких
       тысяч ) программ, судить об интересах отечественных пользователей,
       состоянии и перспективах рынка программных средств.

                             Сколько нужно времени

          Теперь, когда  вы уже согласны принять участие в этой авантюре,
       обсудим сроки. Я имею в виду вариант Е.
          По имеющимся  оценкам у  нас (в  Союзе, СНГ  - не  знаешь как и
       назвать) около  1 млн.  IBM-cовместимых персональных  компьютеров.
       Какова же  возможная высота  дерева пользователей,  включающего их
       всех? Во-первых, компьютеры у нас пока редко существуют поодиночке
       - чаще  компаниями -  на предприятиях, в институтах, лабораториях,
       школах. Поэтому  можно уменьшить число потенциальных вершин дерева
       скажем вдвое. Итак, имеем 500 тысяч.
          Простые расчеты позволяют определить количество вершин дерева в
       зависимости от  его высоты  (числа уровней)  и кратности вершин (в
       нашем случае кратность вершины - это количество ваших друзей).

                      К р а т н о с т ь   в е р ш и н
        Число     2         3          4          5          6
       уровней

       1           1         1          1          1          1
       2           3         4          5          6          7
       3           7        13         21         31         43
       4          15        40         85        156        259
       5          31       121        341        781      1 555
       6          63       364      1 365      3 906      9 331
       7         127     1 093      5 461     19 531     55 987
       8         255     3 280     21 845     97 656    335 923
       9         511     9 841     87 381    488 281  2 015 539
       10      1 023    29 524    349 525  2 441 406
       11      2 047    88 573  1 398 101
       12      4 095   265 720
       13      8 191   797 161



                                     - 5 -

       14     16 383
       15     32 767
       16     65 535
       17    131 071
       18    262 143
       19    524 287

          Из таблицы  видно, что  дерево, содержащее  не меньше  500  000
       вершин в зависимости от их кратности (от 6 до 2) должно иметь от 9
       до 19  уровней. Примем среднее - 14. Положив на передачу программы
       и данных  с уровня  на уровень  по  одной  неделе,  получим  время
       выращивания дерева  13 недель  (три месяца),  а длительность всего
       эксперимента -  полгода. Остается  надеяться, что мы не ошиблись в
       порядках величин.


         Итак, я сажаю дерево. Попробуем вырастить его вместе! Начали!


             С.Свердлов                             7 февраля 1992 г.

             г.Вологда


                                    РЕКЛАМА

         А. Вы имеете возможность приобрести программы для IBM PC/XT/AT
                                   (EGA,VGA)*

       1. Редактор загружаемых шрифтов PinWriter Font Designer (PFD) для
         24-игольных матричных  принтеров, совместимых с EPSON LQ (NEC
                   Pinwriter и др) с набором готовых шрифтов.

          PFD позволяет  осуществить эффективную  программную русификацию
       принтеров, обеспечивая максимальную скорость печати и не требующую
       затрат памяти.
          Вы   получаете   неограниченные   возможности   расшироения   и
       модификации набора шрифтов.
          Удобный пользовательский интерфейс, контекстная помощь. Символы
       изображаются в истинных пропорциях. Основные возможности: чтение и
       запись  шрифтов,  пробная  печать  символов,  копирование  рисунка
       символа, редактирование  матрицы символа, включая рисование линий,
       удаление и  вставку строк и столбцов, сдвиг рисунка,  преобразова-
       ния симметрии. Встроенная игра и калькулятор. Умеренная цена.

              2. Система обработки экспериментальных данных (MCX).

          Система  предназначена   для   обработки   цифровых   сигналов,
       содержащих от  1024 до  16384 отсчетов. Обесчивается одновременная
       обработка до  7 сигналов,  2 из  которых отображаются  на  экране.
       Развитый многооконный  экранный  интерфейс  на  основе  выпадающих
       меню.
           Предусматривается:  считывание данных с цифрового регистратора
       и АЦП,  дистанционное управление приборами, запись и чтение данных
       с диска,  просмотр данных  на диске,  вывод графических  данных на

       ____________________

       *  Демонстрационные  версии  программ  распространяются  вместе  с
       программой RATING



                                     - 6 -

       принтер и  графопостроитель (настраивается на любой тип плоттера),
       копирование, удаление и обмен данных.
          Возможности исследования  данных обеспечивают:  просмотр любого
       участка  сигнала,   сдвиг  сигнала  по  временной  оси,  изменение
       масштаба изображения,  получение цифровых  значений любой  точки в
       абсолютных и  логарифмических  единицах,  корректоровку  отдельных
       значений, поиск  максимума и  минимума, точек с заданным значением
       сигнала и определение длительности фронтов, разметку сигнала.
          Возможности  автоматической  обработки  включают:  три  способа
       сглаживания сигнала  с целью  устранения  шумов  и  выбросов,  вы-
       числение энергетических  характеристик, выполнение  математических
       преобразований:   интегрирование,    дифференцирование,   квадрат,
       корень, сумма  и разность  сигналов, инверсия.  На  основе  ориги-
       нального  алгоритма   быстрого  преобразования  Фурье  вычисляются
       амплитудно- и  фазочастотные характеристики сигналов, автокорреля-
       ционная и взаимнокорреляционная функции, определяется передаточная
       функция объекта  на основе  регистрации  его  входных  и  выходных
       сигналов.
          Сервис программы  включает открытую систему контекстной помощи,
       справочную систему,  возможность запоминания установленных режимов
       работы и  встроенный калькулятор.
          Программа дорабатывается  по спецификациям  заказчика. Возможна
       поставка с исходным текстом (Турбо-Паскаль 6.0).
          Цена в зависимости от объема доработок.


        Б. Вы можете заключить договор на разработку программных средств

          По  согласованному   техническому  заданию   квалифицированными
       разработчиками могут  быть созданы программные средства различного
       назначения.


                                 АДРЕСА И ЯВКИ

          По  всем   вопросам,  касающимся  программы  RATING,  программ,
       упомянутых в рекламе и по поводу заключения договора на разработку
       программных средств можно обращаться по адресу:

                     160600, г.Вологда, ул. Сергея Орлова, 6,
                             ВГПИ, кафедра Информатики
                                  Свердлову С.З.

                             телефон (817-22) 2-01-62

                                  или по адресу:

                                160024, г.Вологда,
                              ул.Северная, 26, кв.21
                           Свердлову Сергею Залмановичу

                             телефон (817-22) 4-61-77