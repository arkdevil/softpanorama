
                           Меню пользователя
                           -----------------

   Этот файл является краткой инструкцией по созданию меню и работе с ним в
оболочке SHORT 1.20. 

   В оболочке SHORT 1.20 можно создавать любое количество файлов меню, связи
между которыми могут быть совершенно произвольными.
   Для вызова меню пользователя служит операция Menu - вызов по клавише F2.
Но файл меню должен быть предварительно создан.  За ним зарезервировано имя
PCS.MNU. Таких файлов может быть несколько.  Файл меню, находящийся в одном
каталоге вместе с файлом PCS.EXE, является главным.  Файлы PCS.MNU в других
каталогах являются локальными, т.е. их область действия ограничена их ката-
логом.  По клавише F2 вызывается меню из каталога, открытого в активной па-
нели.  Если  в  этом каталоге нет файла  локального меню,  то будет вызвано
главное меню.  Но и при наличии локального  меню вызов главного возможен по
комбинации клавиш  Shift-F2.  Файл PCS.MNU является текстовым файлом разме-
ром не более 64Кбайт.  Далее, с помощью специальных команд, из любого файла
PCS.MNU  можно  ссылаться в другие файлы  с произвольными именами,  которые
представляют собой файлы меню.  С помощью тех же команд возможны и обратные
ссылки,  и вообще установление произвольно выбранных связей.  Размер любого
другого файла меню также не должен превышать 64Кбайт.

     структура файла меню                      пример файла меню
────────────────────────────────      ──────────────────────────────────
;комментарий                          ;клавиша a - формат
метка1:  название пункта 1 меню       a:     Форматирование дискет
         команда                             c:\dos\format a:
         .                            ;клавиша b - запуск PBRUSH
         .                            b:     Графический редактор
         команда                             echo off
;комментарий                                 c:
         .                                   cd\pbrush
         .                                   paint
меткаN:  название пункта N меню       ;клавиша p - парковка головок
         команда                      p:     Парковка винчестера
         .                                   c:\norton\diskmon /park
         .                            ;файл дополн. меню - ADD.MNU
         команда                      ;вызов по клавише F10
                                      F10:   [Дополнительное Меню]
                                             menuchain = c:\util\add.mnu
   Для приведенного выше примера при нажатии клавиши  F2 на экран будет вы-
ведено:
                [■]═══════Main User Menu═══════╗
                ║a:     Форматирование дискет  ║
                ║b:     Графический редактор   ║
                ║p:     Парковка винчестера    ║
                ║F10:   [Дополнительное Меню]  ║
                ╚══════════════════════════════╝

   Меткой может быть любой ASCII-символ,  набираемый с клавиатуры или функ-
циональная клавиша в виде Fn,  где n=1..10 - ее номер.  В этом случае пункт
меню доступен через соответствующую клавишу, либо может быть выбран при по-
мощи клавиш перемещения курсора или мыши.  Если метка содержит более одного
символа либо отсутствует,  то  вызов такого  пункта меню  посредством одной
клавиши становится невозможен - такую команду можно указать при помощи кла-
виш перемещения курсора и нажать клавишу  Enter,  либо выполнить при помощи
мыши.

   Для более эффективной работы меню введены следующие команды.

      Swap On                      включить свопинг
      Swap Off                     выключить свопинг
      DosMode On                   при запуске команды использовать интер-
                                   претатор команд, загруженный ранее
      DosMode Off                  при запуске команды использовать внешний
                                   интерпретатор команд
      SavePath                     сохранить текущий путь
      RestorePath                  восстановить путь, сохраненный ранее
      MenuChain = [d:][path\]name  вызвать другое меню
      .title <ТЕКСТ>               задать заголовок меню

   Применение команд Swap Off и DosMode On позволяет сократить время выпол-
нения команд. Это сокращение времени тем существеннее, чем длиннее последо-
вательность выполняемых команд и чем медленнее обращение к диску,  на кото-
ром находятся файлы  PCS.EXE  и  COMMAND.COM.  Область действия команд Swap
и DosMode распространяется только на тот пункт меню,  в который они включе-
ны,  и не меняет текущих установок  оболочки SHORT.  Для выяснения значения
этих команд следует обратиться  к описанию операций  Swap и Mode (Свопинг и
Режим) из Главного меню. В таблице 4 приведены четыре режима работы оболоч-
ки.
                                                              Таблица 4.
  ┌─────┬───────┬──────────────────────────────────────────┬────────────┐
  │Swap │DosMode│ Размер резидентной части SHORT           │   Время    │
  ├─────┼───────┼──────────────────────────────────────────┼────────────│
  │ on  │  off  │ 688 байт + размер резидента COMMAND.COM  │ наибольшее │
  │ on  │  on   │ 688 байт                                 │    ....    │
  │ off │  off  │ 100 Кбайт + размер резидента COMMAND.COM │    ....    │
  │ off │  on   │ около 100 Кбайт                          │ наименьшее │
  └─────┴───────┴──────────────────────────────────────────┴────────────┘

   Строка,  содержащая метку  и  название  пункта меню,  является текстовой
строкой и может содержать переключатели цвета в виде ^BF,  где B и F - HEX-
цифры, обозначающие цвет фона и текста соответственно:

		0 - черный;		8 - серый;
		1 - синий;		9 - ярко-синий;
		2 - зеленый;		A - ярко-зеленый;
		3 - голубой;		B - ярко-голубой;
		4 - красный;		C - ярко-красный;
		5 - пурпурный;		D - ярко-пурпурный;
		6 - желтый;		E - ярко-желтый;
		7 - белый;		F - ярко-белый.

   Любое другое значение B или F не изменит цвет фона или текста.

   В командных строках могут использоваться подстановки в качестве аргумен-
тов команды:

  Подстановка    Что означает                               Пример  
  ───────────    ──────────────────────────────────────     ──────────────
  !              имя файла без расширения                   filename
  !.!            имя файла с расширением                    filename.ext
  !&             полный путь файла                          c:\short\dir\
  !:             текущий номер диска                        c:
  !\             текущий путь                               \short\dir
* !%             последний элемент текущего пути            dir
  !!             символ ''!''                               !
  !n             имя помеченного файла с номером n
                 без расширения
  !n.!           имя помеченного файла с номером n
                 c расширением
  !@             полное имя файла-списка помеченных файлов/
                 каталогов
  {ТЕКСТ}        текстовая строка, введенная с клавиатуры;
                 при запросе строки на экран выводится со-
                 общение ТЕКСТ
  {{             символ "{"                                 {

*  Примечание.  Последний элемент текущего пути для коневого каталога имеет
                вид (ROOT-n), где n - номер диска.  Например, для диска С в
                этом случае последний элемент пути будет равен (ROOT-C).

   Файлы  с расширением MNU из каталога MENU на дистрибутивной дискете слу-
жат примером построения файлов подменю,  использования переключателей цвета
и т.д.
