{* - DKT5_MAC v.m. 19.04.91-14.32 vor ME 5.00P -BCPP- *}
$Macro_File Reform_E            ;
{ - Adapted by Entelis A.S. with use DKT5_MAC at Korzun E.G.}
 { **********************    1 in * MACRO_FILE ref              ************* }
 $Macro  CONTROL_HYPHENS  ;
 { ******************* Ñ´®≠†     1725   **************** í•™·‚     1694 ***** }
      Def_int(int_1,int_2);
         If (First_Run  AND Not (Global_Int ('!FRM___ALEX') ) ) Then
            Set_Global_Int ('Hyphen_Iint_' + Str (3 + Global_Int ('Hyphen_What') )  , 1) ;
            Set_Global_Int ('Hyphen_Iint_5' , (Indent_Level  + Xpos ('|16' , Format_Line  , 1) ) - 1) ;
            Set_Global_Int ('Hyphen_Iint_6' , Indent_Level ) ;
            Set_Global_Int ('Hyphen_Iint_7' , Not (Xpos ('/NH' , Mparm_Str  , 1) ) ) ;
            Set_Global_Int ('Hyphen_Iint_8' , Xpos ('/YU' , Mparm_Str  , 1)  > 0) ;
            Set_Global_Int ('Hyphen_Iint_9' , Not (Xpos ('/NJ' , Mparm_Str  , 1) ) ) ;
         End ;
         Set_Global_Int ('Hyphen_Iint_1'   , Right_Margin ) ;
         Set_Global_Str ('Hyphen_Iparm_1'  , '/T=è‡†¢†Ô £‡†≠®Ê†           /TP=1/C=2/L=1/W=4/QK=1/H=REFORMAT.HLZ^RM') ;
         Set_Global_Str ('Hyphen_Iparm_2'  , '/TP=10/T=è•‡•‰Æ‡¨†‚®‡Æ¢†‚Ï:/L=2/C=2') ;
         Set_Global_Str ('Hyphen_Iparm_3'  , '/TP=12/T=é§®≠ Ø†‡†£‡†‰ ¢≠®ß Æ‚ ‚•™„È•© ·‚‡Æ™®/L=3/C=2/G=Hyphen_What/R=0/H=REFORMAT.HLZ^TOGGLE') ;
         Set_Global_Str ('Hyphen_Iparm_4'  , '/TP=12/T=Ç·• Ø†‡†£‡†‰Î ¢ ·‚‡ÆÁ≠Æ¨ °´Æ™•/L=4/C=2/G=Hyphen_What/R=1/H=REFORMAT.HLZ^TOGGLE') ;
         Set_Global_Str ('Hyphen_Iparm_5'  , '/T=èÆ <Enter> Ø•‡•ÂÆ§ ¢ ™Æ´Æ≠™„ /TP=1/C=2/L=5/W=2/H=REFORMAT.HLZ^ENTER_INDENT') ;
         Set_Global_Str ('Hyphen_Iparm_6'  , '/T=í•™„È†Ô ã•¢†Ô £‡†≠®Ê†  /TP=1/C=2/L=6/W=2/QK=9/H=REFORMAT.HLZ^ATLM') ;
         Set_Global_Str ('Hyphen_Iparm_7'  , '/T=ê†ß‡•Ë®‚Ï Ø•‡•≠Æ· /TP=13/C=2/L=7/H=REFORMAT.HLZ^ENABLE') ;
         Set_Global_Str ('Hyphen_Iparm_8'  , '/T=á†£´†¢≠Î• ·´Æ¢† Ø•‡•≠Æ·Ô‚·Ô /TP=13/C=2/L=8/H=REFORMAT.HLZ^UPPERCASE') ;
         Set_Global_Str ('Hyphen_Iparm_9'  , '/T=è‡†¢Æ• ¢Î‡†¢≠®¢†≠®• ‚•™·‚† /TP=13/C=2/L=9/H=REFORMAT.HLZ^JUSTIFY') ;
         Set_Global_Str ('Hyphen_Iparm_10' , '/T= é·‚†‚Ï·Ô "‡•ß®§•≠‚Æ¨"/R=10/KC=<AltS>/K1=0/K2=31/TP=11/C=7/L=11/W=15/H=REFORMAT.HLZ^RESIDENT') ;
         Set_Global_Str ('Hyphen_Iparm_11' , '/T= ç†Á†‚Ï Ø•‡•‰Æ‡¨†‚®‡Æ¢†≠®• /R=11/KC=<AltR>/K1=0/K2=19/TP=11/C=5/L=13/W=20/H=REFORMAT.HLZ^REFORMAT') ;
         Rm ('Userin^Data_In /#=11/PRE=Hyphen_/S=1/A=1/T=ê•¶®¨Î è•‡•‰Æ‡¨†‚®‡Æ¢†≠®Ô/H=REFORMAT.HLZ^*') ;
         If (Global_Int ('Hyphen_Iint_1')  > 2030) Then
            Make_Message (' è‡†¢†Ô £‡†≠®Ê† ·´®Ë™Æ¨ °Æ´ÏË†Ô .') ;
         Else
            If (Global_Int ('Hyphen_Iint_1')  < (3 + Global_Int ('Hyphen_Iint_6') )) Then
               Make_Message (' ç•¢•‡≠Æ „™†ß†≠Î £‡†≠®ÊÎ ‰Æ‡¨†‚®‡Æ¢†≠®Ô');
            Else
               Right_Margin := Global_Int ('Hyphen_Iint_1') ;
               Hard_Cr := Parse_Str ('/CR=' , Mparm_Str ) ;
               int_1 := Global_Int ('!FRM___ALEX') ;
               If (int_1) Then
                  Def_Str(str_1[12]);
                  str_1 := 'ÄéàÖìõüûù';
                  Memw (int_1 , Right_Margin ) ;
                  Memb (int_1 + 2 , ((Global_Int ('Hyphen_Iint_8')  SHL 2) + (Global_Int ('Hyphen_Iint_9')  SHL 1)) + Global_Int ('Hyphen_Iint_7') ) ;
                  int_1 := int_1 AND -65536{FFFF0000};
                  int_2 := 1;
                  If (Global_Int ('Hyphen_Iint_8') ) Then
                     While (int_2 < Svl(str_1)) Do
                        Memb (int_1 + Ascii (Str_Char ( str_1 , int_2) )  , int_2 + 22{16}) ;
                        ++int_2;
                     End ;
                     Memb (int_1 + 240{F0} , 26{1A}) ;
                  Else
                     While (int_2 <= Svl(str_1)) Do
                        Memb (int_1 + Ascii (Str_Char ( str_1 , int_2) )  , 255{FF}) ;
                        ++int_2;
                     End ;
                  End ;
                  Refresh := 0;
                  Mark_Pos ;
                  Goto_Col (Global_Int ('Hyphen_Iint_6') ) ;
                  Set_Indent_Level ;
                  Goto_Mark ;
                  Refresh := 1;
               End ;
               If (Return_Int  = 11) Then
                  Rm ('Reform_E^Russ_Reformat ' + Mparm_Str ) ;
               Else
                  If (Return_Int  = 10) Then
                     If (Global_Int ('!FRM___ALEX') ) Then
                        Make_Message (' ê•ß®§•≠‚≠Î© ê•‰Æ‡¨†‚•‡ ØÆ¢‚Æ‡≠Æ †™‚®¢®‡Æ¢†≠.') ;
                     Else
                        Rm ('Reform_E^Russ_Reformat /___S' + Mparm_Str ) ;
                     End ;
                  End ;
               End ;
            End ;
         End ;
         End_Macro ;
 { **********************    1 in * MACRO_FILE russ             ************* }
 $Macro  RUSS_REFORMAT    ;
 { ******************* Ñ´®≠†    10167   **************** í•™·‚    10136 ***** }
      Def_int(int_1,int_2,int_3,int_4,int_5,int_6,int_7,int_8,int_9,int_10,
         int_11,int_12,int_13,int_14,int_15,int_16,int_17,int_18,int_19);
 { x001D }
         Def_Str(str_1[1812]);
 { x0022 }
         Def_Str(str_2[48]);
 { x0026 }
         Def_Str(str_3[2048]);
 { x002B }
         Def_Str(str_4);
 { x002F }
         Def_Str(str_5[377]);
 { x0034 }
         Def_Str(str_6[510]);
 { x0039 }
         Def_Str(str_7[278]);
 { x003E }
         Def_Str(str_8[220]);
 { x0042 }
         Def_Str(str_9[1458]);
 { x0047 }
         Def_Str(str_10[904]);
 { x004C }
         Def_Str(str_11[198]);
 { x0050 }
         Def_Str(str_12[488]);
 { x0055 }
         Def_Str(str_13[320]);
 { x005A }
         Def_Str(str_14[648]);
 { x005F }
         str_4 := '';
 { x0063 }
         int_11 := Seg (str_4) ;
 { x006A }
         int_8 := Ofs (str_4) ;
 { x0071 }
         int_6 := (int_8 + 4) MOD 16{10};
 { x007B }
         int_11 := (((int_8 + 20{14}) - int_6) SHR 4) + int_11;
 { x008B }
         If (int_6) Then
 { x0090 }
            While (int_6 < 16{10}) Do
 { x0098 }
               str_4 := str_4 + ' ';
 { x00A0 }
               ++int_6;
 { x00A2 }
            End ;
 { x00A5 }
         End ;
         str_3 := '';
 { x00AA }
         int_12 := Seg (str_3) ;
 { x00B1 }
         int_8 := Ofs (str_3) ;
 { x00B8 }
         int_6 := (int_8 + 4) MOD 16{10};
 { x00C2 }
         int_12 := (((int_8 + 20{14}) - int_6) SHR 4) + int_12;
 { x00D2 }
         If (int_6) Then
 { x00D7 }
            int_13 := 16{10} - int_6;
 { x00DE }
            While (int_6 < 16{10}) Do
 { x00E6 }
               str_3 := str_3 + ' ';
 { x00EE }
               ++int_6;
 { x00F0 }
            End ;
 { x00F3 }
         End ;
         str_1 := '';
 { x00F8 }
         int_10 := Seg (str_1) ;
 { x00FF }
         int_8 := Ofs (str_1) ;
 { x0106 }
         int_6 := (int_8 + 4) MOD 16{10};
 { x0110 }
         int_10 := ((((int_8 + 20{14}) - int_6) SHR 4) + int_10) SHL 16{10};
 { x0123 }
         If (int_6) Then
 { x0128 }
            int_8 := 16{10} - int_6;
 { x012F }
            While (int_6 < 16{10}) Do
 { x0137 }
               str_1 := str_1 + ' ';
 { x013F }
               ++int_6;
 { x0141 }
            End ;
 { x0144 }
         End ;
         int_6 := 1;
 { x0148 }
         While (int_6 <= 64{40}) Do
 { x0150 }
            str_1 := str_1 + '|255|255';
 { x0159 }
            ++int_6;
 { x015B }
         End ;
 { x015E }
         Memb (int_10 + 45{2D} , 254{FE}) ;
 { x0167 }
         str_2 := '|23|14|3|15|16|0|5|25|13|6	|8|10|24|1|11|7|2|27|20|12|17|18|4|19|22|28|21|31|30|29';
 { x018B }
         str_1 := str_1 + str_2 + Copy (str_2 , 1 , 16{10}) ;
 { x019A }
         int_6 := 1;
 { x019E }
         While (int_6 <= 24{18}) Do
 { x01A6 }
            str_1 := str_1 + 'ˇˇ';
 { x01AE }
            ++int_6;
 { x01B0 }
         End ;
 { x01B3 }
         str_1 := str_1 + Copy (str_2 , 17{11} , 16{10})  + '';
 { x01C4 }
         int_6 := 1;
 { x01C8 }
         While (int_6 <= 7) Do
 { x01D0 }
            str_1 := str_1 + 'ˇˇ';
 { x01D8 }
            ++int_6;
 { x01DA }
         End ;
 { x01DD }
         If (Not (Global_Int ('Hyphen_Iint_8') ) ) Then
 { x01F1 }
            str_2 := 'ÄéàÖìõüûù';
 { x01FF }
            int_6 := 1;
 { x0203 }
            While (int_6 <= Svl(str_2)) Do
 { x020B }
               Memb (int_10 + Ascii (Str_Char ( str_2 , int_6) )  , 255{FF}) ;
 { x0218 }
               ++int_6;
 { x021A }
            End ;
 { x021D }
         End ;
         str_1 := str_1
{* 193  at offset 0221 ----------------------------------------- *} +
'˚¸ÛÆtZOAã˜ÚÆuBA‚¯ãÀO˝ÚÆ¸Gã«@;˛3|255ã∆.â6».âƒ.â>∆íÄ|255 á”tG.ˆ¯t;ã +ÀÉ˘||2È´|0.ã>»ãÕ+œ∞ ÚÆt¯ |0O∏|0Î.°Ãéÿé¿.°ƒ.ãˆ.ã>∆|255tÕãﬂã˜FãÕ+ŒÛ§M.ˆ¯uC˘ |0H
¿tˆ+”
“tM.ã6»äˆÚ3€ã˛.ãˆ+Œä‡∞ „'
{* 220  at offset 02E5 ----------------------------------------- *} +
'''ÚÆu#˛«:¸||Ù:⁄}˛√VQãÕ+œãıã˛N˝Û§¸™EY^2|255Î◊Ûä∆2‰*”
“u∫.ãˆÎúãÛ3€.ã é¬>∆F|0 3|255.ˆ¯u¨<Är<üw <Øv0Î¨< .◊™u¯é⁄ãŸKÉ˚}È,|255ãG|255Ü‡<˛tC<|13tÍ<tÊ<rMÎﬁÄ|0||ÿãG˛=t–Ü‡<|13t"<t<t||¿Ä¸rÎ∑ã√@æ‚˘Ëùt´ÈCãÀIãÒN˝¨<Òw‚˜'
{* 224  at offset 03C4 ----------------------------------------- *} +
'¸ãŸÎìãÕãÛF¨<w~‚˜ÎÉPËOXusÄ¸v||lÈÑ|0ãÀIãÒN˝¨<wÃ‚˜Î»¸Ä¸}ØÄ¸|13t™FFVË^t°ã√+∆=|0||ËÆu5Ä˛s-ã√Hæ⁄˘Ëu$È''|255ã√Hæﬁ˘Ë|13tÄ˝~ã√Hæ‚˘Ë˚uÈ|255ÄvÈò|0ã√@æ⁄˘Ë„tËÈâ|0Ä¸t‡äG˛<rÈ›˛Pã√@æ⁄˘Ë¬Xt∆<rfPËáXt_:ƒt∑É˚||2<Ü'
{* 233  at offset 04A7 ----------------------------------------- *} +
'‡u''<t®<t§<u
ä<tö<tñ<uã<tå=táÎÄ¸tÓã√Hæﬁ˘ËouÈz˛Ä˝~ã√Hæ‚˘ËZuÈe˛¸.°Ãéÿé¿.°∆¿tCÿÎ.»Ä?-tãÕ+Àãıã˛N˝Û§¸∆-EC.ˆ¯t¿uÈá˝.°ƒ.ãˆÈÖ˝ãG|255=uÉ˚√=tr.ƒ>÷&ã|13GGãÒÚØu_áŒI—·˘&ãäÃ2‰2Ì¯ãGÚØuFÉ˛C—ÊäG˛.|255§∂'
{* 221  at offset 0593 ----------------------------------------- *} +
'É˘4t<Î*ÄÎ$…u$<√…uÎÈ…u<√É˘äGt<Î<t2¿√€√.ƒ>Œ&ã|13FGG≠ÚØu7ã˘—Á.|255•ö¨<t2¿√€√¨<t˜ÉÓxÛ≠=√ÉÓxÈ≠=	√ÉÓxﬂ≠=√&ã|13GGÚØ√A—·˘&ã|13A—·˘¯Ë!√ã∆+√H=|0}
É˚√Ë|255√ãÛ.ƒ>“&ã|13ŒGG≠ÚØuøã˘—Á.|255•§ÉÓ¨x<|255uu≠='
{* 232  at offset 0673 ----------------------------------------- *} +
'√≠=
√≠=√ãG˛=√ãG˛=ÎSãG˛=tP=
ÎFãG˛=tC=t>=Î4ãG˛=t=
u)≠=t%=|0t =t=t=
u¨<t|13<Î≠=t2¿√€√ãG˛=
t=uÌÄ||tÈ≠=	t„=tﬁ=tŸ=|0t‘N≠=tÕ=t»=
t√=

√ã√æÊ˘Ë''|0t$ã√Ä?
uæÍ˘Ë|0√Ä?uæÓ˘Ë
|0√@æÚ˘Ë|0√s.ƒ<ã'
{* 159  at offset 075E ----------------------------------------- *} +
'–ãÀIãÒN˝¨
¿x‚˘xN¸FFã¬+∆Ø||PØM=|0|13&=&ä|13|50ÌG≠ÚØ√-|0ã–—‡¯&=&ä|13|50ÌQG≠ÚØXu$H—‡¯&ãäÃ2‰2Ì¯ã¡ã Û¶t˘Ò+Úã»‚Ó€√ΩΩ»◊·5DINU]j||∏fw~mmÑã|0|0|0|0|0|0'
     ;
 { x0800 }
         str_1 := str_1 + Make_Str (Seg (int_11)  , Ofs (int_11)  , 2)  + Make_Str (Seg (int_12)  , Ofs (int_12)  , 2) ;
 { x0820 }
         str_5 :=
{* 202  at offset 0822 ----------------------------------------- *}
'|0
|13L|0|0|0|13|13|13|13
|13|13|13				|0			
					






|0|0|0|0|0ñ|0|0|13|13		
'
{* 171  at offset 08EE ----------------------------------------- *} +
'


6543210/.-	443210/.-,,,+**)(			


'
            ;
 { x099C }
         int_6 := ((Seg (str_5)  SHL 16{10}) + Ofs (str_5) ) + 4;
 { x09AF }
         str_1 := str_1 + Make_Str (Seg (int_6)  , Ofs (int_6)  , 4) ;
 { x09C1 }
         str_6 :=

{* 210  at offset 09C3 ----------------------------------------- *}
'	|0
	|0|0|0|||0	|0	
	
|0|0|0|0
|0|0	

		|0		


	
|0|0	
	
'
{* 235  at offset 0A97 ----------------------------------------- *} +
'		
	
	
||||µ||0		:??>@?>?>??>>=<;:;<<>==AA@???	
		


	


		
	
	'
{* 061  at offset 0B85 ----------------------------------------- *} +
'	
	

								'

            ;
 { x0BC5 }
         int_6 := ((Seg (str_6)  SHL 16{10}) + Ofs (str_6) ) + 4;
 { x0BD8 }
         str_1 := str_1 + Make_Str (Seg (int_6)  , Ofs (int_6)  , 4) ;
 { x0BEA }
         str_7 :=
{* 215  at offset 0BEC ----------------------------------------- *}
'|0		
					
<@BDPRTVVbbbdddddhhjllpr
Ñäååíî|0





'
{* 059  at offset 0CC5 ----------------------------------------- *} +
'

|13|0
|0|13'

            ;
 { x0D03 }
         int_6 := ((Seg (str_7)  SHL 16{10}) + Ofs (str_7) ) + 4;
 { x0D16 }
         str_1 := str_1 + Make_Str (Seg (int_6)  , Ofs (int_6)  , 4) ;
 { x0D28 }
         str_10 :=
{* 227  at offset 0D2A ----------------------------------------- *}
'|
|||S|å|"eA–0






 !"#$%&''	@PQRSTUV'
{* 246  at offset 0E0F ----------------------------------------- *} +
'

	




''*-?BEaxÄÉÜ¢	'
{* 234  at offset 0F08 ----------------------------------------- *} +
'									
		 *4JTdh'
{* 190  at offset 0FF5 ----------------------------------------- *} +
'


$)5H	



|0	
	"		
'

            ;
 { x10B6 }
         int_6 := ((Seg (str_10)  SHL 16{10}) + Ofs (str_10) ) + 4;
 { x10C9 }
         str_1 := str_1 + Make_Str (Seg (int_6)  , Ofs (int_6)  , 4) ;
 { x10DB }
         str_9 :=
{* 229  at offset 10DD ----------------------------------------- *}
'|0|0|0|0ñ|0)∫˘h



|0	
	|0
0/.-,+*)(''&%$#"! ;

			



'
{* 247  at offset 11C4 ----------------------------------------- *} +
'
|13vvvvvvvvvvvvvvxxxxx||ÇÇÇÇÑÑÜÜííííííííîò††††††††§§¶®®®®®®®®®®			

		

'
{* 246  at offset 12BE ----------------------------------------- *} +
'|0


		
	
			
|0
0	|0|0
	


	`abcdefghijklpquvwÅÇÉìöõúù°•¨≠Æ'
{* 247  at offset 13B7 ----------------------------------------- *} +
'≤≥¥µ∂Ω¡»… ÀÃÕŒœ–—

	
	




|0
	|0
	
	
	


|0
	

 '
{* 249  at offset 14B1 ----------------------------------------- *} +
'
	
	
		
@BDFHJPRTV`bhÇåéêíòöú™¨Æ∞≤¥∂∏∫ºæ


	


|9		

|0'
{* 235  at offset 15AD ----------------------------------------- *} +
'
|0


	

	7?GJM|9
		

|0	
 	

'
            ;
 { x169B }
         int_6 := ((Seg (str_9)  SHL 16{10}) + Ofs (str_9) ) + 4;
 { x16AE }
         str_1 := str_1 + Make_Str (Seg (int_6)  , Ofs (int_6)  , 4) ;
 { x16C0 }
         str_8 :=
{* 219  at offset 16C2 ----------------------------------------- *}
'|0|0|0|0|0/|0~|0ù|0¿|0	


 !"#	
		



'
            ;
 { x179F }
         int_6 := ((Seg (str_8)  SHL 16{10}) + Ofs (str_8) ) + 4;
 { x17B2 }
         str_1 := str_1 + Make_Str (Seg (int_6)  , Ofs (int_6)  , 4) ;
 { x17C4 }
         str_11 :=
{* 194  at offset 17C6 ----------------------------------------- *}
'|0|0
|0|0;|0x|0≠|0|13

|0	
	
	
		
|13
		
'
            ;
 { x188A }
         int_6 := ((Seg (str_11)  SHL 16{10}) + Ofs (str_11) ) + 4;
 { x189D }
         str_1 := str_1 + Make_Str (Seg (int_6)  , Ofs (int_6)  , 4) ;
 { x18AF }
         str_12 :=
{* 238  at offset 18B1 ----------------------------------------- *}
'|0|0|0|0|56|0e|0A¨¥
|13|0	

	|0
		

456789:;<=>?@AEOSTU_cpqrst	
	'
{* 245  at offset 19A1 ----------------------------------------- *} +
'

	

	


			


|0|0
$&,.468:		



|0	
	
	

'
            ;
 { x1A99 }
         int_6 := ((Seg (str_12)  SHL 16{10}) + Ofs (str_12) ) + 4;
 { x1AAC }
         str_1 := str_1 + Make_Str (Seg (int_6)  , Ofs (int_6)  , 4) ;
 { x1ABE }
         str_13 :=
{* 226  at offset 1AC0 ----------------------------------------- *}
'|0|0|0|0|57|0J|0“|0"

|13	|0	"#$%&''+/018<=>?CD	





	
	
	|0'
{* 091  at offset 1BA4 ----------------------------------------- *}  +
' "	
		
	
'
            ;
 { x1C02 }
         int_6 := ((Seg (str_13)  SHL 16{10}) + Ofs (str_13) ) + 4;
 { x1C15 }
         str_1 := str_1 + Make_Str (Seg (int_6)  , Ofs (int_6)  , 4) ;
 { x1C27 }
         str_14 :=
{* 228  at offset 1C29 ----------------------------------------- *}
'|||||Æ|0|57T|



0<FNNd	|0			||0

			
	
			

	#*4ABL\'
{* 248  at offset 1D0F ----------------------------------------- *} +
'							|	|
	

	

"$&(*468:DZ`fÑÜåé

				|9	
		'
{* 167  at offset 1E0A ----------------------------------------- *} +
'										$''*
|0|0
	
	
|0	
|0
	'
;
 { x1EB4 }
         int_6 := ((Seg (str_14)  SHL 16{10}) + Ofs (str_14) ) + 4;
 { x1EC7 }
         str_1 := str_1 + Make_Str (Seg (int_6)  , Ofs (int_6)  , 4) ;
 { x1ED9 }
         int_14 := 96{60};
 { x1EDD }
         While ((Memp (int_14 SHL 2)  <> 0) AND (int_14 < 253{FD})) Do
 { x1EF0 }
            ++int_14;
 { x1EF2 }
         End ;
 { x1EF5 }
         Memp (int_14 SHL 2 , int_10 + 256{0100}) ;
 { x1F02 }
         int_6 := Right_Margin ;
 { x1F06 }
         str_1 := str_1 + Make_Str (Seg (int_6)  , Ofs (int_6)  , 2)  + Char (((Global_Int ('Hyphen_Iint_8')  SHL 2) + (Global_Int ('Hyphen_Iint_9')  SHL 1
            )) + Global_Int ('Hyphen_Iint_7') ) ;
 { x1F46 }
         int_1 := Insert_Mode ;
 { x1F49 }
         int_2 := Indent_Style ;
 { x1F4D }
         int_3 := Wrap_Stat ;
 { x1F51 }
         Indent_Style := 0;
 { x1F55 }
         Wrap_Stat := 0;
 { x1F59 }
         R_Ax := 13595{351B};
 { x1F5D }
         Intr (33{21}) ;
 { x1F60 }
         int_9 := (R_Es  SHL 16{10}) + R_Bx ;
 { x1F68 }
         str_2 := '';
 { x1F6D }
         int_7 := Seg (str_2) ;
 { x1F74 }
         int_8 := Ofs (str_2) ;
 { x1F7B }
         int_6 := (int_8 + 4) MOD 16{10};
 { x1F85 }
         R_Ds := (((int_8 + 20{14}) - int_6) SHR 4) + int_7;
 { x1F94 }
         If (int_6) Then
 { x1F99 }
            int_8 := 16{10} - int_6;
 { x1FA0 }
            While (int_6 < 16{10}) Do
 { x1FA8 }
               str_2 := str_2 + ' ';
 { x1FB0 }
               ++int_6;
 { x1FB2 }
            End ;
 { x1FB5 }
         End ;
         str_2 := str_2 + '.ˆ|22|6|0|207|0';
 { x1FC3 }
         int_7 := (((R_Ds  SHL 16{10}) + Svl(str_2)) - int_8) - 1;
 { x1FD2 }
         If (Xpos ('/___S' , Mparm_Str  , 1) ) Then
 { x1FE0 }
         Else
 { x1FE3 }
            R_Dx := 0;
 { x1FE6 }
            R_Ax := 9499{251B};
 { x1FEA }
            Intr (33{21}) ;
 { x1FED }
            int_1 := Insert_Mode ;
 { x1FF0 }
            Insert_Mode := 1;
 { x1FF3 }
            If (Xpos ('/U' , Mparm_Str  , 1) ) Then
 { x1FFE }
               Push_Undo ;
 { x2000 }
            Else
 { x2003 }
               Undo_Stat := 0;
 { x2007 }
            End ;
            Return_Int := Right_Margin  + 6;
 { x200D }
            Refresh := 0;
 { x2011 }
            Working ;
 { x2012 }
            Mark_Pos ;
 { x2014 }
            Goto_Col (Global_Int ('Hyphen_Iint_6') ) ;
 { x2026 }
            Set_Indent_Level ;
 { x2028 }
            Make_Message ('') ;
 { x202C }
            Write ('Reformatting paragraph' , 2 , Message_Row  , 0 , Message_Color ) ;
 { x204D }
            Write ('<CtrlBreak> to abort' , 55{37} , Message_Row  , 0 , Message_Color ) ;
 { x206C }
            If (Global_Int ('Hyphen_What') ) Then
 { x207D }
               If (Block_Stat  <> 1) Then
 { x2085 }
                  Make_Message (' No line block marked.') ;
 { x209E }
                  GoTo M0004 ;
 { x20A1 }
               End ;
               If (Marking ) Then
 { x20A6 }
                  Block_End ;
 { x20A8 }
               End ;
               Goto_Line (Block_Line1 ) ;
 { x20AC }
               int_6 := 0;
 { x20B0 }
               While (C_Line  <= Block_Line2 ) Do
 { x20B8 }
                  While (Xpos (Page_Str  , Get_Line  , 1)  OR Not (Length (Get_Line ) ) ) Do
 { x20C7 }
                     Down ;
 { x20C9 }
                     If (C_Line  > Block_Line2 ) Then
 { x20D1 }
                        GoTo M0000 ;
 { x20D4 }
                     End ;
                  End ;
 { x20D7 }
                  ++int_6;
 { x20D9 }
                  Write (Str (int_6)  + '...' , 25{19} , Message_Row  , 0 , Message_Color ) ;
 { x20EB }
                  Call P0000 ;
 { x20EE }
               End ;
 { x20F1 }
   M0000:
               Make_Message (' Line block Reform_Eted (' + Str (int_6)  + ' paragraphs).') ;
 { x2121 }
            Else
 { x2124 }
               Write ('...' , 24{18} , Message_Row  , 0 , Message_Color ) ;
 { x2130 }
               If (Length (Get_Line ) ) Then
 { x2136 }
                  Call P0000 ;
 { x2139 }
               End ;
               Make_Message (' Paragraph Reform_Eted from current line.') ;
 { x2165 }
            End ;
            Goto_Mark ;
 { x2167 }
            GoTo M0004 ;
 { x216A }
      { *** PROCEDURE  ************************* }
  P0000:                               { -- REFER  * CALLs=3                  }
            int_4 := 0;
 { x216E }
            While (1) Do
 { x2173 }
               If (Memb (int_7) ) Then
 { x217A }
                  GoTo M0003 ;
 { x217D }
               End ;
               Goto_Col (1) ;
 { x2181 }
               ++int_4;
 { x2183 }
               Put_Line (Get_Word_In ('	 ˇ')  + Remove_Space (Get_Word ('') ) ) ;
 { x2193 }
               If (Ascii (Hard_Cr ) ) Then
 { x2199 }
                  If (Xpos (Hard_Cr  , Get_Line  , 1) ) Then
 { x21A3 }
                     Down ;
 { x21A5 }
                     GoTo M0001 ;
 { x21A8 }
                  End ;
               End ;
               Down ;
 { x21AA }
               First_Word ;
 { x21AC }
               If ((Xpos (Cur_Char  , '|009 ˇ' , 1)  OR (C_Col  <> Indent_Level )) OR Xpos (Page_Str  , Get_Line  , 1) ) Then
 { x21C5 }
                  GoTo M0001 ;
 { x21C8 }
               End ;
            End ;
 { x21CB }
   M0001:                              { -- REFER  * GOTOs=2                  }
            Goto_Line (C_Line  - int_4) ;
 { x21D2 }
            While (int_4) Do
 { x21D7 }
               Eol ;
 { x21D9 }
               Left ;
 { x21DB }
               While ((C_Col  < Return_Int ) AND (int_4 > 1)) Do
 { x21E8 }
                  If (Memb (int_7) ) Then
 { x21EF }
                     GoTo M0003 ;
 { x21F2 }
                  End ;
                  If (Cur_Char  = '-') Then
 { x21FB }
                     Left ;
 { x21FD }
                     If ((Ascii (Cur_Char )  >= 128{80}) AND (Ascii (Cur_Char )  <= 241{F1})) Then
 { x220D }
                        Right ;
 { x220F }
                        Del_Char ;
 { x2211 }
                     Else
 { x2214 }
                        If ((Caps (Cur_Char )  >= 'A') AND (Caps (Cur_Char )  <= 'Z')) Then
 { x2226 }
                           Eol ;
 { x2228 }
                        Else
 { x222B }
                           Eol ;
 { x222D }
                           Right ;
 { x222F }
                        End ;
                     End ;
                  Else
 { x2232 }
                     Right ;
 { x2234 }
                     Right ;
 { x2236 }
                  End ;
                  Del_Char ;
 { x2238 }
                  While (Xpos (Cur_Char  , '|009 ˇ' , 1) ) Do
 { x2243 }
                     Del_Char ;
 { x2245 }
                  End ;
 { x2248 }
                  --int_4;
 { x224A }
                  Eol ;
 { x224C }
                  Left ;
 { x224E }
               End ;
 { x2251 }
               If (C_Col  <= Right_Margin ) Then
 { x2259 }
                  Down ;
 { x225B }
                  Ret ;
 { x225C }
               End ;
               Goto_Col (Right_Margin  + 1) ;
 { x2263 }
               If (Cur_Char  = ' ') Then
 { x226C }
                  Del_Char ;
 { x226E }
                  Cr ;
 { x2270 }
               Else
 { x2273 }
                  str_3 := str_3 + Get_Line ;
 { x227A }
                  R_Ds := int_12;
 { x227D }
                  R_Es := int_12;
 { x2280 }
                  R_Ax := 32{20};
 { x2283 }
                  R_Bx := Right_Margin ;
 { x2286 }
                  R_Cx := Right_Margin ;
 { x2289 }
                  R_Dx := 0;
 { x228C }
                  R_Si := 0;
 { x228F }
                  R_Di := 0;
 { x2292 }
                  R_Bp := Length (Get_Line ) ;
 { x2296 }
                  Intr (int_14) ;
 { x2299 }
                  If (R_Flags  AND 1) Then
 { x22A0 }
                     Put_Line (Memstr (int_12 SHL 16{10} , R_Bp ) ) ;
 { x22AA }
                     Goto_Col (R_Bx ) ;
 { x22AD }
                     Cr ;
 { x22AF }
                  Else
 { x22B2 }
                     Down ;
 { x22B4 }
                     --int_4;
 { x22B6 }
                  End ;
                  Memw ((Seg (str_3)  SHL 16{10}) + Ofs (str_3)  , int_13) ;
 { x22C8 }
               End ;
            End ;
 { x22CB }
            Ret ;
 { x22CC }
         End ;
         Def_Str(str_15[28]);
 { x22D0 }
         Set_Global_Int ('!FRM___ALEX' , ((int_10 + Svl(str_1)) - int_8) - 3) ;
 { x22E9 }
         Refresh := 0;
 { x22ED }
         Mark_Pos ;
 { x22EF }
         Goto_Col (Global_Int ('Hyphen_Iint_6') ) ;
 { x22F5 }
         Set_Indent_Level ;
 { x22F7 }
         Goto_Mark ;
 { x22F9 }
         Refresh := 1;
 { x22FD }
         str_15 := Date ;
 { x2300 }
         R_Ax := 11264{2C00};
 { x2304 }
         Intr (33{21}) ;
 { x2307 }
         int_15 := (((R_Cx  SHR 8) * 3600{0E10}) + ((R_Cx  AND 255{FF}) * 60{3C})) + (R_Dx  SHR 8);
 { x231E }
         Var_Parse_Int ('/IC=' , Mparm_Str , int_17) ;
 { x2327 }
         Var_Parse_Int ('/R=' , Mparm_Str , int_18) ;
 { x232F }
         If (Not (int_17) ) Then
 { x2335 }
            int_17 := 59{21};
 { x2339 }
         End ;
         If (Not (int_18) ) Then
 { x233F }
            int_18 := ((Max_Window_Row  - Min_Window_Row ) - 2) / 2;
 { x234C }
         End ;
         Write ('FRM' , int_17 , Status_Row  , 0 , Fnum_Color  OR 128{80}) ;
 { x235D }
         Make_Message ('Res-Ref active; <ESC>-exit, <AltR> -quickly reformat |246') ;
 { x23B0 }
         While (1) Do
 { x23B5 }
            If (Memw (1047{0417})  <> int_19) Then
 { x23C0 }
               Update_Status_Line ;
 { x23C1 }
               int_19 := Memw (1047{0417}) ;
 { x23C8 }
            End ;
            If (Error_Level ) Then
 { x23CC }
               Rm ('Meerror') ;
 { x23D6 }
               Error_Level := 0;
 { x23D9 }
            End ;
            If (Check_Key ) Then
 { x23DD }
               If ((Key1  = 0) AND (Key2  = 250{FA})) Then
 { x23EB }
                  If (((Mou_Last_Y  = Status_Row ) AND (Mou_Last_X  >= int_17)) AND (Mou_Last_X  <= (int_17 + 2))) Then
 { x2402 }
                     Push_Key (22{16} , 47{2F}) ;
 { x2407 }
                     GoTo M0002 ;
 { x240A }
                  End ;
               End ;
               If (Key2  = 1) Then
 { x2412 }
                  Set_Global_Int ('!FRM___ALEX' , 0) ;
 { x2418 }
                  Write ('   ' , int_17 , Status_Row  , 0 , Stat1_Color ) ;
 { x2426 }
                  R_Ax := 11264{2C00};
 { x242A }
                  Intr (33{21}) ;
 { x242D }
                  int_15 := ((((R_Cx  SHR 8) * 3600{0E10}) + ((R_Cx  AND 255{FF}) * 60{3C})) + (R_Dx  SHR 8)) - int_15;
 { x2447 }
                  If (Date  <> str_15) Then
 { x244E }
                     int_15 := int_15 + 86400{00015180};
 { x2458 }
                  End ;
                  If (int_15 >= 3600{0E10}) Then
 { x2461 }
                     str_15 := Str (int_15 / 3600{0E10})  + 'h ';
 { x246F }
                     int_15 := int_15 MOD 3600{0E10};
 { x2477 }
                  Else
 { x247A }
                     str_15 := '';
 { x247F }
                  End ;
                  If (int_15 >= 60{3C}) Then
 { x2487 }
                     str_15 := str_15 + Str (int_15 / 60{3C})  + 'm ';
 { x2497 }
                     int_15 := int_15 MOD 60{3C};
 { x249E }
                  End ;
                  str_15 := str_15 + Str (int_15)  + 's';
 { x24AA }
                  Make_Message (' Resident Reform_E uninstalled; active for ' + str_15) ;
 { x24DB }
                  GoTo M0005 ;
 { x24DE }
               End ;
               If (Key2  = 59{3B}) Then
 { x24E6 }
                  Help ('REFORMAT.HLP^INSIDE') ;
 { x24FC }
               Else
 { x24FF }
                  If ((Key1  = 13{0D}) AND (Key2  = 28{1C})) Then
 { x250D }
                     Pass_Key (13{0D} , 28{1C}) ;
 { x2512 }
                     If (Global_Int ('Hyphen_Iint_5') ) Then
 { x2525 }
                        Goto_Col (Global_Int ('Hyphen_Iint_5') ) ;
 { x252B }
                     End ;
                  Else
 { x252E }
                     If ((Key1  = 0) AND (Key2  = 19{13})) Then
 { x253C }
                        Refresh := 0;
 { x2540 }
                        Working ;
 { x2541 }
                        Undo_Stat := 0;
 { x2545 }
                        int_1 := Insert_Mode ;
 { x2548 }
                        Insert_Mode := 1;
 { x254B }
                        Mark_Pos ;
 { x254D }
                        Return_Int := Right_Margin  + 6;
 { x2553 }
                        Call P0000 ;
 { x2556 }
                        Goto_Mark ;
 { x2558 }
                        Insert_Mode := int_1;
 { x255B }
                        Undo_Stat := 1;
 { x255F }
                        Refresh := 1;
 { x2563 }
                        Redraw ;
 { x2565 }
                     Else
 { x2568 }
                        If ((Key1  = 22{16}) AND (Key2  = 47{2F})) Then
 { x2576 }
                           Put_Box (20{14} , 4 , 60{3C} , 12{0C} , 0 , M_B_Color  , 'ABOUT Reform_E' , 1) ;
 { x2595 }
                           Write ('Resident Reform_E' , 31{1F} , 5 , 0 , M_T_COLOR ) ;
 { x25B1 }
                           Write ('Version 3.1' , 34{22} , 6 , 0 , M_T_COLOR ) ;
 { x25C7 }
                           Write ('Smart Hyphenation Engine v.1.0' , 24{18} , 7 , 0 , M_T_COLOR ) ;
 { x25F0 }
                           Write ('(C) 1990,91 by Alex Romanov' , 26{1A} , 8 , 0 , M_T_COLOR ) ;
 { x2616 }
                           Write ('   OK   ' , 35{23} , 10 , 0 , Button_Color ) ;
 { x2629 }
                           Read_Key ;
 { x262A }
                           Kill_Box ;
 { x262B }
                        Else
 { x262E }
                           Pass_Key (Key1  , Key2 ) ;
 { x2633 }
                           Write ('FRM' , int_17 , Status_Row  , 0 , Fnum_Color  OR 128{80}) ;
 { x2642 }
                           Refresh := 1;
 { x2646 }
                           If (C_Col  <= Right_Margin ) Then
 { x264E }
                           Else
 { x2651 }
                              If (((C_Col  <= (Right_Margin  + 4)) AND (Key2  <> 79{4F})) AND ((Key1  = 0) OR (Key1  >= 128{80}))) Then
 { x266E }
                              Else
 { x2671 }
                                 If (C_Row  > int_18) Then
 { x2679 }
                                    int_6 := C_Line ;
 { x267D }
                                    Refresh := 0;
 { x2681 }
                                    While (C_Row  > int_18) Do
 { x2689 }
                                       Up ;
 { x268B }
                                    End ;
 { x268E }
                                    Goto_Line (int_6) ;
 { x2692 }
                                    Refresh := 1;
 { x2696 }
                                    Redraw ;
 { x2698 }
                                 End ;
                                 Refresh := 0;
 { x269C }
                                 int_16 := C_Col ;
 { x26A0 }
                                 Goto_Col (Right_Margin  + 1) ;
 { x26A7 }
                                 If (At_Eol ) Then
 { x26AC }
                                    Goto_Col (int_16) ;
 { x26B0 }
                                    Refresh := 1;
 { x26B4 }
                                 Else
 { x26B7 }
                                    int_1 := Insert_Mode ;
 { x26BA }
                                    Insert_Mode := 1;
 { x26BD }
                                    If (Cur_Char  = ' ') Then
 { x26C6 }
                                       Del_Char ;
 { x26C8 }
                                       Cr ;
 { x26CA }
                                       int_16 := (int_16 - Right_Margin ) - 2;
 { x26D4 }
                                    Else
 { x26D7 }
                                       str_3 := str_3 + Get_Line ;
 { x26DE }
                                       R_Ds := int_12;
 { x26E1 }
                                       R_Es := int_12;
 { x26E4 }
                                       R_Ax := 32{20};
 { x26E7 }
                                       R_Bx := Right_Margin ;
 { x26EA }
                                       R_Cx := Right_Margin ;
 { x26ED }
                                       R_Dx := 0;
 { x26F0 }
                                       R_Si := 0;
 { x26F3 }
                                       R_Di := 0;
 { x26F6 }
                                       R_Bp := Length (Get_Line ) ;
 { x26FA }
                                       int_16 := int_16 - R_Bp ;
 { x2700 }
                                       Intr (int_14) ;
 { x2703 }
                                       If (R_Flags  AND 1) Then
 { x270A }
                                          Put_Line (Memstr (int_12 SHL 16{10} , R_Bp ) ) ;
 { x2714 }
                                          Goto_Col (R_Bx ) ;
 { x2717 }
                                          Cr ;
 { x2719 }
                                          int_16 := (int_16 + R_Bp ) - R_Bx ;
 { x2721 }
                                       Else
 { x2724 }
                                          Down ;
 { x2726 }
                                          int_16 := 0;
 { x272A }
                                       End ;
                                       Memw ((Seg (str_3)  SHL 16{10}) + Ofs (str_3)  , int_13) ;
 { x273C }
                                    End ;
                                    Insert_Mode := int_1;
 { x273F }
                                    Left_Offset := 0;
 { x2743 }
                                    Goto_Col (Indent_Level  + int_16) ;
 { x274A }
                                    Refresh := 1;
 { x274E }
                                    Redraw ;
 { x2750 }
                                 End ;
                              End ;
                           End ;
                        End ;
                     End ;
                  End ;
               End ;
            End ;
   M0002:
         End ;
 { x2753 }
   M0003:                              { -- REFER  * GOTOs=2                  }
         Make_Message (' Reform_Eting aborted by user.') ;
 { x2774 }
   M0004:                              { -- REFER  * GOTOs=2                  }
         R_Ds := int_9 SHR 16{10};
 { x277A }
         R_Dx := int_9 AND 65535{FFFF};
 { x2781 }
         R_Ax := 9499{251B};
 { x2785 }
         Intr (33{21}) ;
 { x2788 }
         If (Xpos ('/U' , Mparm_Str  , 1) ) Then
 { x2792 }
            Pop_Undo ;
 { x2794 }
         Else
 { x2797 }
            Undo_Stat := 1;
 { x279B }
         End ;
         Insert_Mode := int_1;
 { x279E }
   M0005:
         Memp (int_14 SHL 2 , 0) ;
 { x27A7 }
         Indent_Style := int_2;
 { x27AB }
         Wrap_Stat := int_3;
 { x27AF }
         Refresh := 1;
 { x27B3 }
         Redraw ;
 { x27B5 }
         End_Macro ;
