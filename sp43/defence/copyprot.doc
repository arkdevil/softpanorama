▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄
█                        Как защитить файл ?                              █
█                 Несколько идей по волнующей теме                        █
█▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄█

      Как защитить файл от незаконного использования ? Каждого  программиста
в той или  иной мере интересует  этот вопрос. Ни  для кого не  секрет, что в
нашей стране все  копируется как угодно,  кем угодно и  в любых количествах.
Часто  человек,  скопировавший  какое-  либо  программное  средство  в целях
экономии места  на дискете  не копирует  документацию на  ПС, или (что чаще)
старается избавиться от "ненужных" файлов,которые, по его пониманию,  ничего
не производят и  вообще они только  занимают место.Все это  приводит к тому,
что  малоизвестная,  но  в  принципе  хорошая  и  нужная  программа  по вине
"пирата" получает отрицательные рекомендации. Автором этого текста  наблюда-
лись некоторые игры, АРМы,  несколько прикладных программ, которые  получили
хорошую  антирекламу  в  результате  действий  лихих  "коПИРАТоров". И когда
настала необходимость писать свои прикладные программы, которые не  хотелось
бы отдавать "на растерзание" пиратам, начали возникать идеи по защите файлов
от копирования.

      Но как отличить копирование файла на другой диск в ходе  переорганиза-
ции системы от незаконного копирования? А ответ на этот вопрос и не  следует
искать.  Некоторые  разработки,  призванные  защитить продукт от копирования
причиняют массу  неудобств пользователю,  когда после  копирования в  другой
поддиректорий программа начинает задавать глупые вопросы или вообще  прекра-
щает свое существование.Хотелось бы  предостеречь своих коллег от  использо-
вания  таких  программ  или  использования  такого  способа  защиты. Гораздо
цивилизованее выглядит использование ключевых дискет. Такой способ позволяет
хозяину программы свободно перемещать ПС  по диску и даже сбрасывать  его на
дискеты, но  использовать без  купленного ключа  программу будет невозможно.
И на этот счет возникли следующие идеи.

      Куда записывать код ? В файл ! (советы некоторых знакомых).  Простите,
детская наивность. Для  этой цели более  подходит BOOT -  сектор диска. Есть
вариант,когда в какой- нибудь оверлейный файл вписывается содержимое началь-
ных секторов  дискеты и  при запуске  производится сравнение  ключа с кодом.
Для формирования  оригинального содеримого  достаточно изменить  пару байт в
начальных  областях  дискеты.Но  такой  способ  тоже  не  лишен недостатков.
Достаточно кому- нибудь воспользоваться программой копирования диска в  файл
и наоборот и он получит желаемый  ключ.Тот же недостаток и у способа  записи
ключа в область метки  диска.Этот способ предполагает запись  неотображаемых
кодов в  метку диска.  Так как  метка включает  в себя  11 символов, то есть
возможность даже вести статистику пользователей,используя принцип  двоичного
кода и  используя  вместо  нулей и   единиц коды  00h,  FFh,  20h. Хотя  эти
методы  хороши   для   оболванивания   неопытных   пользователей,   они   не
годятся   для опытного  человека, который  раскусит вашу  штучку без особого
труда.

      В конце концов родилась такая  идея. В ВООТ - сектор  ключевой дискеты
вписываются байты кода и сектор считывается в файл. Затем производится  счи-
тывание (можно  в тот  же файл)  информации об  конфигурации данной ПЭВМ или
хотя бы данного жесткого  диска(в последнем случае количество  bad- секторов
лучше не учитывать, вспомните работу(?) с винчестером ЕС-184х.По той же при-
чине не следует использовать создание собственных псевдосбойных  кластеров).
После инсталляции, которая  производит все вышеперечисленные  операции прог-
рамма сравнивает данные из файла(  который, кстати можно использовать и  для
других целей,хотя бы для его маскировки) с теми, которые получает с  дискеты
и т.д. Для полной гарантии можно еще установить проверку соответствия  ключа
с дискеты к конфигурации данной ПЭВМ.

     В  случае  несоответствия  следует  спросить  пользователя, не забыл ли
он  вставить  нужную   дискету  и   в  случае   новой  неудачи  посоветовать
обратиться к разработчику.  Самому же разработчику  надо бы подумать  о том,
как прозводить инсталляцию программы. Наиболее разумно производить установку
самому (если ПС  достаточно дорого) или  с помощью программы-  инсталлятора,
которая будет работать определенное количество раз или до определенной даты.
Проверку законности использования следует проверять только при запуске про-
дукта, чтобы потом была возможность работать с дисководами.

     Неплох  также  вариант  запуска  основной  рабочей  программы  из некой
программы- стартера,  находящейся на  ключевой дискете.  Стартовая программа
может  проверять  те  же  самые  данные,  о  которых  уже шла речь. При этом
основная рабочая  программа должна  запускаться с  таким хитрым  параметром,
что  у  хакера,  пытающегося  его  узнать,  усохли  бы мозги. К тому же если
программа  с  винчестера  тоже  будет  проверять  ключи и коды, то у бандита
от программирования появится желание стереть в порошок программу, ее  автора
и компьютер, параметры которого не нравятся этой программе.

     Данный документ написан для любителей изобретать велосипед и как  совет
разработчикам программ- полицейских  не создавать убийственно  корявые вещи.
Здесь я умышленно не указывал названий программных продуктов, которые на мой
взгляд  неудачны,  дабы  не  создавать  им  плохой  репутации  и не приводил
примеров технологии разработки программы- защитника .


     06.08.91                         Федусенко Ю.А.
