<HTML>
<HEAD><TITLE>MacSoft's DESQview aware I/O Library - Long Entry</TITLE></HEAD>
<BODY>

<A HREF="ng21b4.html">[&lt;&lt;Previous Entry]</A>
<A HREF="ng223.html">[^^Up^^]</A>
<A HREF="ng2e24.html">[Next Entry&gt;&gt;]</A>
<A HREF="menu.html" >[Menu]</A>
<A HREF="info.html">[About The Guide]</A>
<HR>
<PRE>

   <B>int far makemenu(int x,int y,VMENU far *flags,char far *items,</B>
                    <B>int far (*scan)(int curnt));</B>

   This is quite complex function, but it also does a lot. As there's
 usually no need to change menu layouts during the application, the
 static structure is good choice, and it also reduces greatly the function
 call overhead. Makemenu() can handle up to 60 items and creates highlited
 hotkeys automatically.

 <B>Parameters :</B>

 x,y        Upper-left corner coordinates of menu window.
 flags      Address of parameter structure, see VMENU for more
            specific information.
 items      Address of string containing menu items. It's actually a
            row of strings, each one zero terminated. The empty string
            indicates end of list.
 scan       Address of input function. Makemenu uses four keys as special
            ones, all others are available for hotkeys. Four special ones :

            <U>CR</U>     Exit menu (positive)
            <U>ESC</U>    Exit menu (negative)
            <U>'+'</U>    Move to next item, if no more items, go back to first.
            <U>'-'</U>    Move to previous item, if no more items, jump to last.

            This function will be called with item number currently selected,
            starting from 1. This number can be used to create context sensi-
            tive help system.

 <B>Return :</B>

 Item number selected, starting from 1; it may be positive or negative. In
 first case input was terminated with CR or one of the hotkeys, negative
 number indicates, that ESC was used to leave the menu.

 <B>Example :</B>

 #include "window.h"
 #include &lt;dos.h&gt;
 #include &lt;bios.h&gt;

 char far *menu=
     "First choice\0"
     "Second choice\0"
     "Third choice\0"
     "4th choice\0"
     "Yet another choice\0"
     "The\0"
     "The\0"
     "The\0"
     "23094dfjw efwemf\0"
     "aklsjh aslfjasld kfjasdf laksdjf lsakdjf lkj lkj\0"
     "ABC\0"
     "\0"
 ;

 VMENU flags;

 int far scan(int item)
 {
     prtwnd(2,-1,"┤ Use '+' and '-' to move, CR of ESC to leave ├",0x0a);
     item=bioskey(0)&amp;255; /* just to avoid warnings about not using item */
     return item;
 }

 main()
 {
     makewnd(0,0,79,24,"░░░░░░░░░",0x0101,80);
     flags.frame=SINGLEFRAME;
     flags.makenew=1;
     flags.center=1;
     flags.wndcolor=0x0a07;
     flags.normcolor=0x07;
     flags.invcolor=0x70;
     flags.hicolor=0x0a;
     flags.leavemenu=1;
     flags.reserved=4;
     flags.defchoice=3;
     flags.defchoice=makemenu(20,6,&amp;flags,menu,&amp;scan);
     flags.defchoice=makemenu(14,5,&amp;flags,menu,&amp;scan);
     flags.defchoice=makemenu(7,2,&amp;flags,menu,&amp;scan);
     flags.center=0;
     flags.defchoice=makemenu(10,12,&amp;flags,menu,&amp;scan);
     flags.defchoice=makemenu(5,3,&amp;flags,menu,&amp;scan);
     bioskey(0);
     while (closewnd());
 }
</PRE>
<HR>
<B>See Also:</B>
<A HREF="ngb51f.html">VMENU</A>
<A HREF="ng2e24.html">makewnd()</A>
<A HREF="ngda9.html">closewnd()</A>
<A HREF="ng528b.html">prtwnd()</A>

</BODY>
</HTML>
