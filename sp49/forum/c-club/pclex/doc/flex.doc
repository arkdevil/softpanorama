


     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)



     NAME     NAME     NAME     NAME
          flex - fast lexical analyzer generator

     SYNOPSIS     SYNOPSIS     SYNOPSIS     SYNOPSIS
          flex [ -dfirstvFILT -c[efmF] -Sskeleton_file ] [ ________ ]          flex   -dfirstvFILT -c[efmF] -Sskeleton_file     filename          flex   -dfirstvFILT -c[efmF] -Sskeleton_file     filename          flex   -dfirstvFILT -c[efmF] -Sskeleton_file     filename

     DESCRIPTION     DESCRIPTION     DESCRIPTION     DESCRIPTION
          ____ is a rewrite of ___ intended to right some of that          flex                 lex
          tool's deficiencies: in particular, ____ generates lexical                                              flex
          analyzers much faster, and the analyzers use smaller tables
          and run faster.

     OPTIONS     OPTIONS     OPTIONS     OPTIONS
          In addition to lex's -t flag, flex has the following                               -t                               -t                               -t
          options:

          -d   makes the generated scanner run in _____ mode.          -d                                      debug          -d                                      debug          -d                                      debug
               Whenever a pattern is recognized the scanner will write
               to ______ a line of the form:                  stderr

                   --accepting rule #n

               Rules are numbered sequentially with the first one
               being 1.

          -f   has the same effect as lex's -f flag (do not compress          -f          -f          -f
               the scanner tables); the mnemonic changes from ____                                                              fast
               ___________ to (take your pick) ____ _____ or ____               compilation                     full table    fast
               _______. The actual compilation takes ______, since               scanner                               longer
               flex is I/O bound writing out the big table.

               This option is equivalent to -cf (see below).                                            -cf                                            -cf                                            -cf

          -i   instructs flex to generate a ____-___________ scanner.          -i                                case insensitive          -i                                case insensitive          -i                                case insensitive
               The case of letters given in the flex input patterns
               will be ignored, and the rules will be matched
               regardless of case.  The matched text given in ______                                                              yytext
               will have the preserved case (i.e., it will not be
               folded).

          -r   specifies that the scanner uses the REJECT action.          -r                                       REJECT          -r                                       REJECT          -r                                       REJECT

          -s   causes the _______ ____ (that unmatched scanner input          -s              default rule          -s              default rule          -s              default rule
               is echoed to ______) to be suppressed.  If the scanner                            stdout
               encounters input that does not match any of its rules,
               it aborts with an error.  This option is useful for
               finding holes in a scanner's rule set.

          -v   has the same meaning as for lex (print to ______ a          -v                                             stderr          -v                                             stderr          -v                                             stderr
               summary of statistics of the generated scanner).  Many
               more statistics are printed, though, and the summary
               spans several lines.  Most of the statistics are



     Page 1                                           (printed 5/9/88)






     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)



               meaningless to the casual flex user.

          -F   specifies that the ____ scanner table representation          -F                      fast          -F                      fast          -F                      fast
               should be used.  This representation is about as fast
               as the full table representation (-_), and for some                                                  f
               sets of patterns will be considerably smaller (and for
               others, larger).  In general, if the pattern set
               contains both "keywords" and a catch-all, "identifier"
               rule, such as in the set:

                    "case"    return ( TOK_CASE );
                    "switch"  return ( TOK_SWITCH );
                    ...
                    "default" return ( TOK_DEFAULT );
                    [a-z]+    return ( TOK_ID );

               then you're better off using the full table
               representation.  If only the "identifier" rule is
               present and you then use a hash table or some such to
               detect the keywords, you're better off using -_.                                                             F

               This option is equivalent to -cF (see below).                                            -cF                                            -cF                                            -cF

          -I   instructs flex to generate an ___________ scanner.          -I                                 interactive          -I                                 interactive          -I                                 interactive
               Normally, scanners generated by flex always look ahead
               one character before deciding that a rule has been
               matched.  At the possible cost of some scanning
               overhead (it's not clear that more overhead is
               involved), flex will generate a scanner which only
               looks ahead when needed.  Such scanners are called
               ___________ because if you want to write a scanner for               interactive
               an interactive system such as a command shell, you will
               probably want the user's input to be terminated with a
               newline, and without -I the user will have to type a                                    -I                                    -I                                    -I
               character in addition to the newline in order to have
               the newline recognized.  This leads to dreadful
               interactive performance.

               If all this seems to confusing, here's the general
               rule: if a human will be typing in input to your
               scanner, use -I, otherwise don't; if you don't care                            -I,                            -I,                            -I,
               about how fast your scanners run and don't want to make
               any assumptions about the input to your scanner, always
               use -I.                   -I.                   -I.                   -I.

               Note, -I cannot be used in conjunction with ____ or                     -I                                    full                     -I                                    full                     -I                                    full
               ____ ______, i.e., the -f, -F, -cf, or -cF flags.               fast tables            -f, -F, -cf,    -cF               fast tables            -f, -F, -cf,    -cF               fast tables            -f, -F, -cf,    -cF

          -L   instructs flex to not generate #line directives (see          -L                                  #line          -L                                  #line          -L                                  #line
               below).

          -T   makes flex run in _____ mode.  It will generate a lot          -T                     trace          -T                     trace          -T                     trace



     Page 2                                           (printed 5/9/88)






     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)



               of messages to standard out concerning the form of the
               input and the resultant non-deterministic and
               deterministic finite automatons.  This option is mostly
               for use in maintaining flex.

          -c[efmF]          -c[efmF]          -c[efmF]          -c[efmF]
               controls the degree of table compression.  -ce directs                                                          -ce                                                          -ce                                                          -ce
               flex to construct ___________ _______, i.e., sets of                                 equivalence classes
               characters which have identical lexical properties (for
               example, if the only appearance of digits in the flex
               input is in the character class "[0-9]" then the digits
               '0', '1', ..., '9' will all be put in the same
               equivalence class).  -cf specifies that the ____                                    -cf                    full                                    -cf                    full                                    -cf                    full
               scanner tables should be generated - flex should not
               compress the tables by taking advantages of similar
               transition functions for different states.  -cF                                                           -cF                                                           -cF                                                           -cF
               specifies that the alternate fast scanner
               representation (described above under the -F flag)                                                         -F                                                         -F                                                         -F
               should be used.  -cm directs flex to construct ____-                                -cm                           meta                                -cm                           meta                                -cm                           meta
               ___________ _______, which are sets of equivalence               equivalence classes
               classes (or characters, if equivalence classes are not
               being used) that are commonly used together.  A lone -c                                                                    -c                                                                    -c                                                                    -c
               specifies that the scanner tables should be compressed
               but neither equivalence classes nor meta-equivalence
               classes should be used.

               The options -cf or -cF and -cm do not make sense                           -cf    -cF     -cm                           -cf    -cF     -cm                           -cf    -cF     -cm
               together - there is no opportunity for meta-equivalence
               classes if the table is not being compressed.
               Otherwise the options may be freely mixed.

               The default setting is -cem which specifies that flex                                      -cem                                      -cem                                      -cem
               should generate equivalence classes and meta-
               equivalence classes.  This setting provides the highest
               degree of table compression.  You can trade off
               faster-executing scanners at the cost of larger tables
               with the following generally being true:

                   slowest            smallest
                              -cem
                              -ce
                              -cm
                              -c
                              -c{f,F}e
                              -c{f,F}
                   fastest            largest


          -Sskeleton_file          -Sskeleton_file          -Sskeleton_file          -Sskeleton_file
               overrides the default skeleton file from which flex
               constructs its scanners.  You'll never need this option
               unless you are doing flex maintenance or development.



     Page 3                                           (printed 5/9/88)






     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)



     INCOMPATIBILITIES WITH LEX     INCOMPATIBILITIES WITH LEX     INCOMPATIBILITIES WITH LEX     INCOMPATIBILITIES WITH LEX
          ____ is fully compatible with ___ with the following          flex                          lex
          exceptions:

          -    There is no run-time library to link with.  You needn't
               specify -__ when linking, and you must supply a main                        ll
               program.  (Hacker's note: since the lex library
               contains a main() which simply calls yylex(), you
               actually ___ be lazy and not supply your own main                        can
               program and link with -__.)                                      ll

          -    lex's %r (Ratfor scanners) and %t (translation table)                     %r                       %t                     %r                       %t                     %r                       %t
               options are not supported.

          -    The do-nothing -_ flag is not supported.                               n

          -    When definitions are expanded, flex encloses them in
               parentheses.  With lex, the following

                   NAME    [A-Z][A-Z0-9]*
                   %%
                   foo{NAME}?      printf( "Found it\n" );
                   %%

               will not match the string "foo" because when the macro
               is expanded the rule is equivalent to "foo[A-Z][A-Z0-
               9]*?"  and the precedence is such that the '?' is
               associated with "[A-Z0-9]*".  With flex, the rule will
               be expanded to "foo([A-z][A-Z0-9]*)?" and so the string
               "foo" will match.

          -    yymore() is not supported.               yymore()               yymore()               yymore()

          -    The undocumented lex-scanner internal variable yylineno                                                              yylineno                                                              yylineno                                                              yylineno
               is not supported.

          -    If your input uses REJECT, you must run flex with the                                  REJECT,                                  REJECT,                                  REJECT,
               -r flag.  If you leave out the flag, the scanner will               -r               -r               -r
               abort at run-time with a message that the scanner was
               compiled without the flag being specified.

          -    The input() routine is not redefinable, though may be                   input()                   input()                   input()
               called to read characters following whatever has been
               matched by a rule.  If input() encounters and end-of-                                      input()                                      input()                                      input()
               file the normal yywrap() processing is done.  A                               yywrap()                               yywrap()                               yywrap()
               ``real'' end-of-file is returned as ___.                                                   EOF

               Input can be controlled by redefining the YY_INPUT                                                         YY_INPUT                                                         YY_INPUT                                                         YY_INPUT
               macro.  YY_INPUT's calling sequence is
               "YY_INPUT(buf,result,max_size)".  Its action is to
               place up to max_size characters in the character buffer
               "buf" and return in the integer variable "result"



     Page 4                                           (printed 5/9/88)






     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)



               either the number of characters read or the constant
               YY_NULL (0 on Unix systems) systems) to indicate EOF.
               The default YY_INPUT reads from the file-pointer "yyin"
               (which is by default _____), so if you just want to                                    stdin
               change the input file, you needn't redefine YY_INPUT -
               just point yyin at the input file.

               A sample redefinition of YY_INPUT (in the first section
               of the input file):

                   %{
                   #undef YY_INPUT
                   #define YY_INPUT(buf,result,max_size) \
                       result = (buf[0] = getchar()) == EOF ? YY_NULL : 1;
                   %}

               You also can add in things like counting keeping track
               of the input line number this way; but don't expect
               your scanner to go very fast.

          -    output() is not supported.  Output from the ECHO macro               output()               output()               output()
               is done to the file-pointer "yyout" (default ______).                                                            stdout

          -    Trailing context is restricted to patterns which have
               either a fixed-sized leading part or a fixed-sized
               trailing part.  For example, "a*/b" and "a/b*" are
               okay, but not "a*/b*".  This restriction is due to a
               bug in the trailing context algorithm given in
               __________ __ ________ ______ (and _________ -               Principles of Compiler Design      Compilers
               __________, __________, ___ _____) which can result in               Principles  Techniques  and Tools
               mismatches.  Try the following lex program

                   %%
                   x+/xy           printf( "I found \"%s\"\n", yytext );

               on the input "xxy".  (If anyone knows of a fast
               algorithm for finding the beginning of trailing context
               for an arbitrary pair of regular expressions, please
               let me know!)  If you must have arbitrary trailing
               context, you can use yyless() to effect it.                                    yyless()                                    yyless()                                    yyless()

          -    flex reads only one input file, while lex's input is
               made up of the concatenation of its input files.

     ENHANCEMENTS     ENHANCEMENTS     ENHANCEMENTS     ENHANCEMENTS
          -    _________ _____-__________ can be declared by using %x               Exclusive start conditions                          %x               Exclusive start conditions                          %x               Exclusive start conditions                          %x
               instead of %s. These start-conditions have the property                          %s.                          %s.                          %s.
               that when they are active, __ _____ _____ ___ ______.                                          no other rules are active
               Thus a set of rules governed by the same exclusive
               start condition describe a scanner which is independent
               of any of the other rules in the flex input.  This
               feature makes it easy to specify "mini-scanners" which



     Page 5                                           (printed 5/9/88)






     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)



               scan portions of the input that are syntactically
               different from the rest (e.g., comments).

          -    flex dynamically resizes its internal tables, so
               directives like "%a 3000" are not needed when
               specifying large scanners.

          -    The scanning routine generated by flex is declared
               using the macro YY_DECL. By redefining this macro you                               YY_DECL.                               YY_DECL.                               YY_DECL.
               can change the routine's name and its calling sequence.
               For example, you could use:

                   #undef YY_DECL
                   #define YY_DECL float lexscan( a, b ) float a, b;

               to give it the name _______, returning a float, and                                   lexscan
               taking two floats as arguments.

          -    flex generates #line directives mapping lines in the                              #line                              #line                              #line
               output to their origin in the input file.

          -    You can put multiple actions on the same line,
               separated with semi-colons.  With lex, the following

                   foo    handle_foo(); return 1;

               is truncated to

                   foo    handle_foo();

               flex does not truncate the action.  Actions that are
               not enclosed in braces are terminated at the end of the
               line.

          -    Actions can be begun with %{ and terminated with %}. In                                         %{                     %}.                                         %{                     %}.                                         %{                     %}.
               this case, flex does not count braces to figure out
               where the action ends - actions are terminated by the
               closing %}. This feature is useful when the enclosed                       %}.                       %}.                       %}.
               action has extraneous braces in it (usually in comments
               or inside inactive #ifdef's) that throw off the brace-
               count.

          -    All of the scanner actions (e.g., ECHO, yywrap ...)                                                 ECHO, yywrap ...)                                                 ECHO, yywrap ...)                                                 ECHO, yywrap ...)
               except the unput() and input() routines, are written as                          unput()     input()                          unput()     input()                          unput()     input()
               macros, so they can be redefined if necessary without
               requiring a separate library to link to.

     FILES     FILES     FILES     FILES
          ____.__          flex sk
               skeleton scanner

          ____.___          flex fsk



     Page 6                                           (printed 5/9/88)






     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)



               skeleton scanner for -f and -F

          ________._          flexscom h
               common definitions for skeleton files

          ________._          flexsdef h
               definitions for compressed skeleton file

          ________._          fastsdef h
               definitions for -f, -F skeleton file

     SEE ALSO     SEE ALSO     SEE ALSO     SEE ALSO
          lex(1)

          M. E. Lesk and E. Schmidt, ___ - _______ ________ _________                                     LEX   Lexical Analyzer Generator

     AUTHOR     AUTHOR     AUTHOR     AUTHOR
          Vern Paxson, with the help of many ideas and much
          inspiration from Van Jacobson.  Original version by Jef
          Poskanzer.  Fast table representation is a partial
          implementation of a design done by Van Jacobson.  The
          implementation was done by Kevin Gong and Vern Paxson.

          Thanks to the many flex beta-testers, especially Casey
          Leedom, Nick Christopher, Chris Faylor, Eric Goldman, Craig
          Leres, Mohamed el Lozy, Esmond Pitt, Jef Poskanzer, and Dave
          Tallman.  Thanks to John Gilmore, Bob Mulcahy, Rich Salz,
          and Richard Stallman for help with various distribution
          headaches.

          Send comments to:

               Vern Paxson
               Real Time Systems
               Bldg. 46A
               Lawrence Berkeley Laboratory
               1 Cyclotron Rd.
               Berkeley, CA 94720

               (415) 486-6411

               vern@lbl-{csam,rtsg}.arpa
               ucbvax!lbl-csam.arpa!vern


     DIAGNOSTICS     DIAGNOSTICS     DIAGNOSTICS     DIAGNOSTICS
          ____ _______ ______ - a scanner compiled with -s has          flex scanner jammed                           -s          flex scanner jammed                           -s          flex scanner jammed                           -s
          encountered an input string which wasn't matched by any of
          its rules.

          ____ _____ ______ __________ - a scanner rule matched a          flex input buffer overflowed
          string long enough to overflow the scanner's internal input



     Page 7                                           (printed 5/9/88)






     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)



          buffer (as large as BUFSIZ in "/usr/include/stdio.h").  You                              BUFSIZ                              BUFSIZ                              BUFSIZ
          can edit ________._ and increase YY_BUF_SIZE and YY_MAX_LINE                   flexscom h              YY_BUF_SIZE     YY_MAX_LINE                   flexscom h              YY_BUF_SIZE     YY_MAX_LINE                   flexscom h              YY_BUF_SIZE     YY_MAX_LINE
          to increase this limit.

          ______ ____ ___ _______ ___ ___ _________ _____ -_ - just          REJECT used and scanner was not generated using  r
          like it sounds.  Your scanner uses REJECT. You must run flex                                             REJECT.                                             REJECT.                                             REJECT.
          on the scanner description using the -r flag.                                               -r                                               -r                                               -r

          ___-_____ ___ _______ _______ - the flex input contains a          old style lex command ignored
          lex command (e.g., "%n 1000") which is being ignored.

     BUGS     BUGS     BUGS     BUGS
          Use of unput() or input() trashes the current yytext and
          yyleng.

          Use of unput() to push back more text than was matched can
          result in the pushed-back text matching a beginning-of-line
          ('^') rule even though it didn't come at the beginning of
          the line.

          Nulls are not allowed in flex inputs or in the inputs to
          scanners generated by flex.  Their presence generates fatal
          errors.

          Do not mix trailing context with the '|' operator used to
          specify that multiple rules use the same action.  That is,
          avoid constructs like:

                  foo/bar      |
                  bletch       |
                  bugprone     { ... }

          They can result in subtle mismatches.  This is actually not
          a problem if there is only one rule using trailing context
          and it is the first in the list (so the above example will
          actually work okay).  The problem is due to fall-through in
          the action switch statement, causing non-trailing-context
          rules to execute the trailing-context code of their fellow
          rules.  This should be fixed, as it's a nasty bug and not
          obvious.  The proper fix is for flex to spit out a
          FLEX_TRAILING_CONTEXT_USED #define and then have the backup
          logic in a separate table which is consulted for each rule-
          match, rather than as part of the rule action.  The place to
          do the tweaking is in add_accept() - any kind soul want to
          be a hero?

          The pattern:

               x{3}

          is considered to be variable-length for the purposes of
          trailing context, even though it has a clear fixed length.



     Page 8                                           (printed 5/9/88)






     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)     FLEX(1)            UNIX System V (13 May 1987)            FLEX(1)



          Due to both buffering of input and read-ahead, you cannot
          intermix calls to, for example, getchar() with flex rules                                          getchar()                                          getchar()                                          getchar()
          and expect it to work.  Call input() instead.                                       input()                                       input()                                       input()

          The total table entries listed by the -v flag excludes the                                                -v                                                -v                                                -v
          number of table entries needed to determine what rule has
          been matched.  The number of entries is equal to the number
          of DFA states if the scanner was not compiled with -r, and                                                             -r,                                                             -r,                                                             -r,
          greater than the number of states if it was.

          The scanner run-time speeds have not been optimized as much
          as they deserve.  Van Jacobson's work shows that the can go
          quite a bit faster still.










































     Page 9                                           (printed 5/9/88)



