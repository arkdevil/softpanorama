$macro MYDRAW TRANS;
{******************************************************************************
																MULTI-EDIT MACRO

–ò–º—è: MYDRAW

–û–ø–∏—Å–∞–Ω–∏–µ: –≠—Ç–æ—Ç –º–∞–∫—Ä–æ—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∏—Å–æ–≤–∞—Ç—å –∏ –∑–∞–∫—Ä–∞—à–∏–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞
          —Å–ª–µ–¥—É—é—â–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Ç–∞–±–ª–∏—Ü—ã ASCII: ‚ñë, ‚ñí, ‚ñì, ‚ñà, ‚ñÑ, ‚ñå, ‚ñê, ‚ñÄ, –∞ —Ç–∞–∫–∂–µ
					–ø—Ä–æ–±–µ–ª–æ–º(–æ—á–∏—Å—Ç–∫–∞).

							(C) Copyright 1990 by Basil S.
******************************************************************************}

	def_int(t_insert_mode,
	        t_fkey_color,
					t_tab_expand);
	def_str(char_mode);
	t_insert_mode := insert_mode;
	insert_mode := 0;
	t_tab_expand := tab_expand;
	tab_expand := 0;
	Undo_stat := 0;
	refresh := 1;
	redraw;

	push_labels;
	flabel('__  __', 12, $FF);
	flabel('__‚ñë‚ñë__', 13, $FF);
	flabel('__‚ñí‚ñí__', 14, $FF);
	flabel('__‚ñì‚ñì__', 15, $FF);
	flabel('__‚ñà‚ñà__', 16, $FF);
	flabel('__‚ñÑ‚ñÑ__', 17, $FF);
	flabel('__‚ñå‚ñå__', 18, $FF);
	flabel('__‚ñê‚ñê__', 19, $FF);
	flabel('__‚ñÄ‚ñÄ__', 20, $FF);
	t_fkey_color := fkey_color;
	fkey_color := w_t_color;

	char_mode := '‚ñí';

wait:

	make_message('MODE: __' + char_mode + char_mode +
	'__,  = move, Shft  = draw, F3–éF10 = change mode, Esc = quit');

	read_key;
	if (key1 = 27) and (key2 = 1) then
		goto cancel;
	end;

	if (key1 = 0) then
		if (key2 = 60) then
    	char_mode := ' ';
		end;
		if (key2 = 61) then
    	char_mode := '‚ñë';
		end;
		if (key2 = 62) then
    	char_mode := '‚ñí';
		end;
		if (key2 = 63) then
    	char_mode := '‚ñì';
		end;
		if (key2 = 64) then
    	char_mode := '‚ñà';
		end;
		if (key2 = 65) then
    	char_mode := '‚ñÑ';
		end;
		if (key2 = 66) then
    	char_mode := '‚ñå';
		end;
		if (key2 = 67) then
    	char_mode := '‚ñê';
		end;
		if (key2 = 68) then
    	char_mode := '‚ñÄ';
		end;
		if (key2 = 72) then
			up;
		end;
		if (key2 = 80) then
			down;
		end;
		if (key2 = 75) then
			left;
		end;
		if (key2 = 77) then
			right;
		end;
		if (key2 = 73) then
			page_up;
		end;
		if (key2 = 81) then
			page_down;
		end;
		if (key2 = 71) then
			home;
		end;
		if (key2 = 79) then
			eol;
		end;
	end;

	if (key1 = 56) and (key2 = 72) then
		if (cur_char = char_mode) then
		  up;
		  text(char_mode);
		  left;
		else
		  text(char_mode);
		  left;
		end;
	end;

	if (key1 = 54) and (key2 = 77) then
		if (cur_char = char_mode) then
		  right;
		  text(char_mode);
		  left;
		else
		  text(char_mode);
		  left;
		end;
	end;

	if (key1 = 52) and (key2 = 75) then
		if (cur_char = char_mode) then
		  left;
		  text(char_mode);
		  left;
		else
		  text(char_mode);
		  left;
		end;
	end;

	if (key1 = 50) and (key2 = 80) then
		if (cur_char = char_mode) then
		  down;
		  text(char_mode);
		  left;
		else
		  text(char_mode);
		  left;
		end;
	end;

	goto wait;

cancel:

	insert_mode := t_insert_mode;
	tab_expand := t_tab_expand;
	fkey_color := t_fkey_color;
	pop_labels;
	make_message('');
	undo_stat := 1;

	end_macro;