			  Описание paботы пpoгpаммы 21.com
				( Шпион 21-го пpepывания )

		   ( исходный текст на ассемблеpе 21.asm )

########	Общие сведения .

	Программа представляет собой резидентно загружаемый модуль,
который перехватывает 21 -е прерывание ( функции DOS ) и, благодаря
этому позволяет программисту выполнять функции трассировки программ,
интенсивно использующих функции DOS, как непосредственно при помощи
21.com , так и совместно с такими отладочными средствами, как
	Periscope,
	Symdeb,
	Debug,
	Afd,
	Sst,
	CV и др.

########     Несколько слов о совместимости.

21.com может работать с любыми версиями MS DOS , начиная от 2.0.
При использовании компиляторов фирмы Borland (Turbo C, Turbo Pascal и др.)
и программных продуктов, сделанных с использованием этих компиляторов
могут возникать зависания.  Для работы в таких ситуациях лучше использовать
модификацию программы 21.com - 21jump.com. ( О особенностях работы с этой
модификацией см. ниже). Обе программы работают только в текстовом режиме
экрана (80*25 , 80*35 , 80*43 , 80*50 ). В графическом режиме зависаний не
происходит, однако выдаваемая на экран информация представляется в
искаженном виде, при возврате в текстовый режим нормальная работа
возобновляется.

########	Принцип работы 21.com.

	21.com перехватывает 21 - е прерывание и производит некоторую обработку
как до исполнения функции DOS, так и после ( для вызова собственно фукции
DOS  в 21.com используется прямой дальний вызов, а в 21jump.com прямой
дальний переход ).	В 21jump.com такой обработки не происходит .
Перед исполнением фукции DOS на первой строке экрана распечатывается русское
название данной функции DOS и некоторая справочная информация о том, в каких
регистрах передается фукции специфические данные ( названия регистров после
знака # сигнализируют о необходимости анализа этих регистров после
исполнения функции DOS ), а на второй строке экрана распечатываются
значения регистров AX,BX,CX,DX,SP,BP,SI,DI,DS,ES,SS (обратите внимание,
последние два регистра распечатываются без указания их названия) в
шестнадцатиричном представлении. Во второй половине 24-й строки
распечатываются некоторые текстовые данные, такие как имя файла при попытке
открыть, удалить, найти файл, имя модуля или оверлея при исполнении EXEC и
др. Если клавиатура находится в состоянии ScrollLock off (лампочка не горит),
то происходит немедленное выполнение функции DOS. После выполнения функции
DOS при использовании 21jump.com никакой обработки не происходит, а происходит
непосредственный возврат в вызывающую программу . При использовании модуля
21.com на третьей строке экрана под значениями регистров перед выполнением
функции DOS распечатываются значения тех же регистров, но после исполнения
функции DOS . На 24 - й  строке также распечатывается текстовая информация
в том случае, если функция DOS возвращает таковую ( например имя следующего
найденного файла ) . Если состояние клавиатуры NumLock off ( соответствующая
лампочка не горит ) то происходит немедленный возврат в вызывающую программу.
	Обратите внимание, что все данные, находившиеся на экране до вызова функции
DOS восстанавливаются (для регенерации экрана используется буфер в области
видеопамяти третьей текстовой страницы экрана ).
	Для того, чтобы приостановить работу перед использованием функции DOS,
намите ScrollLock, при этом после распечатки регистров вызывается 0 - ая
функция 16 - го прерывания (ожидание ввода с клавиатуры ), проанализировав
содержимое регистров, намите любую клавишу ( или, если вы инсталлировали
Periscope, - для входа в отладчик нажмите SysRq или PrintScreen ).
Аналогично, для задержки после выполнения Функции DOS нажмите NumLock .
	Приводится пример запуска 21.com совместно с инсталляцией Periscope в
AUTOEXEC.BAT.
	21.com обеспечивает большое удобство при работе с множественными оверлеями
и вызовами , при взломе паролей, при попытках создания дистрибутивных дискет
( для выяснения вопроса, какой же файл хочет найти не ней инсталлятор )
и т.д.	Шпион 21 - го прерывания - незаменимый инструмент для любителей
системного шпионажа !
	Приятной работы со шпионом 21 - го прерывания !
Мой адрес : 314020, Полтава , Комсомольская 11 , Селивоненко Андрей Борисович.
My office : Полтава, Калинина 36, 4 -я поликлиника, тел. (05322) 3-86-52 , 3-13-52.



