


            Ф О Р М А Т И З А Ц И Я     Т Е К С Т О В
            =========================================

                (Инструкция к программе TFORM.EXE)



                          Альперович Л. З. тел. 386-59-36


     Программа предназначена для  форматизации  текстовых
    файлов, имеющих правильный  левый  рельеф.  Последнее
    означает, что левая  граница  упорядочена  "вручную".
    Программа, таким образом, осуществляет выравнивание и
    перенос правой границы. В процессе  форматизации осу-
    ществляется разбиение строк по правилам русского пра-
    вописания. (Cлова латинского шрифта не переносятся).
     Это основной режим работы. Смысл его  - форматизация
    без использования каких-либо  управляющих  признаков,
    включенных в исходный текст.  Однако,  допускается  и
    такое включение.
     Имеется возможность осуществить в  диалоге  разметку
    текста с указанием  неформатируемых  фрагментов. Раз-
    метка не меняет исходный текст.

     Автор благодарен Л.Б.Буничу и Л.И.Блехеру  за советы
    и содействие в отладке новых версий.

     Для работы указывается:
     - имя текстового файла;
     - имя  выходного  текстового  файла;
     - правая граница выходного текста;
     - позиция начала абзацев;
     - левая граница;
     - флаг диалоговой разметки;
     - флаг (или позиция) совпадения начала абзаца с ле-
       вой границей в исходном файле;
     - флаг выключения режима переноса слов;
     - флаг проверки управляющих признаков,  включенных в
       текст.
     - флаг визуализации неотформатированных кусков текс-
       та.

     Если не задать имя выходного файла, то это имя будет
    получено из исходного заменой расширения на 'tfm'.
     Если имя выходного файла пустое  (задан  параметр  f
    без текста имени), то новый файл будет иметь  имя ис-
    ходного, а исходный получит расширение 'bak'.
     Если не задать правую границу или позицию начала аб-
    заца, то программа выводит текст на  экран  и  просит
    указать курсором соответствующую позицию.  Выбор осу-
    ществляется по нажатию клавиши ENTER.

     Форматируются только те абзацы, начало  которых рас-
    положено в соответствии с параметром  позиции  начала
    абзацев. Таким образом, навязывается особая дисципли-
    на подготовки текстов: Все, что может быть подвергну-
    то переформатизации должно иметь  стабильное располо-
    жение начала абзацев.

     Левая граница абзаца распознается контекстно, поэто-
       му исходный текст может содержать  различные абза-
       цы. Параметр левой границы задается, когда необхо-
       димо разместить форматируемые  абзацы  с  заданной
       левой границей. Если параметр не  задан,  то прог-
       рамма может его запросить для  того,  чтобы разоб-
       раться в случае, когда левая граница контекстно не
       определяется (например, для одиноких строк при су-
       жении текста).
     Если  левая граница исходного текста совпадает с на-
    чалом абзаца (абзац не имеет отступа),  то нужно ука-
    зать это соответствующим параметром - флажком, а ина-
    че каждая строка абзаца будет интерпретироваться, как
    отдельный абзац.

     Наличие флага диалоговой разметки означает инициацию
    этого режима.

     Флаг проверки управляющих признаков  указывает метод
    анализа  управляющих  признаков  форматирования, при-
    сутствующих в исходном тексте.



     Наличие флага визуализации означает, что  в процессе
    форматирования на экран дисплея  выводятся неотформа-
    тированные фрагменты и их  номера  строк  в  исходном
    тексте.


                    Обращение к  программе
                    ----------------------

     TFORM.EXE <имя_файла> [режимы]

     <Имя_файла> обязательный  параметр.  Если  программа
    вызвана без параметров, она выводит на экран описание
    обращения к ней и заканчивает работу.

     Режимы задаются в произвольном наборе через пробелы.
    Каждый режим описывается словом, первая буква которо-
    го кодирует имя режима. (Буквы  латинские,  прописные
    или строчные).
     Перечень кодов: A L R F M C V

                      Описание режимов
                      ----------------

     Aчисло1-число2 - позиция начала абзацев.  Число1 за-
    дает позицию по  которой  будет  "узнаваться"  абзац.
    Число2 задает новое положение начала.  Таким  образом
    можно переместить начало абзацев.
     Примеры: A6, a6-10, a-10

     Lчисло - позиция левой границы. Пример: l5

     Rчисло - позиция правой границы. Пример: r70

     Fимя - Имя файла для вывода информации на  диск. Для
    "пробного прогона" нужно задать fnul.

     Е - флаг,  наличие которого означает, что в исходном
    тексте  начало  абзаца может совпадать с левой грани-
    цей, и в таком случае весь фрагмент текста до пробела
    или  до  нового  отступа нужно интерпретировать,  как
    один абзац. Можно также вместо параметра A задать:
     Eчисло1-число2

     M - Инициация диалоговой разметки. В этом  режиме на
    экран дисплея выводится исходный  текст,  и пользова-
    тель может символом 'n' пометить строки,  которые  не
    должны форматироваться. Верхняя строка  экрана содер-
    жит подсказку.

     Wчисло - Флаг выключения режима  переноса  слов. До-
    пустимые значения:
     W - перенос слов (т.е. разбивка по правилам правопи-
    сания) выключен.
     W0 - перенос включен (принято по умолчанию).

     Vчисло - Флаг визуализации. Допустимые значения:
     V  - визуализация включена
     V0 - визуализация выключена (принято по умолчанию).

##N

     Cчисло - Флаг проверки управляющих признаков.
     Допустимые значения:
     C - Управляющие символы проверяются и  в выходной
          файл не переписываются.
     C1 - Управляющие символы проверяются и переписыва-
          ются в выходной файл.
     C0 - Управляющие признаки не проверяются (принято по
          умолчанию).

                  Управляющие признаки
                  --------------------
##r50
     Управляющие признаки форматирования в исходном текс-
    те должны задаваться отдельными  строками, отличающи-
    мися тем, что в первых двух  позициях  содержится код
    "##". За ним непосредственно следует код управляющего
    признака. Возможны признаки:
     ##N - Отменить форматирование.
     ##Rчисло - Новая правая граница,  включение формати-
        рования. Пример: ##R40
     ## -  Включение форматирования.
     ##Режимы - Все возможные режимы через пробелы. Такая
        строка имеет смысл, если она первая в тексте.



     Контрольным  примером  может  служить  текст  данной
    инструкции. Задайте команды:
        Tform tform.doc r40 a6 v0
        Tform tform.doc r40 a6
        Tform tform.doc r40 a6 m
        Tform tform.doc r76 a6-10 l8 m
        Tform tform.doc r76 a6-10 l6 /*левая граница = нач. абз.
        Tform tform.doc r76 m
        Tform tform.doc r76 a-14
        Tform tform.doc r66 a-10 c
     В последних трех примерах запрашивается начало абзаца.

                  КОД ЗАВЕРШЕНИЯ
                  ==============
     0 - нормальное окончание
     1 - ошибка в режимах
     2 - выходной файл не создан
     3 - входной  файл не найден
     4 - принудительное завершение по ESC
     5 - строка исходного текста больше 20000.

                 - Конец текста -
