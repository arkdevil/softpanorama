                            Автор   Русских Василий Александрович (пока 15 лет)
                                          
█████████     ███████    ██████████   ██████████   █       ██   ██████████
█░░░░░░██░   █ ░░░░░██   █░░░░░░░██░  █░░░░░░░░░░  ██      ██░   ░░░██░░░░░
█░     ██░  █ ░     ██░  █░      ██░  █░           █░██    ██░      ██░
█████████░  ██████████░  ██████████░  ████████     █░ ██   ██░      ██░
█░░░░░░░░░  █░░░░░░░██░  █░██░░░░░░░  █░░░░░░░░    █░  ██  ██░      ██░
█░          █░      ██░  █░ ███       █░           █░   ██ ██░      ██░
█░          █░      ██░  █░  ░███     █░           █░    ░███░      ██░
█░          █░      ██░  █░    ░███   ██████████   █░      ██░      ██░
 ░           ░        ░   ░      ░░░   ░░░░░░░░░░   ░       ░░       ░░

 ПОЗВОЛЯЕТ В ЛЮБОЙ МОМЕНТ ВЫЙТИ ИЗ ПОРОЖДЕННОГО ПРОЦЕССА ОБРАТНО В РОДИТЕЛЬСКИЙ
_______________________________________________________________________________

                             --- Кому это нужно? ---
    Это  нужно  тем, кому не жалко 1344 байт оперативной памяти и кто умеет це-
нить чужие программы.
                          --- Что делает программа? ---
    Работать с этой резидентной примочкой крайне просто. В любой момент  време-
ни,  когда вам приспичило  выйти из какой-нибудь программы (например, из Лекси-
кона в Norton Comander), просто нажмите на три клавиши Ctrl-Alt-Esc. Слегка пи-
кнет динамик (чисто для красоты), и Вы уже "сидите" в своем любимом Nortonе.
    Должен признать, что подобные программы уже существуют (к моей радости,  об
этом я узнал, когда заканчивал писать свой PARENT). Мне известны STOP и  XBREAK
Юциса.
                       --- Главные отличия от аналогов ---
    Про программу STOP я только слышал, поэтому ничего про неё сказать не могу.
                         --- Чем PARENT лучше XBREAK ---
    1. В памяти занимает в ДВА РАЗА МЕНЬШЕ места.
    2. Всегда корректно (насколько мне известно) вываливается  из  программ.  А
именно:
    2.1. Если Вы работаете в каком-нибудь отладчике (например Turbo Debugger) и
рискнете нажать на Alt-Break (аналог программы  Юциса),  то  в  операционку  Вы
все-таки  вылезете,  но при этом размер свободной оперативной памяти уменьшится
на ~400 (!) Кбайт. Если Вы наберетесь смелости сделать тоже самое  в  DOSовском
DEBUGе,  то  COMMAND.COM  пошлет в Ваш адрес пару ругательств по поводу, что не
может выделить память для себя, и система "повиснет".  Моя  программа  в  обоих
случаях вывалится корректно.
    Теперь, почему это возникает? Очень просто.
    Дело в том, что я (в отличие от XBREAK) запоминаю все MCB, которые открыва-
ет  программа.  В  принципе, в нормальных программах это делать не надо. Но! Мы
имеем дело с ОТЛАДЧИКАМИ. При вызове:
      mov	ah,4Ch
      int	21h
из любой нормальной программы система освобождает все блоки памяти, для которых
word ptr MCB:[1] == PSP. В большинстве случаев это оправдано. Но отладчики  это
значение  изменяют так, чтобы оно указывало на PSP отлаживаемой программы. Поэ-
тому, когда Вы жмёте на Alt-Break (программа Юциса), то все блоки памяти, кото-
рые пооткрывал отладчик для отлаживаемой программы остаются резидентными в  па-
мяти.  А  DEBUG имеет такую привычку хватать" ВСЮ свободную память (как правило
Z-блок). И когда Вы нажали Alt-Break, то COMMAND.COMу некуда грузится.
    Я же все это отлавливаю и ненужные блоки освобождаю.
    2.2. Моя программа ВСЕГДА запоминает ВСЕ вектора прерываний при запуске лю-
бой программы. Поэтому всегда безопасно нажать на Ctrl-Alt-Esc, чтобы выйти  из
текущей программы - все вектора будут восстановлены.
    В программе XBREAK я этого не замечал (не знаю, может я неправ?). Более то-
го,  когда  я  в Nortonе смотрел файл (F3) и рискнул нажать на Alt-Break, то по
экрану пошёл сильный снег (видать кто-то упорно что-то писал в  видеопамять)  и
система "повисла".
    Я  приношу  свои  извинения Юцису, автору XBREAK, если я неправ, но ЧЕСТНОЕ
СЛОВО такой момент у меня возникал. 2.3. Еще одна мелочь. Если Вы вывалились по
Ctrl-Alt-Esc, то PARENT восстановит тот видеорежим (и всякие мелкие параметры),
из которого была запущена программа. И БОЛЕЕ ТОГО, PARENT  очистит  экран,  что
тоже иногда бывает полезно. 2.X. Я Вам еще не надоел? Тогда читайте дальше.
                     --- Наиболее популярные применения ---
    По  достоинству (пару ласковых в мой адрес) могут оценить эту программу лю-
бители компьютерных игр. Если у игрушки нет нормального выхода в DOS, кроме как
перезагрузки, легко и грациозно (когда к Вам приближается босс и  Вы  в  полном
замешательстве  лупите  по  клавиатуре, пытаясь "вырубить" игрушку) нажатием на
Ctrl- Alt-Esc находитесь уже в родительском процессе. И никаких проблем с  тем,
что ребенок мог перехватить какой-то вектор (исключение составляет свопинг; ес-
ли это кто-то сделал и Вы вывашли по Ctrl-Alt-Esc, лучше сразу жмите на RESET).
Но!  Если  программа имеет собственный обработчик прерывания от клавиатуры (пе-
рехватывает INT 9) и "глушит" старый обработчик (не передает, попросту, на него
управления), то не пытайтесь выйти по Ctrl-Alt-Esc - все равно не поможет.
    В программе XBREAK, по моему, такая возможность оглашалась, но на моём опы-
те я ещё не выскачил НЕ ИЗ ОДНОЙ игрушки, даже из той, которая  не  имеет  свой
обработчик  и  с  которой PARENT справлялась ПОЧТИ моментально. Почему я говорю
ПОЧТИ? Потому что DOS - не ре-ен-те-ра-бе-ль-на-я операционка (не повторно вхо-
димая) и
      mov	ah,4Ch
      int	21h
можно делать ДАЛЕКО не всегда.
ОБЕЩАЮ: в следущей версии я попытаюсь решить проблему собственного обработчика.

    Если Вам PARENT надоел, Вы в любой момент можете его выгрузить из памяти  с
помощью RELEASа.
                                !!! ВНИМАНИЕ !!!
    Пользуйтесь  версией RELEASE, которая была выставлена на 51-й СОФТПАНОРАМЕ.
(Просто советую. Почему - поэкспериментируйте сами). Кстати,  ничего  страшного
не произойдет, если Вы будете использовать другой RELEASE, в котором не отлажен
механизм,  если какой-то блок уже освободили без ведома RELEASа. Иначе по Alt+=
у Вас будут изредка попадаться строки такого содержания:
      ??? block destroyed ???
Вот и все проблемы.
    И еще: если Вы запускаете PARENT в AUTOEXECе - будьте внимательны! Если  Вы
в Nortonе нажмете на Ctrl-Alt-Esc, то вывалетесь в COMMAND.COM. Правда, никаких
проблем: Вы можете снова запустить NC и наслаждаться жизнью.
    НО : Если Вы вышли (например из Nortonа по Ctrl-Alt-Esc), то все резиденты,
которые были выпущены из него будут нейтрализованы (т.е.  просто  выгружены  из
памяти). Всегда их можно запустить снова и наслаждаться жизнью.
    Чтобы подобные вещи случались как можно реже, запускайте PARENT в AUTOEXECе
непосредственно  перед  NC  (ведь иначе за PARENT могут идти резиденты, которые
будут нейтрализованы при выходе в COMMAND.COM).

                                               Обращаться:
                                            Киевская область, г.Обухов
                                            тел. (04472) 5-90-51  (14:00-22:00)
                                            Русских Василий Александрович

                        Желаю успехов в работе!!!
